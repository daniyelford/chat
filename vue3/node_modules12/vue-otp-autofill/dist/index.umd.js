(function(e,c){typeof exports=="object"&&typeof module<"u"?module.exports=c(require("vue")):typeof define=="function"&&define.amd?define(["vue"],c):(e=typeof globalThis<"u"?globalThis:e||self,e.OtpInput=c(e.Vue))})(this,(function(e){"use strict";const c={class:"otp-container"},f=["onUpdate:modelValue","onInput","onKeydown"];return{__name:"OtpInput",props:{modelValue:{type:String,default:""},length:{type:Number,default:6}},emits:["update:modelValue"],setup(g,{emit:h}){const i=e.ref(""),d=e.ref(""),p=e.ref(""),s=g,y=h,l=e.ref(Array.from({length:s.length},(o,t)=>s.modelValue[t]||"")),x=o=>{const t={"۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};return o.replace(/[۰-۹]/g,n=>t[n])},k=(o,t)=>{const n=x(o.target.value).replace(/[^0-9]/g,"").charAt(0)||"";l.value[t]=n,n&&t<l.value.length-1&&e.nextTick(()=>o.target.parentElement.children[t+1].focus())},T=(o,t)=>{const n=o.currentTarget.parentElement.children;if(o.key==="Backspace"){!l.value[t]&&t>0&&e.nextTick(()=>n[t-1].focus());return}o.key==="ArrowLeft"&&t>0&&e.nextTick(()=>n[t-1].focus()),o.key==="ArrowRight"&&t<l.value.length-1&&e.nextTick(()=>n[t+1].focus())};return e.watch(l,()=>{y("update:modelValue",l.value.join("")),d.value=l.value.join("")},{deep:!0}),e.onMounted(()=>{const o=document.createElement("style");if(o.textContent=`
    .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }
    .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }
    .bounce { animation: pulse 0.3s ease-in-out alternate; } 
      @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }
    `,document.head.appendChild(o),"OTPCredential"in window){const t=new AbortController;navigator.credentials.get({otp:{transport:["sms"]},signal:t.signal}).then(n=>{if(n?.code){d.value=n.code,p.value=n.type;const r=n.code.split("").slice(0,s.length);l.value=r,e.nextTick(()=>{const a=document.querySelectorAll(".otp-container input");r.forEach((_,m)=>{a[m]&&(a[m].value=_)});const u=Math.min(r.length,s.length)-1;a[u]&&a[u].focus()})}else i.value="OTP code not received!"}).catch(n=>{i.value=n.message})}}),(o,t)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createTextVNode(e.toDisplayString(i.value??"")+" "+e.toDisplayString(d.value??"")+" "+e.toDisplayString(p.value??"")+" ",1),e.createElementVNode("div",c,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(n,r)=>e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:r,type:"text",class:e.normalizeClass(["digit-box",{bounce:n!==""}]),"onUpdate:modelValue":a=>l.value[r]=a,maxlength:"1",onInput:a=>k(a,r),onKeydown:a=>T(a,r)},null,42,f)),[[e.vModelText,l.value[r]]])),128))])],64))}}}));
