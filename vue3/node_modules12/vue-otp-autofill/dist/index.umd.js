(function(e,c){typeof exports=="object"&&typeof module<"u"?module.exports=c(require("vue")):typeof define=="function"&&define.amd?define(["vue"],c):(e=typeof globalThis<"u"?globalThis:e||self,e.OtpInput=c(e.Vue))})(this,(function(e){"use strict";const c={class:"otp-container"},d=["onUpdate:modelValue","placeholder","onKeydown"],p=`
  .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }
  .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }
  .bounce { animation: pulse 0.3s ease-in-out alternate; } 
    @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }
  `;return{__name:"OtpInput",props:{modelValue:{type:String,default:""},length:{type:Number,default:6}},emits:["update:modelValue"],setup(f,{emit:m}){const s=e.ref(""),u=f,h=m,l=e.ref(Array.from({length:u.length},(t,o)=>u.modelValue[o]||"")),g=(t,o)=>{const r=t.currentTarget.parentElement.children,n=/^[0-9]$/.test(t.key);if(!n&&!["Backspace","ArrowLeft","ArrowRight","Tab"].includes(t.key)){t.preventDefault();return}if(n){l.value[o]=t.key,t.preventDefault(),o<l.value.length-1&&e.nextTick(()=>r[o+1].focus());return}if(t.key==="Backspace"){l.value[o]="",t.preventDefault(),o>0&&e.nextTick(()=>r[o-1].focus());return}t.key==="ArrowLeft"&&o>0&&e.nextTick(()=>r[o-1].focus()),t.key==="ArrowRight"&&o<l.value.length-1&&e.nextTick(()=>r[o+1].focus())};async function y(t=6e4){if(!("OTPCredential"in window))return;const o=new AbortController,r=o.signal;setTimeout(()=>o.abort(),t);try{const n=await navigator.credentials.get({otp:{transport:["sms"]},signal:r});s.value=n,n?.code?(s.value=n.code,n.code.split("").forEach((a,i)=>{i<u.length&&(l.value[i]=a)}),e.nextTick(()=>{const a=document.querySelectorAll(".otp-container input"),i=Math.min(n.code.length,u.length)-1;a[i]&&a[i].focus()})):s.value="empty content"}catch(n){s.value=n.message,console.warn("OTP AutoFill failed:",n.message)}}return e.watch(l,()=>{h("update:modelValue",l.value.join(""))},{deep:!0}),e.onMounted(()=>{const t=document.createElement("style");t.textContent=p,document.head.appendChild(t),y()}),(t,o)=>(e.openBlock(),e.createElementBlock("div",c,[e.createTextVNode(e.toDisplayString(s.value??"")+" ",1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(r,n)=>e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:n,type:"text",class:e.normalizeClass(["digit-box",{bounce:r!==""}]),"onUpdate:modelValue":a=>l.value[n]=a,maxlength:"1",placeholder:l.value[n]??0,onKeydown:a=>g(a,n)},null,42,d)),[[e.vModelText,l.value[n]]])),128))]))}}}));
