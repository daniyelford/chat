{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"cartable-details\"\n};\nconst _hoisted_3 = {\n  class: \"news-section\"\n};\nconst _hoisted_4 = {\n  class: \"news-header\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"user-info over-news\"\n};\nconst _hoisted_6 = [\"src\"];\nconst _hoisted_7 = {\n  class: \"news-description\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"news-address\"\n};\nconst _hoisted_9 = {\n  class: \"report-section\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"user-info over-report\"\n};\nconst _hoisted_11 = [\"src\"];\nconst _hoisted_12 = {\n  class: \"report-content\"\n};\nimport { onMounted, onUnmounted, watch, computed } from 'vue';\nimport { useCartableStore } from '@/stores/cartable';\nimport MediaSlider from '@/components/tooles/media/MediaSlider.vue';\nexport default {\n  __name: 'ShowCartable',\n  props: {\n    id: Number\n  },\n  setup(__props) {\n    const props = __props;\n    const store = useCartableStore();\n    const item = computed(() => store.getCartableById(props.id));\n    onMounted(async () => {\n      if (!store.allItems.length) {\n        await store.fetchCartables();\n      }\n      store.startPolling();\n    });\n    onUnmounted(() => {\n      store.stopPolling();\n    });\n    watch(props.id, async (newId, oldId) => {\n      if (newId !== oldId) {\n        if (!store.allItems.length) {\n          await store.fetchCartables();\n        }\n      }\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", null, [!item.value ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \" در حال بارگذاری یا موردی یافت نشد \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"section\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [item.value.has_rule ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [item.value.user?.image ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        src: item.value.user.image,\n        alt: \"User\",\n        class: \"avatar\"\n      }, null, 8, _hoisted_6)) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", null, [_createElementVNode(\"strong\", null, _toDisplayString(item.value.user.name) + \" \" + _toDisplayString(item.value.user.family), 1), _createElementVNode(\"p\", null, _toDisplayString(item.value.user.phone), 1)])])) : _createCommentVNode(\"\", true)]), item.value.news?.media?.length ? (_openBlock(), _createBlock(MediaSlider, {\n        key: 0,\n        medias: item.value.news.media\n      }, null, 8, [\"medias\"])) : _createCommentVNode(\"\", true), _createElementVNode(\"h2\", _hoisted_7, _toDisplayString(item.value.news.description), 1), item.value.news.address?.address ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, \" موقعیت: \" + _toDisplayString(item.value.news.address.city) + \" - \" + _toDisplayString(item.value.news.address.address), 1)) : _createCommentVNode(\"\", true)]), _createElementVNode(\"section\", _hoisted_9, [!item.value.has_rule ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [item.value.user?.image ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        src: item.value.user.image,\n        alt: \"User\",\n        class: \"avatar\"\n      }, null, 8, _hoisted_11)) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", null, [_createElementVNode(\"strong\", null, _toDisplayString(item.value.user.name) + \" \" + _toDisplayString(item.value.user.family), 1), _createElementVNode(\"p\", null, _toDisplayString(item.value.user.phone), 1)])])) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_12, [item.value.report?.media?.length ? (_openBlock(), _createBlock(MediaSlider, {\n        key: 0,\n        medias: item.value.report.media\n      }, null, 8, [\"medias\"])) : _createCommentVNode(\"\", true), _createElementVNode(\"h3\", null, _toDisplayString(item.value.report?.description || 'بدون توضیح'), 1), _createElementVNode(\"p\", null, \"زمان ثبت: \" + _toDisplayString(item.value.report?.created_at), 1), _createElementVNode(\"p\", null, \"زمان اجرا: \" + _toDisplayString(item.value.report?.run_time), 1)])])]))]);\n    };\n  }\n};","map":{"version":3,"names":["onMounted","onUnmounted","watch","computed","useCartableStore","MediaSlider","props","__props","store","item","getCartableById","id","allItems","length","fetchCartables","startPolling","stopPolling","newId","oldId"],"sources":["D:/GitHub/ci3-vue3/vue3/src/components/dashboard/pagesContent/ShowCartable.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"!item\">\r\n      در حال بارگذاری یا موردی یافت نشد\r\n    </div>\r\n    <div v-else class=\"cartable-details\">\r\n      \r\n      <!-- نمایش بخش خبر -->\r\n      <section class=\"news-section\">\r\n        <div class=\"news-header\">\r\n          <div v-if=\"item.has_rule\" class=\"user-info over-news\">\r\n            <img v-if=\"item.user?.image\" :src=\"item.user.image\" alt=\"User\" class=\"avatar\" />\r\n            <div>\r\n              <strong>{{ item.user.name }} {{ item.user.family }}</strong>\r\n              <p>{{ item.user.phone }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <MediaSlider v-if=\"item.news?.media?.length\" :medias=\"item.news.media\" />\r\n\r\n        <h2 class=\"news-description\">{{ item.news.description }}</h2>\r\n\r\n        <div class=\"news-address\" v-if=\"item.news.address?.address\">\r\n          موقعیت: {{ item.news.address.city }} - {{ item.news.address.address }}\r\n        </div>\r\n      </section>\r\n\r\n      <!-- نمایش بخش گزارش -->\r\n      <section class=\"report-section\">\r\n        <div v-if=\"!item.has_rule\" class=\"user-info over-report\">\r\n          <img v-if=\"item.user?.image\" :src=\"item.user.image\" alt=\"User\" class=\"avatar\" />\r\n          <div>\r\n            <strong>{{ item.user.name }} {{ item.user.family }}</strong>\r\n            <p>{{ item.user.phone }}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"report-content\">\r\n          <MediaSlider v-if=\"item.report?.media?.length\" :medias=\"item.report.media\" />\r\n          <h3>{{ item.report?.description || 'بدون توضیح' }}</h3>\r\n          <p>زمان ثبت: {{ item.report?.created_at }}</p>\r\n          <p>زمان اجرا: {{ item.report?.run_time }}</p>\r\n        </div>\r\n      </section>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { onMounted , onUnmounted , defineProps , watch , computed } from 'vue'\r\n    import { useCartableStore } from '@/stores/cartable'\r\n    import MediaSlider from '@/components/tooles/media/MediaSlider.vue'\r\n    const props = defineProps({\r\n        id: Number\r\n    })\r\n    const store = useCartableStore()\r\n    const item = computed(() => store.getCartableById(props.id))\r\n    onMounted(async () => {\r\n        if (!store.allItems.length) {\r\n            await store.fetchCartables()\r\n        }\r\n        store.startPolling()\r\n    })\r\n    onUnmounted(() => {\r\n        store.stopPolling()\r\n    })\r\n    watch(props.id, async (newId, oldId) => {\r\n        if (newId !== oldId) {\r\n            if (!store.allItems.length) {\r\n                await store.fetchCartables()\r\n            }\r\n        }\r\n    })\r\n</script>\r\n<style scoped>\r\n.cartable-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n}\r\n\r\n.news-section, .report-section {\r\n  border: 1px solid #ccc;\r\n  padding: 1rem;\r\n  border-radius: 12px;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n.avatar {\r\n  width: 48px;\r\n  height: 48px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n}\r\n.news-description {\r\n  margin: 1rem 0;\r\n  font-weight: bold;\r\n}\r\n.news-address {\r\n  font-size: 0.9rem;\r\n  color: #555;\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDI,SAASA,SAAS,EAAGC,WAAyB,EAAGC,KAAK,EAAGC,QAAQ,QAAQ,KAAK;AAC9E,SAASC,gBAAgB,QAAQ,mBAAmB;AACpD,OAAOC,WAAW,MAAM,2CAA2C;;;;;;;IACnE,MAAMC,KAAK,GAAGC,OAEZ;IACF,MAAMC,KAAK,GAAGJ,gBAAgB,CAAC,CAAC;IAChC,MAAMK,IAAI,GAAGN,QAAQ,CAAC,MAAMK,KAAK,CAACE,eAAe,CAACJ,KAAK,CAACK,EAAE,CAAC,CAAC;IAC5DX,SAAS,CAAC,YAAY;MAClB,IAAI,CAACQ,KAAK,CAACI,QAAQ,CAACC,MAAM,EAAE;QACxB,MAAML,KAAK,CAACM,cAAc,CAAC,CAAC;MAChC;MACAN,KAAK,CAACO,YAAY,CAAC,CAAC;IACxB,CAAC,CAAC;IACFd,WAAW,CAAC,MAAM;MACdO,KAAK,CAACQ,WAAW,CAAC,CAAC;IACvB,CAAC,CAAC;IACFd,KAAK,CAACI,KAAK,CAACK,EAAE,EAAE,OAAOM,KAAK,EAAEC,KAAK,KAAK;MACpC,IAAID,KAAK,KAAKC,KAAK,EAAE;QACjB,IAAI,CAACV,KAAK,CAACI,QAAQ,CAACC,MAAM,EAAE;UACxB,MAAML,KAAK,CAACM,cAAc,CAAC,CAAC;QAChC;MACJ;IACJ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}