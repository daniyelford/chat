{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"map-wrapper\"\n};\nimport { onMounted, ref, watch, createApp, h } from 'vue';\nimport MediaSlider from '@/components/tooles/media/MediaSlider.vue';\nimport L from 'leaflet';\nimport 'leaflet-routing-machine';\nimport 'leaflet-routing-machine/dist/leaflet-routing-machine.css';\nimport 'leaflet/dist/leaflet.css';\nimport { BASE_URL, ORS_API_KEY } from '@/config';\nimport PlacePopup from '@/components/tooles/places/PlacePopup.vue';\nimport { nextTick } from 'vue';\nexport default {\n  __name: 'StaticMapWithMarkers',\n  props: {\n    userCenter: {\n      type: Object,\n      required: true\n    },\n    placeCenter: {\n      type: Object,\n      default: null\n    },\n    markers: {\n      type: Array,\n      default: () => []\n    },\n    activePlaceId: {\n      type: [String, Number],\n      default: null\n    }\n  },\n  setup(__props) {\n    const props = __props;\n    const map = ref(null);\n    const markerLayerGroup = ref(null);\n    const leafletMarkers = ref({});\n    const routingControl = ref(null);\n    const markerIcon = L.icon({\n      iconUrl: BASE_URL + '/assets/images/marker.svg',\n      iconSize: [32, 32],\n      iconAnchor: [16, 32]\n    });\n    const truncateText = (text, max = 50) => {\n      if (!text) return '';\n      return text.length > max ? text.slice(0, max) + '...' : text;\n    };\n    const renderMarkers = () => {\n      if (!markerLayerGroup.value) return;\n      leafletMarkers.value = {};\n      markerLayerGroup.value.clearLayers();\n      props.markers.forEach(m => {\n        const leafletMarker = L.marker([m.lat, m.lon], {\n          icon: markerIcon\n        });\n        const container = document.createElement('div');\n        container.style.maxWidth = '250px';\n        // const app = createApp({\n        //   render() {\n        //     return h('div', {style:'direction: rtl;text-align: center;'} , [\n        //       h('h4',{style:'margin-bottom: 5px;display: inline-block;'}, m.title || ''),\n        //       h(MediaSlider, {\n        //         medias: m.medias || []\n        //       }),\n        //       m.categories?.length ? \n        //         h('ul', { style: 'display:flex;justify-content: center;margin: 5px 0; padding: 0; list-style: none;' },\n        //           m.categories.map(c =>\n        //             h('li', {\n        //               style: 'background: #f3f3f3; margin: 2px 0; padding: 3px 5px; border-radius: 4px; font-size: 11px;'\n        //             }, c.title)\n        //           )\n        //         )\n        //         : null ,\n        //       h('p', { style: 'margin: 5px 0;' }, truncateText(m.description) || ''),\n        //       h('small', { style: 'margin: 5px 0;' }, m.address || ''),\n        //     ])\n        //   }\n        // })\n        const app = createApp(PlacePopup, {\n          place: m\n        });\n        app.component('MediaSlider', MediaSlider);\n        app.mount(container);\n        nextTick(() => {\n          leafletMarker.bindPopup(container);\n          leafletMarker.addTo(markerLayerGroup.value);\n        });\n        leafletMarkers.value[m.placeId] = leafletMarker;\n      });\n    };\n    function createORSRouter(apiKey, profile = 'driving-car') {\n      return {\n        route: function (waypoints, callback, context, options) {\n          const coordinates = waypoints.map(wp => [wp.latLng.lng, wp.latLng.lat]);\n          if (!options) {\n            console.log(options);\n          }\n          if (coordinates[0][0] === coordinates[1][0] && coordinates[0][1] === coordinates[1][1]) {\n            alert('شما در محل هستید');\n            console.warn('Route skipped: source and destination are the same.');\n            callback.call(context, null, []);\n            return;\n          }\n          fetch(`https://api.openrouteservice.org/v2/directions/${profile}/geojson`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': apiKey\n            },\n            body: JSON.stringify({\n              coordinates,\n              instructions: false\n            })\n          }).then(res => res.json()).then(data => {\n            const coords = data.features?.[0]?.geometry?.coordinates || [];\n            const latlngs = coords.map(([lng, lat]) => L.latLng(lat, lng));\n            const summary = data.features?.[0]?.properties?.summary || {};\n            const [[startLng, startLat], [endLng, endLat]] = data.metadata?.query?.coordinates || [];\n            const startCoord = {\n              lat: startLat,\n              lon: startLng\n            };\n            const endCoord = {\n              lat: endLat,\n              lon: endLng\n            };\n            const route = {\n              name: '',\n              coordinates: latlngs,\n              instructions: [],\n              summary: {\n                totalDistance: summary.distance ?? 0,\n                totalTime: summary.duration ?? 0\n              },\n              inputWaypoints: [L.Routing.waypoint(L.latLng(startCoord.lat, startCoord.lon)), L.Routing.waypoint(L.latLng(endCoord.lat, endCoord.lon))],\n              waypoints: [L.latLng(startCoord.lat, startCoord.lon), L.latLng(endCoord.lat, endCoord.lon)]\n            };\n            callback.call(context, null, [route]);\n          }).catch(err => {\n            console.error('Routing error', err);\n            callback.call(context, err);\n          });\n        }\n      };\n    }\n    const drawRoute = (from, to) => {\n      if (!map.value || !from || !to) return;\n      if (from.lat === to.lat && from.lon === to.lon) {\n        alert('شما در محل هستید');\n        console.warn('Route not drawn: same coordinates');\n        return;\n      }\n      if (routingControl.value) {\n        map.value.removeControl(routingControl.value);\n      }\n      routingControl.value = L.Routing.control({\n        waypoints: [L.latLng(from.lat, from.lon), L.latLng(to.lat, to.lon)],\n        router: createORSRouter(ORS_API_KEY),\n        routeWhileDragging: false,\n        draggableWaypoints: false,\n        addWaypoints: false,\n        show: false,\n        createMarker: () => null\n      }).addTo(map.value);\n    };\n    onMounted(() => {\n      map.value = L.map('multi-marker-map').setView([props.userCenter.lat, props.userCenter.lon], 13);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; OpenStreetMap contributors'\n      }).addTo(map.value);\n      markerLayerGroup.value = L.layerGroup().addTo(map.value);\n      renderMarkers();\n      if (navigator.geolocation) {\n        navigator.geolocation.watchPosition(position => {\n          const lat = position.coords.latitude;\n          const lon = position.coords.longitude;\n          map.value.setView([lat, lon], 13);\n          if (props.activePlaceId && leafletMarkers.value[props.activePlaceId]) {\n            const marker = leafletMarkers.value[props.activePlaceId];\n            const latlng = marker.getLatLng();\n            drawRoute({\n              lat,\n              lon\n            }, {\n              lat: latlng.lat,\n              lon: latlng.lng\n            });\n          }\n        }, error => console.warn('GPS error', error), {\n          enableHighAccuracy: true,\n          timeout: 5000,\n          maximumAge: 1000\n        });\n      } else {\n        console.warn('Geolocation is not supported');\n      }\n    });\n    watch(() => props.markers, () => {\n      renderMarkers();\n    }, {\n      deep: true\n    });\n    watch(() => props.userCenter, val => {\n      if (val && val.lat && val.lon && map.value) {\n        map.value.flyTo([val.lat, val.lon], 13, {\n          animate: true,\n          duration: 1.2\n        });\n      }\n    }, {\n      immediate: true\n    });\n    watch(() => props.placeCenter, val => {\n      if (val && val.lat && val.lon && map.value) {\n        map.value.flyTo([val.lat, val.lon], 13, {\n          animate: true,\n          duration: 1.2\n        });\n      }\n    }, {\n      immediate: true\n    });\n    watch(() => props.activePlaceId, val => {\n      if (val && leafletMarkers.value[val]) {\n        const marker = leafletMarkers.value[val];\n        const latlng = marker.getLatLng();\n        map.value.flyTo([latlng.lat, latlng.lng], 13, {\n          animate: true,\n          duration: 1.2\n        });\n        marker.openPopup();\n        drawRoute(props.userCenter, {\n          lat: latlng.lat,\n          lon: latlng.lng\n        });\n      }\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, _cache[0] || (_cache[0] = [_createElementVNode(\"div\", {\n        id: \"multi-marker-map\",\n        class: \"map\"\n      }, null, -1)]));\n    };\n  }\n};","map":{"version":3,"names":["onMounted","ref","watch","createApp","h","MediaSlider","L","BASE_URL","ORS_API_KEY","PlacePopup","nextTick","props","__props","map","markerLayerGroup","leafletMarkers","routingControl","markerIcon","icon","iconUrl","iconSize","iconAnchor","truncateText","text","max","length","slice","renderMarkers","value","clearLayers","markers","forEach","m","leafletMarker","marker","lat","lon","container","document","createElement","style","maxWidth","app","place","component","mount","bindPopup","addTo","placeId","createORSRouter","apiKey","profile","route","waypoints","callback","context","options","coordinates","wp","latLng","lng","console","log","alert","warn","call","fetch","method","headers","body","JSON","stringify","instructions","then","res","json","data","coords","features","geometry","latlngs","summary","properties","startLng","startLat","endLng","endLat","metadata","query","startCoord","endCoord","name","totalDistance","distance","totalTime","duration","inputWaypoints","Routing","waypoint","catch","err","error","drawRoute","from","to","removeControl","control","router","routeWhileDragging","draggableWaypoints","addWaypoints","show","createMarker","setView","userCenter","tileLayer","attribution","layerGroup","navigator","geolocation","watchPosition","position","latitude","longitude","activePlaceId","latlng","getLatLng","enableHighAccuracy","timeout","maximumAge","deep","val","flyTo","animate","immediate","placeCenter","openPopup"],"sources":["D:/GitHub/chat/vue3/src/components/tooles/places/StaticMapWithMarkers.vue"],"sourcesContent":["<template>\r\n  <div class=\"map-wrapper\">\r\n    <div id=\"multi-marker-map\" class=\"map\"></div>\r\n  </div>\r\n</template>\r\n<script setup>\r\n  import { onMounted, ref, defineProps, watch, createApp ,h } from 'vue'\r\n  import MediaSlider from '@/components/tooles/media/MediaSlider.vue'\r\n  import L from 'leaflet'\r\n  import 'leaflet-routing-machine'\r\n  import 'leaflet-routing-machine/dist/leaflet-routing-machine.css'\r\n  import 'leaflet/dist/leaflet.css'\r\n  import { BASE_URL,ORS_API_KEY } from '@/config'\r\n  import PlacePopup from '@/components/tooles/places/PlacePopup.vue'\r\n  import { nextTick } from 'vue'\r\n  const props = defineProps({\r\n    userCenter: { type: Object, required: true },\r\n    placeCenter: { type: Object, default: null },\r\n    markers: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    activePlaceId: {\r\n      type: [String, Number],\r\n      default: null\r\n    }\r\n  })\r\n  const map = ref(null)\r\n  const markerLayerGroup = ref(null)\r\n  const leafletMarkers = ref({})\r\n  const routingControl = ref(null)\r\n  const markerIcon = L.icon({\r\n    iconUrl: BASE_URL + '/assets/images/marker.svg',\r\n    iconSize: [32, 32],\r\n    iconAnchor: [16, 32]\r\n  })\r\n  const truncateText = (text, max = 50) => {\r\n    if (!text) return ''\r\n    return text.length > max ? text.slice(0, max) + '...' : text\r\n  }\r\n  const renderMarkers = () => {\r\n    if (!markerLayerGroup.value) return\r\n    leafletMarkers.value = {}\r\n    markerLayerGroup.value.clearLayers()\r\n    props.markers.forEach(m => {\r\n      const leafletMarker = L.marker([m.lat, m.lon], { icon: markerIcon })\r\n      const container = document.createElement('div')\r\n      container.style.maxWidth = '250px'\r\n      // const app = createApp({\r\n      //   render() {\r\n      //     return h('div', {style:'direction: rtl;text-align: center;'} , [\r\n      //       h('h4',{style:'margin-bottom: 5px;display: inline-block;'}, m.title || ''),\r\n      //       h(MediaSlider, {\r\n      //         medias: m.medias || []\r\n      //       }),\r\n      //       m.categories?.length ? \r\n      //         h('ul', { style: 'display:flex;justify-content: center;margin: 5px 0; padding: 0; list-style: none;' },\r\n      //           m.categories.map(c =>\r\n      //             h('li', {\r\n      //               style: 'background: #f3f3f3; margin: 2px 0; padding: 3px 5px; border-radius: 4px; font-size: 11px;'\r\n      //             }, c.title)\r\n      //           )\r\n      //         )\r\n      //         : null ,\r\n      //       h('p', { style: 'margin: 5px 0;' }, truncateText(m.description) || ''),\r\n      //       h('small', { style: 'margin: 5px 0;' }, m.address || ''),\r\n      //     ])\r\n      //   }\r\n      // })\r\n      const app = createApp(PlacePopup, { place: m })\r\n      app.component('MediaSlider', MediaSlider)\r\n      app.mount(container)\r\n      nextTick(() => {\r\n        leafletMarker.bindPopup(container)\r\n        leafletMarker.addTo(markerLayerGroup.value)\r\n      })\r\n      leafletMarkers.value[m.placeId] = leafletMarker\r\n    })\r\n  }\r\n  function createORSRouter(apiKey, profile = 'driving-car') {\r\n    return {\r\n      route: function (waypoints, callback, context, options) {\r\n        const coordinates = waypoints.map(wp => [wp.latLng.lng, wp.latLng.lat])\r\n        if(!options){\r\n          console.log(options);\r\n        }\r\n        if (coordinates[0][0] === coordinates[1][0] && coordinates[0][1] === coordinates[1][1]) {          \r\n          alert('شما در محل هستید')\r\n          console.warn('Route skipped: source and destination are the same.')\r\n          callback.call(context, null, [])\r\n          return\r\n        }\r\n        fetch(`https://api.openrouteservice.org/v2/directions/${profile}/geojson`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': apiKey\r\n          },\r\n          body: JSON.stringify({\r\n            coordinates,\r\n            instructions: false\r\n          })\r\n        })\r\n          .then(res => res.json())\r\n          .then(data => {\r\n            const coords = data.features?.[0]?.geometry?.coordinates || []\r\n            const latlngs = coords.map(([lng, lat]) => L.latLng(lat, lng))\r\n            const summary = data.features?.[0]?.properties?.summary || {}\r\n            const [[startLng, startLat], [endLng, endLat]] = data.metadata?.query?.coordinates || []\r\n            const startCoord = { lat: startLat, lon: startLng }\r\n            const endCoord = { lat: endLat, lon: endLng }\r\n            const route = {\r\n              name: '',\r\n              coordinates: latlngs,\r\n              instructions: [],\r\n              summary: {\r\n                totalDistance: summary.distance ?? 0,\r\n                totalTime: summary.duration ?? 0\r\n              },\r\n              inputWaypoints: [\r\n                L.Routing.waypoint(L.latLng(startCoord.lat, startCoord.lon)),\r\n                L.Routing.waypoint(L.latLng(endCoord.lat, endCoord.lon))\r\n              ],\r\n              waypoints: [\r\n                L.latLng(startCoord.lat, startCoord.lon),\r\n                L.latLng(endCoord.lat, endCoord.lon)\r\n              ]\r\n            }\r\n            callback.call(context, null, [route])\r\n          })\r\n          .catch(err => {\r\n            console.error('Routing error', err)\r\n            callback.call(context, err)\r\n          })\r\n      }\r\n    }\r\n  }\r\n  const drawRoute = (from, to) => {\r\n    if (!map.value || !from || !to) return\r\n    if (from.lat === to.lat && from.lon === to.lon) {\r\n      alert('شما در محل هستید')\r\n      console.warn('Route not drawn: same coordinates')\r\n      return\r\n    }\r\n    if (routingControl.value) {\r\n      map.value.removeControl(routingControl.value)\r\n    }\r\n    routingControl.value = L.Routing.control({\r\n      waypoints: [\r\n        L.latLng(from.lat, from.lon),\r\n        L.latLng(to.lat, to.lon)\r\n      ],\r\n      router: createORSRouter(ORS_API_KEY),\r\n      routeWhileDragging: false,\r\n      draggableWaypoints: false,\r\n      addWaypoints: false,\r\n      show: false,\r\n      createMarker: () => null\r\n    }).addTo(map.value)\r\n  }\r\n  onMounted(() => {\r\n    map.value = L.map('multi-marker-map').setView([props.userCenter.lat, props.userCenter.lon], 13)\r\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution: '&copy; OpenStreetMap contributors',\r\n    }).addTo(map.value)\r\n    markerLayerGroup.value = L.layerGroup().addTo(map.value)\r\n    renderMarkers()\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.watchPosition(\r\n        position => {\r\n          const lat = position.coords.latitude\r\n          const lon = position.coords.longitude\r\n          map.value.setView([lat, lon], 13)\r\n          if (props.activePlaceId && leafletMarkers.value[props.activePlaceId]) {\r\n            const marker = leafletMarkers.value[props.activePlaceId]\r\n            const latlng = marker.getLatLng()\r\n            drawRoute({ lat, lon }, { lat: latlng.lat, lon: latlng.lng })\r\n          }\r\n        },\r\n        error => console.warn('GPS error', error),{\r\n          enableHighAccuracy: true,\r\n          timeout: 5000,\r\n          maximumAge: 1000\r\n        }\r\n      )\r\n    } else {\r\n      console.warn('Geolocation is not supported')\r\n    }\r\n  })\r\n  watch(() => props.markers, () => {\r\n    renderMarkers()\r\n  }, { deep: true })\r\n  watch(() => props.userCenter, (val) => {\r\n    if (val && val.lat && val.lon && map.value) {\r\n      map.value.flyTo([val.lat, val.lon], 13, {\r\n        animate: true,\r\n        duration: 1.2\r\n      })\r\n    }\r\n  }, { immediate: true })\r\n  watch(() => props.placeCenter, (val) => {\r\n    if (val && val.lat && val.lon && map.value) {\r\n      map.value.flyTo([val.lat, val.lon], 13, {\r\n        animate: true,\r\n        duration: 1.2\r\n      })\r\n    }\r\n  }, { immediate: true })\r\n  watch(() => props.activePlaceId, (val) => {\r\n    if (val && leafletMarkers.value[val]) {\r\n      const marker = leafletMarkers.value[val]\r\n      const latlng = marker.getLatLng()\r\n      map.value.flyTo([latlng.lat, latlng.lng], 13, {\r\n        animate: true,\r\n        duration: 1.2\r\n      })\r\n      marker.openPopup()\r\n      drawRoute(props.userCenter, { lat: latlng.lat, lon: latlng.lng })\r\n    }\r\n  })\r\n</script>\r\n<style scoped>\r\n  .map-wrapper {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n  }\r\n  .map {\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 8px;\r\n  }\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}