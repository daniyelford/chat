{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport { ref, onMounted, watch, createApp, nextTick, onUnmounted } from 'vue';\nimport MediaSlider from '@/components/tooles/media/MediaSlider.vue';\nimport PlacePopup from '@/components/tooles/places/PlacePopup.vue';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet-routing-machine';\nimport 'leaflet-routing-machine/dist/leaflet-routing-machine.css';\nimport { BASE_URL, ORS_API_KEY } from '@/config';\nexport default {\n  __name: 'SinglePlaceMap',\n  props: {\n    userCenter: {\n      type: Object,\n      required: true\n    },\n    place: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(__props) {\n    const props = __props;\n    const mapId = `map-${Math.random().toString(36).substring(2, 10)}`;\n    const map = ref(null);\n    const markerRef = ref(null);\n    const routingControl = ref(null);\n    const markerIcon = L.icon({\n      iconUrl: BASE_URL + '/assets/images/marker.svg',\n      iconSize: [32, 32],\n      iconAnchor: [16, 32]\n    });\n    const userMarkerRef = ref(null);\n    const userCircleRef = ref(null);\n    let watchId = null;\n    function startLiveLocation() {\n      if (!(\"geolocation\" in navigator)) {\n        console.warn(\"مرورگر از Geolocation پشتیبانی نمی‌کند.\");\n        return;\n      }\n      navigator.permissions.query({\n        name: \"geolocation\"\n      }).then(result => {\n        if (result.state === \"granted\") {\n          watchId = navigator.geolocation.watchPosition(pos => {\n            const lat = pos.coords.latitude;\n            const lon = pos.coords.longitude;\n            const acc = pos.coords.accuracy;\n            console.log('ok');\n            if (!userMarkerRef.value) {\n              userMarkerRef.value = L.marker([lat, lon], {\n                icon: L.icon({\n                  iconUrl: BASE_URL + \"/assets/images/user-marker.svg\",\n                  iconSize: [24, 24],\n                  iconAnchor: [12, 12]\n                })\n              }).addTo(map.value);\n              userCircleRef.value = L.circle([lat, lon], {\n                radius: acc,\n                color: \"#136aec\",\n                fillColor: \"#136aec\",\n                fillOpacity: 0.2\n              }).addTo(map.value);\n              map.value.setView([lat, lon], 15);\n            } else {\n              userMarkerRef.value.setLatLng([lat, lon]);\n              userCircleRef.value.setLatLng([lat, lon]);\n              userCircleRef.value.setRadius(acc);\n            }\n            console.log('ok');\n            drawRoute({\n              lat,\n              lon\n            }, props.place);\n          }, err => {\n            console.warn(\"Geolocation error:\", err);\n          }, {\n            enableHighAccuracy: true\n          });\n        }\n      });\n    }\n    function createORSRouter(apiKey, profile = 'driving-car') {\n      return {\n        route(waypoints, callback, context) {\n          const coordinates = waypoints.map(wp => {\n            const latlng = wp.latLng || L.latLng(wp.lat, wp.lng);\n            return [latlng.lng, latlng.lat];\n          });\n          if (coordinates.length < 2) {\n            callback.call(context, new Error('مبدا و مقصد مشخص نیستند.'), []);\n            return;\n          }\n          fetch(`https://api.openrouteservice.org/v2/directions/${profile}/geojson`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': apiKey\n            },\n            body: JSON.stringify({\n              coordinates\n            })\n          }).then(res => res.json()).then(data => {\n            const coords = data.features?.[0]?.geometry?.coordinates || [];\n            const summary = data.features?.[0]?.properties?.summary || {};\n            if (!coords.length) {\n              callback.call(context, new Error('مسیر یافت نشد.'), []);\n              return;\n            }\n            const latlngs = coords.map(([lng, lat]) => L.latLng(lat, lng));\n            const inputWaypoints = waypoints.map(wp => L.Routing.waypoint(wp.latLng || L.latLng(wp.lat, wp.lng)));\n            const route = {\n              name: '',\n              instructions: [],\n              coordinates: latlngs,\n              summary: {\n                totalDistance: summary.distance ?? 0,\n                totalTime: summary.duration ?? 0\n              },\n              inputWaypoints,\n              waypoints: inputWaypoints.map(w => w.latLng)\n            };\n            callback.call(context, null, [route]);\n          }).catch(err => {\n            console.error('Routing error:', err);\n            callback.call(context, err);\n          });\n        }\n      };\n    }\n    function drawRoute(from, to) {\n      if (!map.value || !from?.lat || !from?.lon || !to?.lat || !to?.lon) {\n        console.warn('مختصات نامعتبر است.');\n        return;\n      }\n      if (routingControl.value) {\n        map.value.removeControl(routingControl.value);\n      }\n      routingControl.value = L.Routing.control({\n        waypoints: [L.latLng(from.lat, from.lon), L.latLng(to.lat, to.lon)],\n        router: createORSRouter(ORS_API_KEY),\n        addWaypoints: false,\n        draggableWaypoints: false,\n        routeWhileDragging: false,\n        show: false,\n        createMarker: () => null\n      }).addTo(map.value);\n    }\n    function initMap() {\n      if (map.value) return;\n      map.value = L.map(mapId).setView([props.place.lat, props.place.lon], 13);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; OpenStreetMap contributors'\n      }).addTo(map.value);\n      const container = document.createElement('div');\n      container.style.maxWidth = '250px';\n      const app = createApp(PlacePopup, {\n        place: props.place\n      });\n      app.component('MediaSlider', MediaSlider);\n      app.mount(container);\n      markerRef.value = L.marker([props.place.lat, props.place.lon], {\n        icon: markerIcon\n      }).addTo(map.value).bindPopup(container).openPopup();\n      drawRoute(props.userCenter, props.place);\n    }\n    watch(() => props.userCenter, val => {\n      if (map.value && val?.lat && val?.lon) {\n        drawRoute(val, props.place);\n      }\n    }, {\n      immediate: true\n    });\n    watch(() => props.place, val => {\n      if (val?.lat && val?.lon && map.value) {\n        map.value.setView([val.lat, val.lon], 13);\n        if (markerRef.value) {\n          markerRef.value.setLatLng([val.lat, val.lon]);\n        }\n        drawRoute(props.userCenter, val);\n      }\n    }, {\n      immediate: true\n    });\n    onMounted(async () => {\n      await nextTick();\n      const el = document.getElementById(mapId);\n      if (!el) {\n        console.warn('Map container not found:', mapId);\n        return;\n      }\n      initMap();\n      startLiveLocation();\n      onUnmounted(() => {\n        if (watchId !== null) {\n          navigator.geolocation.clearWatch(watchId);\n        }\n      });\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        id: mapId,\n        style: {\n          \"width\": \"100%\",\n          \"height\": \"540px\"\n        }\n      });\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","createApp","nextTick","onUnmounted","MediaSlider","PlacePopup","L","BASE_URL","ORS_API_KEY","props","__props","mapId","Math","random","toString","substring","map","markerRef","routingControl","markerIcon","icon","iconUrl","iconSize","iconAnchor","userMarkerRef","userCircleRef","watchId","startLiveLocation","navigator","console","warn","permissions","query","name","then","result","state","geolocation","watchPosition","pos","lat","coords","latitude","lon","longitude","acc","accuracy","log","value","marker","addTo","circle","radius","color","fillColor","fillOpacity","setView","setLatLng","setRadius","drawRoute","place","err","enableHighAccuracy","createORSRouter","apiKey","profile","route","waypoints","callback","context","coordinates","wp","latlng","latLng","lng","length","call","Error","fetch","method","headers","body","JSON","stringify","res","json","data","features","geometry","summary","properties","latlngs","inputWaypoints","Routing","waypoint","instructions","totalDistance","distance","totalTime","duration","w","catch","error","from","to","removeControl","control","router","addWaypoints","draggableWaypoints","routeWhileDragging","show","createMarker","initMap","tileLayer","attribution","container","document","createElement","style","maxWidth","app","component","mount","bindPopup","openPopup","userCenter","val","immediate","el","getElementById","clearWatch"],"sources":["D:/GitHub/chat/vue3/src/components/tooles/places/SinglePlaceMap.vue"],"sourcesContent":["<script setup>\r\n  import { ref, onMounted, watch, createApp, defineProps, nextTick, onUnmounted } from 'vue'\r\n  import MediaSlider from '@/components/tooles/media/MediaSlider.vue'\r\n  import PlacePopup from '@/components/tooles/places/PlacePopup.vue'\r\n  import L from 'leaflet'\r\n  import 'leaflet/dist/leaflet.css'\r\n  import 'leaflet-routing-machine'\r\n  import 'leaflet-routing-machine/dist/leaflet-routing-machine.css'\r\n  import { BASE_URL, ORS_API_KEY } from '@/config'\r\n  const props = defineProps({\r\n    userCenter: { type: Object, required: true },\r\n    place: { type: Object, required: true }\r\n  })\r\n  const mapId = `map-${Math.random().toString(36).substring(2, 10)}`\r\n  const map = ref(null)\r\n  const markerRef = ref(null)\r\n  const routingControl = ref(null)\r\n  const markerIcon = L.icon({\r\n    iconUrl: BASE_URL + '/assets/images/marker.svg',\r\n    iconSize: [32, 32],\r\n    iconAnchor: [16, 32]\r\n  })\r\n  const userMarkerRef = ref(null)\r\n  const userCircleRef = ref(null)\r\n  let watchId = null\r\n  function startLiveLocation() {\r\n    if (!(\"geolocation\" in navigator)) {\r\n      console.warn(\"مرورگر از Geolocation پشتیبانی نمی‌کند.\")\r\n      return\r\n    }\r\n    navigator.permissions.query({ name: \"geolocation\" }).then((result) => {\r\n      if (result.state === \"granted\") {\r\n        watchId = navigator.geolocation.watchPosition(\r\n          (pos) => {\r\n            const lat = pos.coords.latitude\r\n            const lon = pos.coords.longitude\r\n            const acc = pos.coords.accuracy\r\n            console.log('ok');\r\n            if (!userMarkerRef.value) {\r\n              userMarkerRef.value = L.marker([lat, lon], {\r\n                icon: L.icon({\r\n                  iconUrl: BASE_URL + \"/assets/images/user-marker.svg\",\r\n                  iconSize: [24, 24],\r\n                  iconAnchor: [12, 12]\r\n                })\r\n              }).addTo(map.value)\r\n              userCircleRef.value = L.circle([lat, lon], {\r\n                radius: acc,\r\n                color: \"#136aec\",\r\n                fillColor: \"#136aec\",\r\n                fillOpacity: 0.2\r\n              }).addTo(map.value)\r\n              map.value.setView([lat, lon], 15)\r\n            } else {\r\n              userMarkerRef.value.setLatLng([lat, lon])\r\n              userCircleRef.value.setLatLng([lat, lon])\r\n              userCircleRef.value.setRadius(acc)\r\n            }\r\n            console.log('ok');\r\n            drawRoute({ lat, lon }, props.place)\r\n          },\r\n          (err) => {\r\n            console.warn(\"Geolocation error:\", err)\r\n          },\r\n          { enableHighAccuracy: true }\r\n        )\r\n      }\r\n    })\r\n  }\r\n  function createORSRouter(apiKey, profile = 'driving-car') {\r\n    return {\r\n      route(waypoints, callback, context) {\r\n        const coordinates = waypoints.map(wp => {\r\n          const latlng = wp.latLng || L.latLng(wp.lat, wp.lng)\r\n          return [latlng.lng, latlng.lat]\r\n        })\r\n        if (coordinates.length < 2) {\r\n          callback.call(context, new Error('مبدا و مقصد مشخص نیستند.'), [])\r\n          return\r\n        }\r\n        fetch(`https://api.openrouteservice.org/v2/directions/${profile}/geojson`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': apiKey\r\n          },\r\n          body: JSON.stringify({ coordinates })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          const coords = data.features?.[0]?.geometry?.coordinates || []\r\n          const summary = data.features?.[0]?.properties?.summary || {}\r\n    \r\n          if (!coords.length) {\r\n            callback.call(context, new Error('مسیر یافت نشد.'), [])\r\n            return\r\n          }\r\n          const latlngs = coords.map(([lng, lat]) => L.latLng(lat, lng))\r\n          const inputWaypoints = waypoints.map(wp =>\r\n            L.Routing.waypoint(wp.latLng || L.latLng(wp.lat, wp.lng))\r\n          )\r\n          const route = {\r\n            name: '',\r\n            instructions: [],\r\n            coordinates: latlngs,\r\n            summary: {\r\n              totalDistance: summary.distance??0,\r\n              totalTime: summary.duration??0\r\n            },\r\n            inputWaypoints,\r\n            waypoints: inputWaypoints.map(w => w.latLng)\r\n          }\r\n    \r\n          callback.call(context, null, [route])\r\n        })\r\n        .catch(err => {\r\n          console.error('Routing error:', err)\r\n          callback.call(context, err)\r\n        })\r\n      }\r\n    }\r\n  }\r\n  function drawRoute(from, to) {\r\n    if (!map.value || !from?.lat || !from?.lon || !to?.lat || !to?.lon) {\r\n      console.warn('مختصات نامعتبر است.')\r\n      return\r\n    }\r\n    if (routingControl.value) {\r\n      map.value.removeControl(routingControl.value)\r\n    }\r\n    routingControl.value = L.Routing.control({\r\n      waypoints: [\r\n        L.latLng(from.lat, from.lon),\r\n        L.latLng(to.lat, to.lon)\r\n      ],\r\n      router: createORSRouter(ORS_API_KEY),\r\n      addWaypoints: false,\r\n      draggableWaypoints: false,\r\n      routeWhileDragging: false,\r\n      show: false,\r\n      createMarker: () => null\r\n    }).addTo(map.value)\r\n  }\r\n  function initMap() {\r\n    if (map.value) return\r\n    map.value = L.map(mapId).setView([props.place.lat, props.place.lon], 13)\r\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution: '&copy; OpenStreetMap contributors'\r\n    }).addTo(map.value)\r\n    const container = document.createElement('div')\r\n    container.style.maxWidth = '250px'\r\n    const app = createApp(PlacePopup, { place: props.place })\r\n    app.component('MediaSlider', MediaSlider)\r\n    app.mount(container)\r\n    markerRef.value = L.marker([props.place.lat, props.place.lon], { icon: markerIcon })\r\n      .addTo(map.value)\r\n      .bindPopup(container)\r\n      .openPopup()\r\n    drawRoute(props.userCenter, props.place)\r\n  }\r\n  watch(\r\n    () => props.userCenter,\r\n    val => {\r\n      if (map.value && val?.lat && val?.lon) {\r\n        drawRoute(val, props.place)\r\n      }\r\n    },\r\n    { immediate: true }\r\n  )\r\n  watch(\r\n    () => props.place,\r\n    val => {\r\n      if (val?.lat && val?.lon && map.value) {\r\n        map.value.setView([val.lat, val.lon], 13)\r\n        if (markerRef.value) {\r\n          markerRef.value.setLatLng([val.lat, val.lon])\r\n        }\r\n        drawRoute(props.userCenter, val)\r\n      }\r\n    },\r\n    { immediate: true }\r\n  )\r\n  onMounted(async () => {\r\n    await nextTick()\r\n    const el = document.getElementById(mapId)\r\n    if (!el) {\r\n      console.warn('Map container not found:', mapId)\r\n      return\r\n    }\r\n    initMap()\r\n    startLiveLocation()\r\n    onUnmounted(() => {\r\n      if (watchId !== null) {\r\n        navigator.geolocation.clearWatch(watchId)\r\n      }\r\n    })\r\n  })\r\n</script>\r\n<template>\r\n  <div :id=\"mapId\" style=\"width: 100%; height: 540px;\"></div>\r\n</template>\r\n<style scoped>\r\n  .map-wrapper {\r\n    width: 100%;\r\n    height: 400px;\r\n    position: relative;\r\n  }\r\n  .map {\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 10px;\r\n    z-index: 1;\r\n  }\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}