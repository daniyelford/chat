{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { sendApi } from '@/utils/api';\nexport default {\n  __name: 'RegisterForm',\n  props: {\n    imageId: Number\n  },\n  setup(__props) {\n    const props = __props;\n    const name = ref('');\n    const family = ref('');\n    const message = ref('');\n    const router = useRouter();\n    const submitRegister = async () => {\n      try {\n        const response = await sendApi({\n          action: 'register_user',\n          data: {\n            name: name.value,\n            family: family.value,\n            image_id: props.imageId\n          },\n          control: 'login'\n        });\n        if (response.status === 'success') {\n          localStorage.setItem('isLogin', true);\n          window.dispatchEvent(new Event(\"storage\"));\n          router.push({\n            name: 'dashboard'\n          });\n        } else {\n          message.value = 'مشخصات ناقص است. لطفاً دوباره تلاش کنید.';\n        }\n      } catch (error) {\n        message.value = 'خطا در ثبت‌نام.';\n        console.error(error);\n      }\n    };\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"form\", {\n        onSubmit: _withModifiers(submitRegister, [\"prevent\"])\n      }, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", null, \"تکمیل ثبت‌نام\", -1)), _cache[3] || (_cache[3] = _createElementVNode(\"label\", {\n        for: \"name\"\n      }, \"نام:\", -1)), _withDirectives(_createElementVNode(\"input\", {\n        id: \"name\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => name.value = $event),\n        type: \"text\",\n        required: \"\"\n      }, null, 512), [[_vModelText, name.value]]), _cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n        for: \"family\"\n      }, \"نام خانوادگی:\", -1)), _withDirectives(_createElementVNode(\"input\", {\n        id: \"family\",\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => family.value = $event),\n        type: \"text\",\n        required: \"\"\n      }, null, 512), [[_vModelText, family.value]]), _cache[5] || (_cache[5] = _createElementVNode(\"button\", {\n        type: \"submit\"\n      }, \"ثبت‌نام\", -1)), message.value ? (_openBlock(), _createElementBlock(\"p\", _hoisted_1, _toDisplayString(message.value), 1)) : _createCommentVNode(\"\", true)], 32);\n    };\n  }\n};","map":{"version":3,"names":["ref","useRouter","sendApi","props","__props","name","family","message","router","submitRegister","response","action","data","value","image_id","imageId","control","status","localStorage","setItem","window","dispatchEvent","Event","push","error","console"],"sources":["D:/GitHub/ci3-vue3/vue3/src/components/home/RegisterForm.vue"],"sourcesContent":["<template>\r\n  <form @submit.prevent=\"submitRegister\">\r\n    <h2>تکمیل ثبت‌نام</h2>\r\n\r\n    <label for=\"name\">نام:</label>\r\n    <input id=\"name\" v-model=\"name\" type=\"text\" required />\r\n\r\n    <label for=\"family\">نام خانوادگی:</label>\r\n    <input id=\"family\" v-model=\"family\" type=\"text\" required />\r\n\r\n    <button type=\"submit\">ثبت‌نام</button>\r\n\r\n    <p v-if=\"message\">{{ message }}</p>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref,defineProps } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { sendApi } from '@/utils/api'\r\nconst props = defineProps({\r\n  imageId: Number\r\n});\r\nconst name = ref('')\r\nconst family = ref('')\r\nconst message = ref('')\r\nconst router = useRouter()\r\n\r\nconst submitRegister = async () => {\r\n  try {\r\n    const response = await sendApi(\r\n      {\r\n        action: 'register_user',\r\n        data: {\r\n          name: name.value,\r\n          family: family.value,\r\n          image_id: props.imageId\r\n        },\r\n        control:'login'\r\n      }\r\n    )\r\n    if (response.status === 'success') {\r\n        localStorage.setItem('isLogin', true)\r\n        window.dispatchEvent(new Event(\"storage\"));\r\n        router.push({ name: 'dashboard' })\r\n    } else {\r\n        message.value = 'مشخصات ناقص است. لطفاً دوباره تلاش کنید.'\r\n    }\r\n  } catch (error) {\r\n    message.value = 'خطا در ثبت‌نام.'\r\n    console.error(error)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nform {\r\n  max-width: 300px;\r\n  margin: auto;\r\n}\r\nlabel,\r\ninput,\r\nbutton {\r\n  display: block;\r\n  width: 100%;\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n"],"mappings":";;;;;AAiBA,SAASA,GAAe,QAAQ,KAAK;AACrC,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,OAAO,QAAQ,aAAa;;;;;;;IACrC,MAAMC,KAAK,GAAGC,OAEZ;IACF,MAAMC,IAAI,GAAGL,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMM,MAAM,GAAGN,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMO,OAAO,GAAGP,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMQ,MAAM,GAAGP,SAAS,CAAC,CAAC;IAE1B,MAAMQ,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMR,OAAO,CAC5B;UACES,MAAM,EAAE,eAAe;UACvBC,IAAI,EAAE;YACJP,IAAI,EAAEA,IAAI,CAACQ,KAAK;YAChBP,MAAM,EAAEA,MAAM,CAACO,KAAK;YACpBC,QAAQ,EAAEX,KAAK,CAACY;UAClB,CAAC;UACDC,OAAO,EAAC;QACV,CACF,CAAC;QACD,IAAIN,QAAQ,CAACO,MAAM,KAAK,SAAS,EAAE;UAC/BC,YAAY,CAACC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC;UACrCC,MAAM,CAACC,aAAa,CAAC,IAAIC,KAAK,CAAC,SAAS,CAAC,CAAC;UAC1Cd,MAAM,CAACe,IAAI,CAAC;YAAElB,IAAI,EAAE;UAAY,CAAC,CAAC;QACtC,CAAC,MAAM;UACHE,OAAO,CAACM,KAAK,GAAG,0CAA0C;QAC9D;MACF,CAAC,CAAC,OAAOW,KAAK,EAAE;QACdjB,OAAO,CAACM,KAAK,GAAG,iBAAiB;QACjCY,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}