{"ast":null,"code":"import { ref as u, watch as w, onMounted as _, createElementBlock as i, openBlock as d, createTextVNode as b, toDisplayString as m, Fragment as k, renderList as T, withDirectives as V, normalizeClass as A, vModelText as E, nextTick as r } from \"vue\";\nconst C = {\n    class: \"otp-container\"\n  },\n  O = [\"onUpdate:modelValue\", \"onInput\", \"onKeydown\"],\n  I = {\n    __name: \"OtpInput\",\n    props: {\n      modelValue: {\n        type: String,\n        default: \"\"\n      },\n      length: {\n        type: Number,\n        default: 6\n      }\n    },\n    emits: [\"update:modelValue\"],\n    setup(g, {\n      emit: h\n    }) {\n      const s = u(\"\"),\n        p = u(null),\n        c = g,\n        f = h,\n        o = u(Array.from({\n          length: c.length\n        }, (n, e) => c.modelValue[e] || \"\")),\n        v = n => {\n          const e = {\n            \"۰\": \"0\",\n            \"۱\": \"1\",\n            \"۲\": \"2\",\n            \"۳\": \"3\",\n            \"۴\": \"4\",\n            \"۵\": \"5\",\n            \"۶\": \"6\",\n            \"۷\": \"7\",\n            \"۸\": \"8\",\n            \"۹\": \"9\"\n          };\n          return n.replace(/[۰-۹]/g, t => e[t]);\n        },\n        y = (n, e) => {\n          const t = v(n.target.value).replace(/[^0-9]/g, \"\").charAt(0) || \"\";\n          o.value[e] = t, t && e < o.value.length - 1 && r(() => n.target.parentElement.children[e + 1].focus());\n        },\n        x = (n, e) => {\n          const t = n.currentTarget.parentElement.children;\n          if (n.key === \"Backspace\") {\n            !o.value[e] && e > 0 && r(() => t[e - 1].focus());\n            return;\n          }\n          n.key === \"ArrowLeft\" && e > 0 && r(() => t[e - 1].focus()), n.key === \"ArrowRight\" && e < o.value.length - 1 && r(() => t[e + 1].focus());\n        };\n      return w(o, () => {\n        f(\"update:modelValue\", o.value.join(\"\"));\n      }, {\n        deep: !0\n      }), _(() => {\n        const n = document.createElement(\"style\");\n        if (n.textContent = `\n    .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }\n    .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }\n    .bounce { animation: pulse 0.3s ease-in-out alternate; } \n      @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }\n    `, document.head.appendChild(n), \"OTPCredential\" in window) {\n          const e = new AbortController();\n          navigator.credentials.get({\n            otp: {\n              transport: [\"sms\"]\n            },\n            signal: e.signal\n          }).then(t => {\n            t?.code ? (p.value = t.code, o.value = t.code.split(\"\").slice(0, c.length)) : s.value = \"OTP code not received!\";\n          }).catch(t => {\n            console.warn(\"OTP AutoFill failed:\", t.message), s.value = t.message;\n          });\n        } else console.log(\"WebOTP not supported on this device.\");\n      }), (n, e) => (d(), i(\"div\", C, [b(m(s.value ?? \"\") + \" \" + m(p.value) + \" \", 1), (d(!0), i(k, null, T(o.value, (t, l) => V((d(), i(\"input\", {\n        key: l,\n        type: \"text\",\n        class: A([\"digit-box\", {\n          bounce: t !== \"\"\n        }]),\n        \"onUpdate:modelValue\": a => o.value[l] = a,\n        maxlength: \"1\",\n        onInput: a => y(a, l),\n        onKeydown: a => x(a, l)\n      }, null, 42, O)), [[E, o.value[l]]])), 128))]));\n    }\n  };\nexport { I as default };","map":{"version":3,"names":["ref","u","watch","w","onMounted","_","createElementBlock","i","openBlock","d","createTextVNode","b","toDisplayString","m","Fragment","k","renderList","T","withDirectives","V","normalizeClass","A","vModelText","E","nextTick","r","C","class","O","I","__name","props","modelValue","type","String","default","length","Number","emits","setup","g","emit","h","s","p","c","f","o","Array","from","n","e","v","replace","t","y","target","value","charAt","parentElement","children","focus","x","currentTarget","key","join","deep","document","createElement","textContent","head","appendChild","window","AbortController","navigator","credentials","get","otp","transport","signal","then","code","split","slice","catch","console","warn","message","log","l","bounce","a","maxlength","onInput","onKeydown"],"sources":["D:/GitHub/vue-otp-autofill/dist/index.es.js"],"sourcesContent":["import { ref as u, watch as w, onMounted as _, createElementBlock as i, openBlock as d, createTextVNode as b, toDisplayString as m, Fragment as k, renderList as T, withDirectives as V, normalizeClass as A, vModelText as E, nextTick as r } from \"vue\";\nconst C = { class: \"otp-container\" }, O = [\"onUpdate:modelValue\", \"onInput\", \"onKeydown\"], I = {\n  __name: \"OtpInput\",\n  props: {\n    modelValue: { type: String, default: \"\" },\n    length: { type: Number, default: 6 }\n  },\n  emits: [\"update:modelValue\"],\n  setup(g, { emit: h }) {\n    const s = u(\"\"), p = u(null), c = g, f = h, o = u(Array.from({ length: c.length }, (n, e) => c.modelValue[e] || \"\")), v = (n) => {\n      const e = { \"۰\": \"0\", \"۱\": \"1\", \"۲\": \"2\", \"۳\": \"3\", \"۴\": \"4\", \"۵\": \"5\", \"۶\": \"6\", \"۷\": \"7\", \"۸\": \"8\", \"۹\": \"9\" };\n      return n.replace(/[۰-۹]/g, (t) => e[t]);\n    }, y = (n, e) => {\n      const t = v(n.target.value).replace(/[^0-9]/g, \"\").charAt(0) || \"\";\n      o.value[e] = t, t && e < o.value.length - 1 && r(() => n.target.parentElement.children[e + 1].focus());\n    }, x = (n, e) => {\n      const t = n.currentTarget.parentElement.children;\n      if (n.key === \"Backspace\") {\n        !o.value[e] && e > 0 && r(() => t[e - 1].focus());\n        return;\n      }\n      n.key === \"ArrowLeft\" && e > 0 && r(() => t[e - 1].focus()), n.key === \"ArrowRight\" && e < o.value.length - 1 && r(() => t[e + 1].focus());\n    };\n    return w(o, () => {\n      f(\"update:modelValue\", o.value.join(\"\"));\n    }, { deep: !0 }), _(() => {\n      const n = document.createElement(\"style\");\n      if (n.textContent = `\n    .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }\n    .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }\n    .bounce { animation: pulse 0.3s ease-in-out alternate; } \n      @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }\n    `, document.head.appendChild(n), \"OTPCredential\" in window) {\n        const e = new AbortController();\n        navigator.credentials.get({\n          otp: { transport: [\"sms\"] },\n          signal: e.signal\n        }).then((t) => {\n          t?.code ? (p.value = t.code, o.value = t.code.split(\"\").slice(0, c.length)) : s.value = \"OTP code not received!\";\n        }).catch((t) => {\n          console.warn(\"OTP AutoFill failed:\", t.message), s.value = t.message;\n        });\n      } else\n        console.log(\"WebOTP not supported on this device.\");\n    }), (n, e) => (d(), i(\"div\", C, [\n      b(m(s.value ?? \"\") + \" \" + m(p.value) + \" \", 1),\n      (d(!0), i(k, null, T(o.value, (t, l) => V((d(), i(\"input\", {\n        key: l,\n        type: \"text\",\n        class: A([\"digit-box\", { bounce: t !== \"\" }]),\n        \"onUpdate:modelValue\": (a) => o.value[l] = a,\n        maxlength: \"1\",\n        onInput: (a) => y(a, l),\n        onKeydown: (a) => x(a, l)\n      }, null, 42, O)), [\n        [E, o.value[l]]\n      ])), 128))\n    ]));\n  }\n};\nexport {\n  I as default\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}