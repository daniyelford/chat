{"ast":null,"code":"import { defineStore } from 'pinia';\nimport { sendApi } from '@/utils/api';\nexport const useUserStore = defineStore('user', {\n  state: () => ({\n    fullName: '',\n    name: '',\n    family: '',\n    mobile: '',\n    wallet: 0,\n    tokenScore: 0,\n    image: '',\n    finger: false,\n    rule: false,\n    hasMore: false,\n    isLoaded: false,\n    ruleInfo: [],\n    users: [],\n    loading: false,\n    error: null,\n    allCategories: [],\n    allRules: []\n  }),\n  actions: {\n    async fetchUserInfo() {\n      try {\n        const res = await sendApi({\n          action: 'get_user_info',\n          control: 'user'\n        });\n        if (res.status === 'success') {\n          this.fullName = res.fullName;\n          this.name = res.name;\n          this.family = res.family;\n          this.mobile = res.mobile;\n          this.wallet = res.wallet;\n          this.image = res.image;\n          this.finger = res.finger;\n          this.tokenScore = res.token_score;\n          this.rule = Array.isArray(res.rules) && res.rules.length > 0;\n          this.ruleInfo = res.rules;\n          this.isLoaded = true;\n        } else {\n          console.warn('User info error:', res);\n        }\n      } catch (err) {\n        console.error('Error fetching user:', err);\n      }\n    },\n    async fetchUsers({\n      limite = 10,\n      offset = 0\n    }) {\n      this.loading = true;\n      this.error = null;\n      try {\n        const res = await sendApi({\n          action: 'get_users',\n          control: 'user',\n          data: {\n            limite,\n            offset\n          }\n        });\n        if (res.status === 'success') {\n          this.hasMore = res.has_more;\n          this.users = res.data;\n          this.allCategories = res.all_category;\n          this.allRules = res.all_rule;\n        } else {\n          this.error = res.message || 'خطا در دریافت کاربران';\n        }\n      } catch (err) {\n        this.error = 'خطای ارتباط با سرور';\n        console.error(err);\n      } finally {\n        this.loading = false;\n      }\n    },\n    async submitUser(userData, edit = null) {\n      try {\n        const res = await sendApi({\n          action: 'user_submit',\n          control: 'user',\n          data: {\n            data: userData,\n            edit: edit\n          }\n        });\n        return res;\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    async enableUser(id) {\n      try {\n        const res = await sendApi({\n          action: 'enable_user',\n          control: 'user',\n          data: {\n            id\n          }\n        });\n        if (res.status === 'success') {\n          return true;\n        }\n        return false;\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    async disableUser(id) {\n      try {\n        const res = await sendApi({\n          action: 'disable_user',\n          control: 'user',\n          data: {\n            id\n          }\n        });\n        if (res.status === 'success') {\n          return true;\n        }\n        return false;\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  }\n});","map":{"version":3,"names":["defineStore","sendApi","useUserStore","state","fullName","name","family","mobile","wallet","tokenScore","image","finger","rule","hasMore","isLoaded","ruleInfo","users","loading","error","allCategories","allRules","actions","fetchUserInfo","res","action","control","status","token_score","Array","isArray","rules","length","console","warn","err","fetchUsers","limite","offset","data","has_more","all_category","all_rule","message","submitUser","userData","edit","enableUser","id","disableUser"],"sources":["D:/GitHub/chat/vue3/src/stores/user.js"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { sendApi } from '@/utils/api'\r\n\r\nexport const useUserStore = defineStore('user', {\r\n  state: () => ({\r\n    fullName: '',\r\n    name: '',\r\n    family: '',\r\n    mobile: '',\r\n    wallet: 0,\r\n    tokenScore: 0,\r\n    image: '',\r\n    finger: false,\r\n    rule: false,\r\n    hasMore: false,\r\n    isLoaded: false,\r\n    ruleInfo: [],\r\n    users: [],\r\n    loading: false,\r\n    error: null,\r\n    allCategories: [],\r\n    allRules: []\r\n  }),\r\n\r\n  actions: {\r\n    async fetchUserInfo() {\r\n      try {\r\n        const res = await sendApi({ action: 'get_user_info', control: 'user' })\r\n        if (res.status === 'success') {\r\n          this.fullName = res.fullName\r\n          this.name = res.name\r\n          this.family = res.family\r\n          this.mobile = res.mobile\r\n          this.wallet = res.wallet\r\n          this.image = res.image\r\n          this.finger = res.finger\r\n          this.tokenScore = res.token_score\r\n          this.rule = Array.isArray(res.rules) && res.rules.length > 0\r\n          this.ruleInfo = res.rules\r\n          this.isLoaded = true\r\n        } else {\r\n          console.warn('User info error:', res)\r\n        }\r\n      } catch (err) {\r\n        console.error('Error fetching user:', err)\r\n      }\r\n    },\r\n\r\n    async fetchUsers({ limite = 10, offset = 0 }) {\r\n      this.loading = true\r\n      this.error = null\r\n      try {\r\n        const res = await sendApi({\r\n          action: 'get_users',\r\n          control: 'user',\r\n          data: { limite, offset }\r\n        })\r\n        if (res.status === 'success') {\r\n          this.hasMore = res.has_more\r\n          this.users = res.data\r\n          this.allCategories = res.all_category\r\n          this.allRules = res.all_rule\r\n        } else {\r\n          this.error = res.message || 'خطا در دریافت کاربران'\r\n        }\r\n      } catch (err) {\r\n        this.error = 'خطای ارتباط با سرور'\r\n        console.error(err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async submitUser(userData, edit = null) {\r\n      try {\r\n        const res = await sendApi({\r\n          action: 'user_submit',\r\n          control: 'user',\r\n          data: { data: userData, edit: edit }\r\n        })\r\n        return res\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    },\r\n\r\n    async enableUser(id) {\r\n      try {\r\n        const res = await sendApi({\r\n          action: 'enable_user',\r\n          control: 'user',\r\n          data: { id }\r\n        })\r\n        if (res.status === 'success') {\r\n          return true\r\n        }\r\n        return false\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    },\r\n    async disableUser(id) {\r\n      try {\r\n        const res = await sendApi({\r\n          action: 'disable_user',\r\n          control: 'user',\r\n          data: { id }\r\n        })\r\n        if (res.status === 'success') {\r\n          return true\r\n        }\r\n        return false\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    },\r\n  }\r\n})\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}