{"ast":null,"code":"import { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nimport { ref, watch, onMounted } from 'vue';\nimport PhoneForm from '@/components/home/PhoneLogin/PhoneForm.vue';\nimport SmsLoginForm from '@/components/home/PhoneLogin/SmsLoginForm.vue';\nexport default {\n  __name: 'PhoneLogin',\n  emits: ['validPhone'],\n  setup(__props, {\n    emit: __emit\n  }) {\n    const step = ref(1);\n    const phone = ref('');\n    const emit = __emit;\n    onMounted(() => {\n      const savedStep = sessionStorage.getItem('login_step');\n      const savedPhone = sessionStorage.getItem('phone');\n      if (savedStep) step.value = parseInt(savedStep);\n      if (savedPhone) {\n        phone.value = savedPhone;\n      } else {\n        step.value = 1;\n      }\n    });\n    watch(step, val => sessionStorage.setItem('login_step', val));\n    watch(phone, val => sessionStorage.setItem('phone', val));\n    const goStep2 = val => {\n      if (val) {\n        phone.value = val;\n        step.value = 2;\n      } else {\n        step.value = 1;\n      }\n    };\n    const validPhoneNumber = val => {\n      emit('validPhone', val);\n    };\n    return (_ctx, _cache) => {\n      return step.value === 1 ? (_openBlock(), _createBlock(PhoneForm, {\n        key: 0,\n        onSuccess: goStep2,\n        onValid: validPhoneNumber\n      })) : step.value === 2 ? (_openBlock(), _createBlock(SmsLoginForm, {\n        key: 1,\n        phone: phone.value,\n        onBack: _cache[0] || (_cache[0] = $event => step.value = 1)\n      }, null, 8, [\"phone\"])) : _createCommentVNode(\"\", true);\n    };\n  }\n};","map":{"version":3,"names":["ref","watch","onMounted","PhoneForm","SmsLoginForm","step","phone","emit","__emit","savedStep","sessionStorage","getItem","savedPhone","value","parseInt","val","setItem","goStep2","validPhoneNumber"],"sources":["D:/GitHub/chat/vue3/src/components/home/PhoneLogin.vue"],"sourcesContent":["<template>\r\n    <PhoneForm v-if=\" step === 1\" @success=\"goStep2\" @valid=\"validPhoneNumber\"/>\r\n    <SmsLoginForm v-else-if=\" step === 2\" :phone=\"phone\" @back=\"step = 1\"/>\r\n</template>\r\n<script setup>\r\n  import { ref,watch,onMounted,defineEmits } from 'vue'\r\n  import PhoneForm from '@/components/home/PhoneLogin/PhoneForm.vue'\r\n  import SmsLoginForm from '@/components/home/PhoneLogin/SmsLoginForm.vue'\r\n  const step=ref(1)\r\n  const phone=ref('')\r\n  const emit = defineEmits(['validPhone'])\r\n  onMounted(() => {\r\n    const savedStep = sessionStorage.getItem('login_step')\r\n    const savedPhone = sessionStorage.getItem('phone')\r\n    if (savedStep) step.value = parseInt(savedStep)\r\n    if (savedPhone) {phone.value = savedPhone }else{ step.value =1}\r\n  })\r\n  watch(step, val => sessionStorage.setItem('login_step', val))\r\n  watch(phone, val => sessionStorage.setItem('phone', val))\r\n  const goStep2=(val)=>{\r\n    if(val){\r\n      phone.value=val\r\n      step.value=2\r\n    }else{\r\n      step.value=1\r\n    }\r\n  }\r\n  const validPhoneNumber=(val)=>{\r\n    emit('validPhone', val)\r\n  }\r\n</script>"],"mappings":";AAKE,SAASA,GAAG,EAACC,KAAK,EAACC,SAAqB,QAAQ,KAAK;AACrD,OAAOC,SAAS,MAAM,4CAA4C;AAClE,OAAOC,YAAY,MAAM,+CAA+C;;;;;;;IACxE,MAAMC,IAAI,GAACL,GAAG,CAAC,CAAC,CAAC;IACjB,MAAMM,KAAK,GAACN,GAAG,CAAC,EAAE,CAAC;IACnB,MAAMO,IAAI,GAAGC,MAA2B;IACxCN,SAAS,CAAC,MAAM;MACd,MAAMO,SAAS,GAAGC,cAAc,CAACC,OAAO,CAAC,YAAY,CAAC;MACtD,MAAMC,UAAU,GAAGF,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;MAClD,IAAIF,SAAS,EAAEJ,IAAI,CAACQ,KAAK,GAAGC,QAAQ,CAACL,SAAS,CAAC;MAC/C,IAAIG,UAAU,EAAE;QAACN,KAAK,CAACO,KAAK,GAAGD,UAAU;MAAC,CAAC,MAAI;QAAEP,IAAI,CAACQ,KAAK,GAAE,CAAC;MAAA;IAChE,CAAC,CAAC;IACFZ,KAAK,CAACI,IAAI,EAAEU,GAAG,IAAIL,cAAc,CAACM,OAAO,CAAC,YAAY,EAAED,GAAG,CAAC,CAAC;IAC7Dd,KAAK,CAACK,KAAK,EAAES,GAAG,IAAIL,cAAc,CAACM,OAAO,CAAC,OAAO,EAAED,GAAG,CAAC,CAAC;IACzD,MAAME,OAAO,GAAEF,GAAG,IAAG;MACnB,IAAGA,GAAG,EAAC;QACLT,KAAK,CAACO,KAAK,GAACE,GAAG;QACfV,IAAI,CAACQ,KAAK,GAAC,CAAC;MACd,CAAC,MAAI;QACHR,IAAI,CAACQ,KAAK,GAAC,CAAC;MACd;IACF,CAAC;IACD,MAAMK,gBAAgB,GAAEH,GAAG,IAAG;MAC5BR,IAAI,CAAC,YAAY,EAAEQ,GAAG,CAAC;IACzB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}