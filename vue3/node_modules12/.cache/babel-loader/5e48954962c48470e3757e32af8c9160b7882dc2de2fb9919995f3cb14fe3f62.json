{"ast":null,"code":"import { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createBlock as _createBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"cartable-inner\"\n};\nconst _hoisted_3 = {\n  class: \"user-info\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  key: 1,\n  class: \"user-avatar\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"#000000\",\n  viewBox: \"0 0 24 24\"\n};\nconst _hoisted_6 = [\"href\"];\nconst _hoisted_7 = {\n  class: \"news-description\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"address\"\n};\nconst _hoisted_9 = {\n  class: \"report-list\"\n};\nconst _hoisted_10 = {\n  class: \"user-info\"\n};\nconst _hoisted_11 = [\"src\"];\nconst _hoisted_12 = {\n  key: 1,\n  class: \"user-avatar\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"#000000\",\n  viewBox: \"0 0 24 24\"\n};\nconst _hoisted_13 = [\"href\"];\nconst _hoisted_14 = {\n  key: 2,\n  class: \"no-data\"\n};\nimport { computed } from 'vue';\nimport { useCartableStore } from '@/stores/cartable';\nimport { usePollingWithCompare } from '@/composables/usePollingWithCompare';\nimport { useInfiniteScroll } from '@/composables/useInfiniteScroll';\nimport MediaSlider from '@/components/tooles/media/MediaSlider.vue';\nexport default {\n  __name: 'AllCartables',\n  setup(__props) {\n    const store = useCartableStore();\n    const {\n      items,\n      canLoadMore,\n      loadMoreTrigger,\n      setupObserver\n    } = useInfiniteScroll(async ({\n      limit,\n      offset\n    }) => {\n      if (!store.allItems.length) await store.fetchCartables();\n      return store.allItems.slice(offset, offset + limit);\n    }, {\n      limit: 5,\n      total: computed(() => store.allItems.length)\n    });\n    setupObserver();\n    usePollingWithCompare(store.fetchCartables, {\n      intervalMs: 10000,\n      runOnStart: true,\n      isDifferent: (oldList, newList) => {\n        return JSON.stringify(store.simplifyNews(oldList)) !== JSON.stringify(store.simplifyNews(newList));\n      },\n      onChange: newData => {\n        store.allItems = newData;\n      }\n    });\n    return (_ctx, _cache) => {\n      const _component_RouterLink = _resolveComponent(\"RouterLink\");\n      return _unref(store).loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...\")) : _unref(items).length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(items), item => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: item.id,\n          class: \"cartable\"\n        }, [_createElementVNode(\"div\", _hoisted_3, [item.news.news_user_image_url ? (_openBlock(), _createElementBlock(\"img\", {\n          key: 0,\n          src: item.news.news_user_image_url,\n          class: \"user-avatar\"\n        }, null, 8, _hoisted_4)) : (_openBlock(), _createElementBlock(\"svg\", _hoisted_5, _cache[0] || (_cache[0] = [_createElementVNode(\"path\", {\n          d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z\"\n        }, null, -1)]))), _createElementVNode(\"strong\", null, _toDisplayString(item.news.news_user_name) + \" \" + _toDisplayString(item.news.news_user_family), 1), item.news.news_user_phone ? (_openBlock(), _createElementBlock(\"a\", {\n          key: 2,\n          href: `tel:${item.news.news_user_phone}`\n        }, \"ðŸ“ž\", 8, _hoisted_6)) : _createCommentVNode(\"\", true)]), item.news.media.length ? (_openBlock(), _createBlock(MediaSlider, {\n          key: 0,\n          medias: item.news.media\n        }, null, 8, [\"medias\"])) : _createCommentVNode(\"\", true), _createElementVNode(\"p\", _hoisted_7, _toDisplayString(item.news.description), 1), item.news.address?.address ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, \" Ù…ÙˆÙ‚Ø¹ÛŒØª: \" + _toDisplayString(item.news.address.address), 1)) : _createCommentVNode(\"\", true), item.id ? (_openBlock(), _createBlock(_component_RouterLink, {\n          key: 2,\n          class: \"send\",\n          to: {\n            path: `/show-news/${item.id}`\n          }\n        }, {\n          default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\" Ù…Ø´Ø§Ù‡Ø¯Ù‡ \")])),\n          _: 2,\n          __: [1]\n        }, 1032, [\"to\"])) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_9, [_cache[4] || (_cache[4] = _createElementVNode(\"h3\", null, \"Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§:\", -1)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.reports, report => {\n          return _openBlock(), _createElementBlock(\"div\", {\n            key: report.id,\n            class: \"report-item\"\n          }, [_createElementVNode(\"div\", _hoisted_10, [report.user.image ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 0,\n            src: report.user.image,\n            class: \"user-avatar\"\n          }, null, 8, _hoisted_11)) : (_openBlock(), _createElementBlock(\"svg\", _hoisted_12, _cache[2] || (_cache[2] = [_createElementVNode(\"path\", {\n            d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z\"\n          }, null, -1)]))), _createElementVNode(\"strong\", null, _toDisplayString(report.user.name) + \" \" + _toDisplayString(report.user.family), 1), report.user.phone ? (_openBlock(), _createElementBlock(\"a\", {\n            key: 2,\n            href: `tel:${report.user.phone}`\n          }, \"ðŸ“ž\", 8, _hoisted_13)) : _createCommentVNode(\"\", true)]), report.media.length ? (_openBlock(), _createBlock(MediaSlider, {\n            key: 0,\n            medias: report.media\n          }, null, 8, [\"medias\"])) : _createCommentVNode(\"\", true), _createElementVNode(\"p\", null, _toDisplayString(report.description || 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ ...'), 1), report.id ? (_openBlock(), _createBlock(_component_RouterLink, {\n            key: 1,\n            class: \"send\",\n            to: {\n              path: `/show-cartable/${report.id}`\n            }\n          }, {\n            default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\" Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú¯Ø²Ø§Ø±Ø´ \")])),\n            _: 2,\n            __: [3]\n          }, 1032, [\"to\"])) : _createCommentVNode(\"\", true)]);\n        }), 128))])]);\n      }), 128)), _unref(canLoadMore) ? (_openBlock(), _createElementBlock(\"div\", {\n        key: 0,\n        ref_key: \"loadMoreTrigger\",\n        ref: loadMoreTrigger,\n        class: \"load-trigger\"\n      }, \" Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÙˆØ§Ø±Ø¯ Ø¨ÛŒØ´ØªØ±... \", 512)) : _createCommentVNode(\"\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_14, \" Ø´Ù…Ø§ Ù‡ÛŒÚ† Ú¯Ø²Ø§Ø±Ø´ÛŒ Ø¯Ø± Ú©Ø§Ø±ØªØ§Ø¨Ù„ Ø®ÙˆØ¯ Ù†Ø¯Ø§Ø±ÛŒØ¯ \"));\n    };\n  }\n};","map":{"version":3,"names":["computed","useCartableStore","usePollingWithCompare","useInfiniteScroll","MediaSlider","store","items","canLoadMore","loadMoreTrigger","setupObserver","limit","offset","allItems","length","fetchCartables","slice","total","intervalMs","runOnStart","isDifferent","oldList","newList","JSON","stringify","simplifyNews","onChange","newData"],"sources":["D:/GitHub/chat/vue3/src/components/dashboard/pagesContent/AllCartables.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"store.loading\" class=\"loading\">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>\r\n  <div v-else-if=\"items.length\" class=\"cartable-inner\">\r\n    <div\r\n      v-for=\"item in items\" :key=\"item.id\" class=\"cartable\">\r\n      <div class=\"user-info\">\r\n        <img v-if=\"item.news.news_user_image_url\" :src=\"item.news.news_user_image_url\" class=\"user-avatar\" />\r\n        <svg v-else class=\"user-avatar\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" viewBox=\"0 0 24 24\">\r\n          <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z\" />\r\n        </svg>\r\n        <strong>{{ item.news.news_user_name }} {{ item.news.news_user_family }}</strong>\r\n        <a v-if=\"item.news.news_user_phone\" :href=\"`tel:${item.news.news_user_phone}`\">ðŸ“ž</a>\r\n      </div>\r\n      <MediaSlider v-if=\"item.news.media.length\" :medias=\"item.news.media\" />\r\n      <p class=\"news-description\">{{ item.news.description }}</p>\r\n      <div class=\"address\" v-if=\"item.news.address?.address\">\r\n        Ù…ÙˆÙ‚Ø¹ÛŒØª: {{ item.news.address.address }}\r\n      </div>\r\n      <RouterLink class=\"send\" v-if=\"item.id\" :to=\"{ path: `/show-news/${item.id}` }\">\r\n        Ù…Ø´Ø§Ù‡Ø¯Ù‡\r\n      </RouterLink>\r\n      <div class=\"report-list\">\r\n        <h3>Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§:</h3>\r\n        <div v-for=\"report in item.reports\" :key=\"report.id\" class=\"report-item\">\r\n          <div class=\"user-info\">\r\n            <img v-if=\"report.user.image\" :src=\"report.user.image\" class=\"user-avatar\" />\r\n            <svg v-else class=\"user-avatar\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" viewBox=\"0 0 24 24\">\r\n              <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z\" />\r\n            </svg>\r\n            <strong>{{ report.user.name }} {{ report.user.family }}</strong>\r\n            <a v-if=\"report.user.phone\" :href=\"`tel:${report.user.phone}`\">ðŸ“ž</a>\r\n          </div>\r\n          <MediaSlider v-if=\"report.media.length\" :medias=\"report.media\" />\r\n          <p>{{ report.description || 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ ...' }}</p>\r\n          <RouterLink class=\"send\" v-if=\"report.id\" :to=\"{ path: `/show-cartable/${report.id}` }\">\r\n            Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú¯Ø²Ø§Ø±Ø´\r\n          </RouterLink>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"canLoadMore\" ref=\"loadMoreTrigger\" class=\"load-trigger\">\r\n      Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÙˆØ§Ø±Ø¯ Ø¨ÛŒØ´ØªØ±...\r\n    </div>\r\n  </div>\r\n  <div v-else class=\"no-data\">\r\n    Ø´Ù…Ø§ Ù‡ÛŒÚ† Ú¯Ø²Ø§Ø±Ø´ÛŒ Ø¯Ø± Ú©Ø§Ø±ØªØ§Ø¨Ù„ Ø®ÙˆØ¯ Ù†Ø¯Ø§Ø±ÛŒØ¯\r\n  </div>\r\n</template>\r\n<script setup>\r\n  import {  computed } from 'vue'\r\n  import { useCartableStore } from '@/stores/cartable'\r\n  import { usePollingWithCompare } from '@/composables/usePollingWithCompare'\r\n  import { useInfiniteScroll } from '@/composables/useInfiniteScroll'\r\n  import MediaSlider from '@/components/tooles/media/MediaSlider.vue'\r\n  const store = useCartableStore()\r\n  const {\r\n    items,\r\n    canLoadMore,\r\n    loadMoreTrigger,\r\n    setupObserver\r\n  } = useInfiniteScroll(async ({ limit, offset }) => {\r\n    if (!store.allItems.length) await store.fetchCartables()\r\n    return store.allItems.slice(offset, offset + limit)\r\n  }, {\r\n    limit: 5,\r\n    total: computed(() => store.allItems.length)\r\n  })\r\n  setupObserver()\r\n  usePollingWithCompare(store.fetchCartables, {\r\n    intervalMs: 10000,\r\n    runOnStart: true,\r\n    isDifferent: (oldList, newList) => {\r\n      return JSON.stringify(store.simplifyNews(oldList)) !== JSON.stringify(store.simplifyNews(newList))\r\n    },\r\n    onChange: (newData) => {\r\n      store.allItems = newData\r\n    }\r\n  })\r\n</script>\r\n<style scoped>\r\n  .loading {\r\n    font-size: 1.1rem;\r\n    padding: 2rem;\r\n    text-align: center;\r\n    color: #555;\r\n  }\r\n  .no-data{\r\n    padding: 20px;\r\n    text-align: center;\r\n    background: #9a0000;\r\n    border-radius: 10px;\r\n    box-shadow: 0 0 10px grey;\r\n    color: white;\r\n    font-size: larger;\r\n    font-weight: bold;\r\n  }\r\n  .cartable-inner {\r\n    direction: rtl;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 1.5rem;\r\n  }\r\n  .cartable {\r\n    background-color: #ffffff;\r\n    padding: 1rem 1.2rem;\r\n    border-radius: 10px;\r\n    box-shadow: 0 1px 6px rgba(0, 0, 0, 0.1);\r\n  }\r\n  .user-info {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 0.5rem;\r\n  }\r\n  .user-info div {\r\n    display: flex;\r\n    gap: 0.75rem;\r\n    align-items: center;\r\n  }\r\n  .user-avatar {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n    object-fit: cover;\r\n    border: 2px solid #ccc;\r\n  }\r\n  .user-info svg {\r\n    width: 20px;\r\n    height: 20px;\r\n  }\r\n  .user-info strong {\r\n    font-weight: bold;\r\n    font-size: 1rem;\r\n    color: #333;\r\n  }\r\n  .user-info small {\r\n    color: #666;\r\n    font-size: 0.9rem;\r\n  }\r\n  .news-description {\r\n    font-size: 1rem;\r\n    margin: 0.5rem 0;\r\n    color: #444;\r\n  }\r\n  .address {\r\n    font-size: 0.9rem;\r\n    color: #555;\r\n    margin-bottom: 0.5rem;\r\n    word-break: break-all;\r\n  }\r\n  button {\r\n    display: block;\r\n    margin: 1rem auto 0;\r\n    background-color: #007bff;\r\n    color: #fff;\r\n    border: none;\r\n    padding: 0.6rem 1.4rem;\r\n    font-size: 0.95rem;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    transition: background 0.3s ease;\r\n  }\r\n  button:hover {\r\n    background-color: #0056b3;\r\n  }\r\n  .send {\r\n    display: inline-block;\r\n    width: 100%;\r\n    margin-top: .5rem;\r\n    padding: 10px;\r\n    text-decoration: none;\r\n    background: #007bff;\r\n    font-weight: 500;\r\n    border-radius: 10px;\r\n    text-align: center;\r\n    color: white;\r\n  }\r\n  .send:hover {\r\n    opacity: 0.6;\r\n  }\r\n  .report-item {\r\n    margin-top: 15px;\r\n  }\r\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDE,SAAUA,QAAQ,QAAQ,KAAK;AAC/B,SAASC,gBAAgB,QAAQ,mBAAmB;AACpD,SAASC,qBAAqB,QAAQ,qCAAqC;AAC3E,SAASC,iBAAiB,QAAQ,iCAAiC;AACnE,OAAOC,WAAW,MAAM,2CAA2C;;;;IACnE,MAAMC,KAAK,GAAGJ,gBAAgB,CAAC,CAAC;IAChC,MAAM;MACJK,KAAK;MACLC,WAAW;MACXC,eAAe;MACfC;IACF,CAAC,GAAGN,iBAAiB,CAAC,OAAO;MAAEO,KAAK;MAAEC;IAAO,CAAC,KAAK;MACjD,IAAI,CAACN,KAAK,CAACO,QAAQ,CAACC,MAAM,EAAE,MAAMR,KAAK,CAACS,cAAc,CAAC,CAAC;MACxD,OAAOT,KAAK,CAACO,QAAQ,CAACG,KAAK,CAACJ,MAAM,EAAEA,MAAM,GAAGD,KAAK,CAAC;IACrD,CAAC,EAAE;MACDA,KAAK,EAAE,CAAC;MACRM,KAAK,EAAEhB,QAAQ,CAAC,MAAMK,KAAK,CAACO,QAAQ,CAACC,MAAM;IAC7C,CAAC,CAAC;IACFJ,aAAa,CAAC,CAAC;IACfP,qBAAqB,CAACG,KAAK,CAACS,cAAc,EAAE;MAC1CG,UAAU,EAAE,KAAK;MACjBC,UAAU,EAAE,IAAI;MAChBC,WAAW,EAAEA,CAACC,OAAO,EAAEC,OAAO,KAAK;QACjC,OAAOC,IAAI,CAACC,SAAS,CAAClB,KAAK,CAACmB,YAAY,CAACJ,OAAO,CAAC,CAAC,KAAKE,IAAI,CAACC,SAAS,CAAClB,KAAK,CAACmB,YAAY,CAACH,OAAO,CAAC,CAAC;MACpG,CAAC;MACDI,QAAQ,EAAGC,OAAO,IAAK;QACrBrB,KAAK,CAACO,QAAQ,GAAGc,OAAO;MAC1B;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}