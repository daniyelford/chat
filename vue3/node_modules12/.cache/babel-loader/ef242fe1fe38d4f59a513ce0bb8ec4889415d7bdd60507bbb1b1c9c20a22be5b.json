{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, withKeys as _withKeys } from \"vue\";\nconst _hoisted_1 = {\n  class: \"category-settings\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = [\"onKeyup\"];\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = [\"onClick\"];\nimport { useCategoryStore } from '@/stores/category';\nimport { onMounted, ref } from 'vue';\nexport default {\n  __name: 'CategorySettingList',\n  setup(__props) {\n    const categoryStore = useCategoryStore();\n    const newCategory = ref('');\n    const editId = ref(null);\n    const editName = ref('');\n    const addNewCategory = async () => {\n      if (!newCategory.value.trim()) return;\n      await categoryStore.addCategory(newCategory.value.trim());\n      newCategory.value = '';\n    };\n    const startEdit = cat => {\n      editId.value = cat.id;\n      editName.value = cat.name;\n    };\n    const updateCategory = async id => {\n      if (!editName.value.trim()) return;\n      await categoryStore.updateCategory(id, editName.value.trim());\n      editId.value = null;\n      editName.value = '';\n    };\n    const deleteCategory = async id => {\n      await categoryStore.deleteCategory(id);\n    };\n    onMounted(() => {\n      categoryStore.fetchCategoriesPaginated();\n      //   if (!categoryStore.isLoaded) {\n      //   }\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[3] || (_cache[3] = _createElementVNode(\"h2\", null, \"مدیریت دسته‌بندی‌ها\", -1)), _createElementVNode(\"form\", {\n        onSubmit: _withModifiers(addNewCategory, [\"prevent\"]),\n        class: \"category-form\"\n      }, [_withDirectives(_createElementVNode(\"input\", {\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => newCategory.value = $event),\n        placeholder: \"نام دسته‌بندی\"\n      }, null, 512), [[_vModelText, newCategory.value]]), _cache[2] || (_cache[2] = _createElementVNode(\"button\", {\n        type: \"submit\"\n      }, \"افزودن\", -1))], 32), _unref(categoryStore).loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"در حال بارگذاری...\")) : (_openBlock(), _createElementBlock(\"ul\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(categoryStore).allCategories, cat => {\n        return _openBlock(), _createElementBlock(\"li\", {\n          key: cat.id\n        }, [editId.value !== cat.id ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(cat.title), 1)) : _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n          key: 1,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => editName.value = $event),\n          onKeyup: _withKeys($event => updateCategory(cat.id), [\"enter\"])\n        }, null, 40, _hoisted_5)), [[_vModelText, editName.value]]), _createElementVNode(\"button\", {\n          onClick: $event => startEdit(cat)\n        }, \"ویرایش\", 8, _hoisted_6), _createElementVNode(\"button\", {\n          onClick: $event => deleteCategory(cat.id)\n        }, \"حذف\", 8, _hoisted_7)]);\n      }), 128))]))]);\n    };\n  }\n};","map":{"version":3,"names":["useCategoryStore","onMounted","ref","categoryStore","newCategory","editId","editName","addNewCategory","value","trim","addCategory","startEdit","cat","id","name","updateCategory","deleteCategory","fetchCategoriesPaginated"],"sources":["D:/GitHub/chat/vue3/src/components/tooles/category/CategorySettingList.vue"],"sourcesContent":["<template>\r\n  <div class=\"category-settings\">\r\n    <h2>مدیریت دسته‌بندی‌ها</h2>\r\n    <form @submit.prevent=\"addNewCategory\" class=\"category-form\">\r\n      <input v-model=\"newCategory\" placeholder=\"نام دسته‌بندی\" />\r\n      <button type=\"submit\">افزودن</button>\r\n    </form>\r\n    <div v-if=\"categoryStore.loading\">در حال بارگذاری...</div>\r\n    <ul v-else>\r\n      <li v-for=\"cat in categoryStore.allCategories\" :key=\"cat.id\">\r\n        <span v-if=\"editId !== cat.id\">{{ cat.title }}</span>\r\n        <input\r\n          v-else\r\n          v-model=\"editName\"\r\n          @keyup.enter=\"updateCategory(cat.id)\"\r\n        />\r\n        <button @click=\"startEdit(cat)\">ویرایش</button>\r\n        <button @click=\"deleteCategory(cat.id)\">حذف</button>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script setup>\r\n    import { useCategoryStore } from '@/stores/category'\r\n    import { onMounted, ref } from 'vue'\r\n    const categoryStore = useCategoryStore()\r\n    const newCategory = ref('')\r\n    const editId = ref(null)\r\n    const editName = ref('')\r\n    const addNewCategory = async () => {\r\n      if (!newCategory.value.trim()) return\r\n      await categoryStore.addCategory(newCategory.value.trim())\r\n      newCategory.value = ''\r\n    }\r\n    const startEdit = (cat) => {\r\n      editId.value = cat.id\r\n      editName.value = cat.name\r\n    }\r\n    const updateCategory = async (id) => {\r\n      if (!editName.value.trim()) return\r\n      await categoryStore.updateCategory(id, editName.value.trim())\r\n      editId.value = null\r\n      editName.value = ''\r\n    }\r\n    const deleteCategory = async (id) => {\r\n      await categoryStore.deleteCategory(id)\r\n    }\r\n    onMounted(() => {\r\n        categoryStore.fetchCategoriesPaginated()\r\n    //   if (!categoryStore.isLoaded) {\r\n    //   }\r\n    })\r\n</script>\r\n\r\n<style scoped>\r\n.category-settings {\r\n  max-width: 500px;\r\n  margin: auto;\r\n  padding: 20px;\r\n}\r\n.category-form {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-bottom: 15px;\r\n}\r\n.category-form input {\r\n  flex: 1;\r\n}\r\nul {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\nli {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  margin: 5px 0;\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;;;;;;;;;;AAuBI,SAASA,gBAAgB,QAAQ,mBAAmB;AACpD,SAASC,SAAS,EAAEC,GAAG,QAAQ,KAAK;;;;IACpC,MAAMC,aAAa,GAAGH,gBAAgB,CAAC,CAAC;IACxC,MAAMI,WAAW,GAAGF,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMG,MAAM,GAAGH,GAAG,CAAC,IAAI,CAAC;IACxB,MAAMI,QAAQ,GAAGJ,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMK,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjC,IAAI,CAACH,WAAW,CAACI,KAAK,CAACC,IAAI,CAAC,CAAC,EAAE;MAC/B,MAAMN,aAAa,CAACO,WAAW,CAACN,WAAW,CAACI,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;MACzDL,WAAW,CAACI,KAAK,GAAG,EAAE;IACxB,CAAC;IACD,MAAMG,SAAS,GAAIC,GAAG,IAAK;MACzBP,MAAM,CAACG,KAAK,GAAGI,GAAG,CAACC,EAAE;MACrBP,QAAQ,CAACE,KAAK,GAAGI,GAAG,CAACE,IAAI;IAC3B,CAAC;IACD,MAAMC,cAAc,GAAG,MAAOF,EAAE,IAAK;MACnC,IAAI,CAACP,QAAQ,CAACE,KAAK,CAACC,IAAI,CAAC,CAAC,EAAE;MAC5B,MAAMN,aAAa,CAACY,cAAc,CAACF,EAAE,EAAEP,QAAQ,CAACE,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;MAC7DJ,MAAM,CAACG,KAAK,GAAG,IAAI;MACnBF,QAAQ,CAACE,KAAK,GAAG,EAAE;IACrB,CAAC;IACD,MAAMQ,cAAc,GAAG,MAAOH,EAAE,IAAK;MACnC,MAAMV,aAAa,CAACa,cAAc,CAACH,EAAE,CAAC;IACxC,CAAC;IACDZ,SAAS,CAAC,MAAM;MACZE,aAAa,CAACc,wBAAwB,CAAC,CAAC;MAC5C;MACA;IACA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}