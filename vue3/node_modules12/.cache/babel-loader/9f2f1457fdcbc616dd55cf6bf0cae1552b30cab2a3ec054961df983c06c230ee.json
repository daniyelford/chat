{"ast":null,"code":"import { ref as c, watch as y, onMounted as k, createElementBlock as i, openBlock as d, createTextVNode as x, toDisplayString as m, Fragment as b, renderList as w, withDirectives as _, normalizeClass as T, vModelText as D, nextTick as a } from \"vue\";\nconst V = {\n    class: \"otp-container\"\n  },\n  A = [\"onUpdate:modelValue\", \"onKeyup\"],\n  B = {\n    __name: \"OtpInput\",\n    props: {\n      modelValue: {\n        type: String,\n        default: \"\"\n      },\n      length: {\n        type: Number,\n        default: 6\n      }\n    },\n    emits: [\"update:modelValue\"],\n    setup(f, {\n      emit: g\n    }) {\n      const r = c(\"\"),\n        p = c(null),\n        s = f,\n        v = g,\n        o = c(Array.from({\n          length: s.length\n        }, (e, t) => s.modelValue[t] || \"\")),\n        h = (e, t) => {\n          const n = e.currentTarget.parentElement.children,\n            l = /^[0-9]$/.test(e.key);\n          if (!l && ![\"Backspace\", \"ArrowLeft\", \"ArrowRight\", \"Tab\"].includes(e.key)) {\n            e.preventDefault();\n            return;\n          }\n          if (l) {\n            o.value[t] = e.key, e.preventDefault(), t < o.value.length - 1 && a(() => n[t + 1].focus());\n            return;\n          }\n          if (e.key === \"Backspace\") {\n            o.value[t] = \"\", e.preventDefault(), t > 0 && a(() => n[t - 1].focus());\n            return;\n          }\n          e.key === \"ArrowLeft\" && t > 0 && a(() => n[t - 1].focus()), e.key === \"ArrowRight\" && t < o.value.length - 1 && a(() => n[t + 1].focus());\n        };\n      return y(o, () => {\n        v(\"update:modelValue\", o.value.join(\"\"));\n      }, {\n        deep: !0\n      }), k(() => {\n        const e = document.createElement(\"style\");\n        if (e.textContent = `\n    .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }\n    .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }\n    .bounce { animation: pulse 0.3s ease-in-out alternate; } \n      @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }\n    `, document.head.appendChild(e), \"OTPCredential\" in window) {\n          const t = new AbortController();\n          navigator.credentials.get({\n            otp: {\n              transport: [\"sms\"]\n            },\n            signal: t.signal\n          }).then(n => {\n            p.value = n, n?.code ? o.value = n.code.split(\"\").slice(0, s.length) : r.value = \"OTP code not received!\";\n          }).catch(n => {\n            r.value = n.message;\n          });\n        } else console.log(\"WebOTP not supported on this device.\");\n      }), (e, t) => (d(), i(\"div\", V, [x(m(r.value ?? \"\") + \" \" + m(p.value) + \" \", 1), (d(!0), i(b, null, w(o.value, (n, l) => _((d(), i(\"input\", {\n        key: l,\n        type: \"text\",\n        class: T([\"digit-box\", {\n          bounce: n !== \"\"\n        }]),\n        \"onUpdate:modelValue\": u => o.value[l] = u,\n        maxlength: \"1\",\n        onKeyup: u => h(u, l)\n      }, null, 42, A)), [[D, o.value[l]]])), 128))]));\n    }\n  };\nexport { B as default };","map":{"version":3,"names":["ref","c","watch","y","onMounted","k","createElementBlock","i","openBlock","d","createTextVNode","x","toDisplayString","m","Fragment","b","renderList","w","withDirectives","_","normalizeClass","T","vModelText","D","nextTick","a","V","class","A","B","__name","props","modelValue","type","String","default","length","Number","emits","setup","f","emit","g","r","p","s","v","o","Array","from","e","t","h","n","currentTarget","parentElement","children","l","test","key","includes","preventDefault","value","focus","join","deep","document","createElement","textContent","head","appendChild","window","AbortController","navigator","credentials","get","otp","transport","signal","then","code","split","slice","catch","message","console","log","bounce","u","maxlength","onKeyup"],"sources":["D:/GitHub/vue-otp-autofill/dist/index.es.js"],"sourcesContent":["import { ref as c, watch as y, onMounted as k, createElementBlock as i, openBlock as d, createTextVNode as x, toDisplayString as m, Fragment as b, renderList as w, withDirectives as _, normalizeClass as T, vModelText as D, nextTick as a } from \"vue\";\nconst V = { class: \"otp-container\" }, A = [\"onUpdate:modelValue\", \"onKeyup\"], B = {\n  __name: \"OtpInput\",\n  props: {\n    modelValue: { type: String, default: \"\" },\n    length: { type: Number, default: 6 }\n  },\n  emits: [\"update:modelValue\"],\n  setup(f, { emit: g }) {\n    const r = c(\"\"), p = c(null), s = f, v = g, o = c(Array.from({ length: s.length }, (e, t) => s.modelValue[t] || \"\")), h = (e, t) => {\n      const n = e.currentTarget.parentElement.children, l = /^[0-9]$/.test(e.key);\n      if (!l && ![\"Backspace\", \"ArrowLeft\", \"ArrowRight\", \"Tab\"].includes(e.key)) {\n        e.preventDefault();\n        return;\n      }\n      if (l) {\n        o.value[t] = e.key, e.preventDefault(), t < o.value.length - 1 && a(() => n[t + 1].focus());\n        return;\n      }\n      if (e.key === \"Backspace\") {\n        o.value[t] = \"\", e.preventDefault(), t > 0 && a(() => n[t - 1].focus());\n        return;\n      }\n      e.key === \"ArrowLeft\" && t > 0 && a(() => n[t - 1].focus()), e.key === \"ArrowRight\" && t < o.value.length - 1 && a(() => n[t + 1].focus());\n    };\n    return y(o, () => {\n      v(\"update:modelValue\", o.value.join(\"\"));\n    }, { deep: !0 }), k(() => {\n      const e = document.createElement(\"style\");\n      if (e.textContent = `\n    .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }\n    .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }\n    .bounce { animation: pulse 0.3s ease-in-out alternate; } \n      @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }\n    `, document.head.appendChild(e), \"OTPCredential\" in window) {\n        const t = new AbortController();\n        navigator.credentials.get({\n          otp: { transport: [\"sms\"] },\n          signal: t.signal\n        }).then((n) => {\n          p.value = n, n?.code ? o.value = n.code.split(\"\").slice(0, s.length) : r.value = \"OTP code not received!\";\n        }).catch((n) => {\n          r.value = n.message;\n        });\n      } else\n        console.log(\"WebOTP not supported on this device.\");\n    }), (e, t) => (d(), i(\"div\", V, [\n      x(m(r.value ?? \"\") + \" \" + m(p.value) + \" \", 1),\n      (d(!0), i(b, null, w(o.value, (n, l) => _((d(), i(\"input\", {\n        key: l,\n        type: \"text\",\n        class: T([\"digit-box\", { bounce: n !== \"\" }]),\n        \"onUpdate:modelValue\": (u) => o.value[l] = u,\n        maxlength: \"1\",\n        onKeyup: (u) => h(u, l)\n      }, null, 42, A)), [\n        [D, o.value[l]]\n      ])), 128))\n    ]));\n  }\n};\nexport {\n  B as default\n};\n"],"mappings":"AAAA,SAASA,GAAG,IAAIC,CAAC,EAAEC,KAAK,IAAIC,CAAC,EAAEC,SAAS,IAAIC,CAAC,EAAEC,kBAAkB,IAAIC,CAAC,EAAEC,SAAS,IAAIC,CAAC,EAAEC,eAAe,IAAIC,CAAC,EAAEC,eAAe,IAAIC,CAAC,EAAEC,QAAQ,IAAIC,CAAC,EAAEC,UAAU,IAAIC,CAAC,EAAEC,cAAc,IAAIC,CAAC,EAAEC,cAAc,IAAIC,CAAC,EAAEC,UAAU,IAAIC,CAAC,EAAEC,QAAQ,IAAIC,CAAC,QAAQ,KAAK;AACzP,MAAMC,CAAC,GAAG;IAAEC,KAAK,EAAE;EAAgB,CAAC;EAAEC,CAAC,GAAG,CAAC,qBAAqB,EAAE,SAAS,CAAC;EAAEC,CAAC,GAAG;IAChFC,MAAM,EAAE,UAAU;IAClBC,KAAK,EAAE;MACLC,UAAU,EAAE;QAAEC,IAAI,EAAEC,MAAM;QAAEC,OAAO,EAAE;MAAG,CAAC;MACzCC,MAAM,EAAE;QAAEH,IAAI,EAAEI,MAAM;QAAEF,OAAO,EAAE;MAAE;IACrC,CAAC;IACDG,KAAK,EAAE,CAAC,mBAAmB,CAAC;IAC5BC,KAAKA,CAACC,CAAC,EAAE;MAAEC,IAAI,EAAEC;IAAE,CAAC,EAAE;MACpB,MAAMC,CAAC,GAAG1C,CAAC,CAAC,EAAE,CAAC;QAAE2C,CAAC,GAAG3C,CAAC,CAAC,IAAI,CAAC;QAAE4C,CAAC,GAAGL,CAAC;QAAEM,CAAC,GAAGJ,CAAC;QAAEK,CAAC,GAAG9C,CAAC,CAAC+C,KAAK,CAACC,IAAI,CAAC;UAAEb,MAAM,EAAES,CAAC,CAACT;QAAO,CAAC,EAAE,CAACc,CAAC,EAAEC,CAAC,KAAKN,CAAC,CAACb,UAAU,CAACmB,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;QAAEC,CAAC,GAAGA,CAACF,CAAC,EAAEC,CAAC,KAAK;UAClI,MAAME,CAAC,GAAGH,CAAC,CAACI,aAAa,CAACC,aAAa,CAACC,QAAQ;YAAEC,CAAC,GAAG,SAAS,CAACC,IAAI,CAACR,CAAC,CAACS,GAAG,CAAC;UAC3E,IAAI,CAACF,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,WAAW,EAAE,YAAY,EAAE,KAAK,CAAC,CAACG,QAAQ,CAACV,CAAC,CAACS,GAAG,CAAC,EAAE;YAC1ET,CAAC,CAACW,cAAc,CAAC,CAAC;YAClB;UACF;UACA,IAAIJ,CAAC,EAAE;YACLV,CAAC,CAACe,KAAK,CAACX,CAAC,CAAC,GAAGD,CAAC,CAACS,GAAG,EAAET,CAAC,CAACW,cAAc,CAAC,CAAC,EAAEV,CAAC,GAAGJ,CAAC,CAACe,KAAK,CAAC1B,MAAM,GAAG,CAAC,IAAIX,CAAC,CAAC,MAAM4B,CAAC,CAACF,CAAC,GAAG,CAAC,CAAC,CAACY,KAAK,CAAC,CAAC,CAAC;YAC3F;UACF;UACA,IAAIb,CAAC,CAACS,GAAG,KAAK,WAAW,EAAE;YACzBZ,CAAC,CAACe,KAAK,CAACX,CAAC,CAAC,GAAG,EAAE,EAAED,CAAC,CAACW,cAAc,CAAC,CAAC,EAAEV,CAAC,GAAG,CAAC,IAAI1B,CAAC,CAAC,MAAM4B,CAAC,CAACF,CAAC,GAAG,CAAC,CAAC,CAACY,KAAK,CAAC,CAAC,CAAC;YACvE;UACF;UACAb,CAAC,CAACS,GAAG,KAAK,WAAW,IAAIR,CAAC,GAAG,CAAC,IAAI1B,CAAC,CAAC,MAAM4B,CAAC,CAACF,CAAC,GAAG,CAAC,CAAC,CAACY,KAAK,CAAC,CAAC,CAAC,EAAEb,CAAC,CAACS,GAAG,KAAK,YAAY,IAAIR,CAAC,GAAGJ,CAAC,CAACe,KAAK,CAAC1B,MAAM,GAAG,CAAC,IAAIX,CAAC,CAAC,MAAM4B,CAAC,CAACF,CAAC,GAAG,CAAC,CAAC,CAACY,KAAK,CAAC,CAAC,CAAC;QAC5I,CAAC;MACD,OAAO5D,CAAC,CAAC4C,CAAC,EAAE,MAAM;QAChBD,CAAC,CAAC,mBAAmB,EAAEC,CAAC,CAACe,KAAK,CAACE,IAAI,CAAC,EAAE,CAAC,CAAC;MAC1C,CAAC,EAAE;QAAEC,IAAI,EAAE,CAAC;MAAE,CAAC,CAAC,EAAE5D,CAAC,CAAC,MAAM;QACxB,MAAM6C,CAAC,GAAGgB,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;QACzC,IAAIjB,CAAC,CAACkB,WAAW,GAAG;AAC1B;AACA;AACA;AACA;AACA,KAAK,EAAEF,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACpB,CAAC,CAAC,EAAE,eAAe,IAAIqB,MAAM,EAAE;UACxD,MAAMpB,CAAC,GAAG,IAAIqB,eAAe,CAAC,CAAC;UAC/BC,SAAS,CAACC,WAAW,CAACC,GAAG,CAAC;YACxBC,GAAG,EAAE;cAAEC,SAAS,EAAE,CAAC,KAAK;YAAE,CAAC;YAC3BC,MAAM,EAAE3B,CAAC,CAAC2B;UACZ,CAAC,CAAC,CAACC,IAAI,CAAE1B,CAAC,IAAK;YACbT,CAAC,CAACkB,KAAK,GAAGT,CAAC,EAAEA,CAAC,EAAE2B,IAAI,GAAGjC,CAAC,CAACe,KAAK,GAAGT,CAAC,CAAC2B,IAAI,CAACC,KAAK,CAAC,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,EAAErC,CAAC,CAACT,MAAM,CAAC,GAAGO,CAAC,CAACmB,KAAK,GAAG,wBAAwB;UAC3G,CAAC,CAAC,CAACqB,KAAK,CAAE9B,CAAC,IAAK;YACdV,CAAC,CAACmB,KAAK,GAAGT,CAAC,CAAC+B,OAAO;UACrB,CAAC,CAAC;QACJ,CAAC,MACCC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;MACvD,CAAC,CAAC,EAAE,CAACpC,CAAC,EAAEC,CAAC,MAAM1C,CAAC,CAAC,CAAC,EAAEF,CAAC,CAAC,KAAK,EAAEmB,CAAC,EAAE,CAC9Bf,CAAC,CAACE,CAAC,CAAC8B,CAAC,CAACmB,KAAK,IAAI,EAAE,CAAC,GAAG,GAAG,GAAGjD,CAAC,CAAC+B,CAAC,CAACkB,KAAK,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC,GAC9CrD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEF,CAAC,CAACQ,CAAC,EAAE,IAAI,EAAEE,CAAC,CAAC8B,CAAC,CAACe,KAAK,EAAE,CAACT,CAAC,EAAEI,CAAC,KAAKtC,CAAC,EAAEV,CAAC,CAAC,CAAC,EAAEF,CAAC,CAAC,OAAO,EAAE;QACzDoD,GAAG,EAAEF,CAAC;QACNxB,IAAI,EAAE,MAAM;QACZN,KAAK,EAAEN,CAAC,CAAC,CAAC,WAAW,EAAE;UAAEkE,MAAM,EAAElC,CAAC,KAAK;QAAG,CAAC,CAAC,CAAC;QAC7C,qBAAqB,EAAGmC,CAAC,IAAKzC,CAAC,CAACe,KAAK,CAACL,CAAC,CAAC,GAAG+B,CAAC;QAC5CC,SAAS,EAAE,GAAG;QACdC,OAAO,EAAGF,CAAC,IAAKpC,CAAC,CAACoC,CAAC,EAAE/B,CAAC;MACxB,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE7B,CAAC,CAAC,GAAG,CAChB,CAACL,CAAC,EAAEwB,CAAC,CAACe,KAAK,CAACL,CAAC,CAAC,CAAC,CAChB,CAAC,CAAC,EAAE,GAAG,CAAC,EACV,CAAC,CAAC;IACL;EACF,CAAC;AACD,SACE5B,CAAC,IAAIM,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}