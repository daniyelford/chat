{"ast":null,"code":"import { ref as u, watch as x, onMounted as w, createElementBlock as i, openBlock as d, createTextVNode as _, toDisplayString as m, Fragment as b, renderList as k, withDirectives as T, normalizeClass as V, vModelText as A, nextTick as r } from \"vue\";\nconst C = {\n    class: \"otp-container\"\n  },\n  E = [\"onUpdate:modelValue\", \"onInput\", \"onKeydown\"],\n  O = {\n    __name: \"OtpInput\",\n    props: {\n      modelValue: {\n        type: String,\n        default: \"\"\n      },\n      length: {\n        type: Number,\n        default: 6\n      }\n    },\n    emits: [\"update:modelValue\"],\n    setup(g, {\n      emit: h\n    }) {\n      const s = u(\"\"),\n        p = u(null),\n        c = g,\n        f = h,\n        o = u(Array.from({\n          length: c.length\n        }, (n, e) => c.modelValue[e] || \"\")),\n        v = (n, e) => {\n          const t = n.target.value.replace(/[^0-9]/g, \"\").charAt(0) || \"\";\n          o.value[e] = t, t && e < o.value.length - 1 && r(() => n.target.parentElement.children[e + 1].focus());\n        },\n        y = (n, e) => {\n          const t = n.currentTarget.parentElement.children;\n          if (n.key === \"Backspace\") {\n            !o.value[e] && e > 0 && r(() => t[e - 1].focus());\n            return;\n          }\n          n.key === \"ArrowLeft\" && e > 0 && r(() => t[e - 1].focus()), n.key === \"ArrowRight\" && e < o.value.length - 1 && r(() => t[e + 1].focus());\n        };\n      return x(o, () => {\n        f(\"update:modelValue\", o.value.join(\"\"));\n      }, {\n        deep: !0\n      }), w(() => {\n        const n = document.createElement(\"style\");\n        if (n.textContent = `\n    .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }\n    .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }\n    .bounce { animation: pulse 0.3s ease-in-out alternate; } \n      @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }\n    `, document.head.appendChild(n), \"OTPCredential\" in window) {\n          const e = new AbortController();\n          navigator.credentials.get({\n            otp: {\n              transport: [\"sms\"]\n            },\n            signal: e.signal\n          }).then(t => {\n            p.value = t, t?.code ? o.value = t.code.split(\"\").slice(0, c.length) : s.value = \"OTP code not received!\";\n          }).catch(t => {\n            s.value = t.message;\n          });\n        } else console.log(\"WebOTP not supported on this device.\");\n      }), (n, e) => (d(), i(\"div\", C, [_(m(s.value ?? \"\") + \" \" + m(p.value) + \" \", 1), (d(!0), i(b, null, k(o.value, (t, l) => T((d(), i(\"input\", {\n        key: l,\n        type: \"text\",\n        class: V([\"digit-box\", {\n          bounce: t !== \"\"\n        }]),\n        \"onUpdate:modelValue\": a => o.value[l] = a,\n        maxlength: \"1\",\n        onInput: a => v(a, l),\n        onKeydown: a => y(a, l)\n      }, null, 42, E)), [[A, o.value[l]]])), 128))]));\n    }\n  };\nexport { O as default };","map":{"version":3,"names":["ref","u","watch","x","onMounted","w","createElementBlock","i","openBlock","d","createTextVNode","_","toDisplayString","m","Fragment","b","renderList","k","withDirectives","T","normalizeClass","V","vModelText","A","nextTick","r","C","class","E","O","__name","props","modelValue","type","String","default","length","Number","emits","setup","g","emit","h","s","p","c","f","o","Array","from","n","e","v","t","target","value","replace","charAt","parentElement","children","focus","y","currentTarget","key","join","deep","document","createElement","textContent","head","appendChild","window","AbortController","navigator","credentials","get","otp","transport","signal","then","code","split","slice","catch","message","console","log","l","bounce","a","maxlength","onInput","onKeydown"],"sources":["D:/GitHub/vue-otp-autofill/dist/index.es.js"],"sourcesContent":["import { ref as u, watch as x, onMounted as w, createElementBlock as i, openBlock as d, createTextVNode as _, toDisplayString as m, Fragment as b, renderList as k, withDirectives as T, normalizeClass as V, vModelText as A, nextTick as r } from \"vue\";\nconst C = { class: \"otp-container\" }, E = [\"onUpdate:modelValue\", \"onInput\", \"onKeydown\"], O = {\n  __name: \"OtpInput\",\n  props: {\n    modelValue: { type: String, default: \"\" },\n    length: { type: Number, default: 6 }\n  },\n  emits: [\"update:modelValue\"],\n  setup(g, { emit: h }) {\n    const s = u(\"\"), p = u(null), c = g, f = h, o = u(Array.from({ length: c.length }, (n, e) => c.modelValue[e] || \"\")), v = (n, e) => {\n      const t = n.target.value.replace(/[^0-9]/g, \"\").charAt(0) || \"\";\n      o.value[e] = t, t && e < o.value.length - 1 && r(() => n.target.parentElement.children[e + 1].focus());\n    }, y = (n, e) => {\n      const t = n.currentTarget.parentElement.children;\n      if (n.key === \"Backspace\") {\n        !o.value[e] && e > 0 && r(() => t[e - 1].focus());\n        return;\n      }\n      n.key === \"ArrowLeft\" && e > 0 && r(() => t[e - 1].focus()), n.key === \"ArrowRight\" && e < o.value.length - 1 && r(() => t[e + 1].focus());\n    };\n    return x(o, () => {\n      f(\"update:modelValue\", o.value.join(\"\"));\n    }, { deep: !0 }), w(() => {\n      const n = document.createElement(\"style\");\n      if (n.textContent = `\n    .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }\n    .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }\n    .bounce { animation: pulse 0.3s ease-in-out alternate; } \n      @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }\n    `, document.head.appendChild(n), \"OTPCredential\" in window) {\n        const e = new AbortController();\n        navigator.credentials.get({\n          otp: { transport: [\"sms\"] },\n          signal: e.signal\n        }).then((t) => {\n          p.value = t, t?.code ? o.value = t.code.split(\"\").slice(0, c.length) : s.value = \"OTP code not received!\";\n        }).catch((t) => {\n          s.value = t.message;\n        });\n      } else\n        console.log(\"WebOTP not supported on this device.\");\n    }), (n, e) => (d(), i(\"div\", C, [\n      _(m(s.value ?? \"\") + \" \" + m(p.value) + \" \", 1),\n      (d(!0), i(b, null, k(o.value, (t, l) => T((d(), i(\"input\", {\n        key: l,\n        type: \"text\",\n        class: V([\"digit-box\", { bounce: t !== \"\" }]),\n        \"onUpdate:modelValue\": (a) => o.value[l] = a,\n        maxlength: \"1\",\n        onInput: (a) => v(a, l),\n        onKeydown: (a) => y(a, l)\n      }, null, 42, E)), [\n        [A, o.value[l]]\n      ])), 128))\n    ]));\n  }\n};\nexport {\n  O as default\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}