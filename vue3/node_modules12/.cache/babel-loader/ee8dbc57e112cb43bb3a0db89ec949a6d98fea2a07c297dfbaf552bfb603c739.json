{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\nimport moment from 'jalali-moment';\nimport { sendApi } from '@/utils/api';\nexport const useCalendarEventsStore = defineStore('calendarEvents', () => {\n  const events = ref([]);\n  const vacations = ref([]);\n  const loadEvents = async () => {\n    try {\n      const res = await sendApi({\n        control: 'news',\n        action: 'get_news_for_month'\n      });\n      if (res.status === 'success') {\n        events.value = (res.data || []).map(item => ({\n          id: item.news?.id || 0,\n          title: item.news?.description?.slice(0, 20) || 'بدون عنوان',\n          startDateTime: moment(item.start),\n          endDateTime: item.end ? moment(item.end) : moment(item.start),\n          color: '#29B6F6',\n          // می‌تونی از دیتابیس رنگ بدی هم اگه خواستی\n          raw: item // نگه می‌داریم برای نمایش کامل در مودال\n        }));\n      }\n    } catch (e) {\n      console.error('Error loading events:', e);\n    }\n  };\n  return {\n    events,\n    vacations,\n    loadEvents\n  };\n});","map":{"version":3,"names":["defineStore","ref","moment","sendApi","useCalendarEventsStore","events","vacations","loadEvents","res","control","action","status","value","data","map","item","id","news","title","description","slice","startDateTime","start","endDateTime","end","color","raw","e","console","error"],"sources":["D:/GitHub/ci3-vue3/vue3/src/stores/calendarEvents.js"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { ref } from 'vue'\r\nimport moment from 'jalali-moment'\r\nimport { sendApi } from '@/utils/api'\r\n\r\nexport const useCalendarEventsStore = defineStore('calendarEvents', () => {\r\n  const events = ref([])\r\n  const vacations = ref([])\r\n\r\n  const loadEvents = async () => {\r\n    try {\r\n      const res = await sendApi({ control: 'news', action: 'get_news_for_month' })\r\n      if (res.status === 'success') {\r\n        events.value = (res.data || []).map(item => ({\r\n          id: item.news?.id || 0,\r\n          title: item.news?.description?.slice(0, 20) || 'بدون عنوان',\r\n          startDateTime: moment(item.start),\r\n          endDateTime: item.end ? moment(item.end) : moment(item.start),\r\n          color: '#29B6F6', // می‌تونی از دیتابیس رنگ بدی هم اگه خواستی\r\n          raw: item, // نگه می‌داریم برای نمایش کامل در مودال\r\n        }))\r\n      }\r\n    } catch (e) {\r\n      console.error('Error loading events:', e)\r\n    }\r\n  }\r\n\r\n  return {\r\n    events,\r\n    vacations,\r\n    loadEvents\r\n  }\r\n})\r\n"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,GAAG,QAAQ,KAAK;AACzB,OAAOC,MAAM,MAAM,eAAe;AAClC,SAASC,OAAO,QAAQ,aAAa;AAErC,OAAO,MAAMC,sBAAsB,GAAGJ,WAAW,CAAC,gBAAgB,EAAE,MAAM;EACxE,MAAMK,MAAM,GAAGJ,GAAG,CAAC,EAAE,CAAC;EACtB,MAAMK,SAAS,GAAGL,GAAG,CAAC,EAAE,CAAC;EAEzB,MAAMM,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACF,MAAMC,GAAG,GAAG,MAAML,OAAO,CAAC;QAAEM,OAAO,EAAE,MAAM;QAAEC,MAAM,EAAE;MAAqB,CAAC,CAAC;MAC5E,IAAIF,GAAG,CAACG,MAAM,KAAK,SAAS,EAAE;QAC5BN,MAAM,CAACO,KAAK,GAAG,CAACJ,GAAG,CAACK,IAAI,IAAI,EAAE,EAAEC,GAAG,CAACC,IAAI,KAAK;UAC3CC,EAAE,EAAED,IAAI,CAACE,IAAI,EAAED,EAAE,IAAI,CAAC;UACtBE,KAAK,EAAEH,IAAI,CAACE,IAAI,EAAEE,WAAW,EAAEC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,YAAY;UAC3DC,aAAa,EAAEnB,MAAM,CAACa,IAAI,CAACO,KAAK,CAAC;UACjCC,WAAW,EAAER,IAAI,CAACS,GAAG,GAAGtB,MAAM,CAACa,IAAI,CAACS,GAAG,CAAC,GAAGtB,MAAM,CAACa,IAAI,CAACO,KAAK,CAAC;UAC7DG,KAAK,EAAE,SAAS;UAAE;UAClBC,GAAG,EAAEX,IAAI,CAAE;QACb,CAAC,CAAC,CAAC;MACL;IACF,CAAC,CAAC,OAAOY,CAAC,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,CAAC,CAAC;IAC3C;EACF,CAAC;EAED,OAAO;IACLtB,MAAM;IACNC,SAAS;IACTC;EACF,CAAC;AACH,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}