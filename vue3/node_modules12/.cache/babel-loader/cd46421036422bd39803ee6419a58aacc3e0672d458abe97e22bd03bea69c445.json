{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref as c, watch as E, onMounted as T, nextTick as r, createElementBlock as d, openBlock as p, createTextVNode as V, toDisplayString as m, Fragment as A, renderList as C, withDirectives as D, normalizeClass as I, vModelText as j } from \"vue\";\nconst B = {\n    class: \"otp-container\"\n  },\n  K = [\"onUpdate:modelValue\", \"onInput\", \"onKeydown\"],\n  O = {\n    __name: \"OtpInput\",\n    props: {\n      modelValue: {\n        type: String,\n        default: \"\"\n      },\n      length: {\n        type: Number,\n        default: 6\n      }\n    },\n    emits: [\"update:modelValue\"],\n    setup(v, {\n      emit: y\n    }) {\n      const u = c(\"\"),\n        i = c(\"\"),\n        g = c(\"\"),\n        s = v,\n        x = y,\n        o = c(Array.from({\n          length: s.length\n        }, (n, e) => s.modelValue[e] || \"\")),\n        w = n => {\n          const e = {\n            \"۰\": \"0\",\n            \"۱\": \"1\",\n            \"۲\": \"2\",\n            \"۳\": \"3\",\n            \"۴\": \"4\",\n            \"۵\": \"5\",\n            \"۶\": \"6\",\n            \"۷\": \"7\",\n            \"۸\": \"8\",\n            \"۹\": \"9\"\n          };\n          return n.replace(/[۰-۹]/g, t => e[t]);\n        },\n        _ = (n, e) => {\n          const t = w(n.target.value).replace(/[^0-9]/g, \"\").charAt(0) || \"\";\n          o.value[e] = t, t && e < o.value.length - 1 && r(() => n.target.parentElement.children[e + 1].focus());\n        },\n        k = (n, e) => {\n          const t = n.currentTarget.parentElement.children;\n          if (n.key === \"Backspace\") {\n            !o.value[e] && e > 0 && r(() => t[e - 1].focus());\n            return;\n          }\n          n.key === \"ArrowLeft\" && e > 0 && r(() => t[e - 1].focus()), n.key === \"ArrowRight\" && e < o.value.length - 1 && r(() => t[e + 1].focus());\n        };\n      return E(o, () => {\n        x(\"update:modelValue\", o.value.join(\"\")), i.value = o.value.join(\"\");\n      }, {\n        deep: !0\n      }), T(() => {\n        const n = document.createElement(\"style\");\n        if (n.textContent = `\n    .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }\n    .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }\n    .bounce { animation: pulse 0.3s ease-in-out alternate; } \n      @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }\n    `, document.head.appendChild(n), \"OTPCredential\" in window) {\n          const e = new AbortController();\n          navigator.credentials.get({\n            otp: {\n              transport: [\"sms\"]\n            },\n            signal: e.signal\n          }).then(t => {\n            if (t?.code) {\n              i.value = t.code, g.value = t.type;\n              const l = t.code.split(\"\").slice(0, s.length);\n              o.value = l, r(() => {\n                const a = document.querySelectorAll(\".otp-container input\");\n                l.forEach((b, f) => {\n                  a[f] && (a[f].value = b);\n                });\n                const h = Math.min(l.length, s.length) - 1;\n                a[h] && a[h].focus();\n              });\n            } else u.value = \"OTP code not received!\";\n          }).catch(t => {\n            u.value = t.message;\n          });\n        }\n      }), (n, e) => (p(), d(\"div\", B, [V(m(u.value ?? \"\") + \" \" + m(i.value ?? \"\") + \" \" + m(g.value ?? \"\") + \" \", 1), (p(!0), d(A, null, C(o.value, (t, l) => D((p(), d(\"input\", {\n        key: l,\n        type: \"text\",\n        class: I([\"digit-box\", {\n          bounce: t !== \"\"\n        }]),\n        \"onUpdate:modelValue\": a => o.value[l] = a,\n        maxlength: \"1\",\n        onInput: a => _(a, l),\n        onKeydown: a => k(a, l)\n      }, null, 42, K)), [[j, o.value[l]]])), 128))]));\n    }\n  };\nexport { O as default };","map":{"version":3,"names":["ref","c","watch","E","onMounted","T","nextTick","r","createElementBlock","d","openBlock","p","createTextVNode","V","toDisplayString","m","Fragment","A","renderList","C","withDirectives","D","normalizeClass","I","vModelText","j","B","class","K","O","__name","props","modelValue","type","String","default","length","Number","emits","setup","v","emit","y","u","i","g","s","x","o","Array","from","n","e","w","replace","t","_","target","value","charAt","parentElement","children","focus","k","currentTarget","key","join","deep","document","createElement","textContent","head","appendChild","window","AbortController","navigator","credentials","get","otp","transport","signal","then","code","l","split","slice","a","querySelectorAll","forEach","b","f","h","Math","min","catch","message","bounce","maxlength","onInput","onKeydown"],"sources":["D:/GitHub/vue-otp-autofill/dist/index.es.js"],"sourcesContent":["import { ref as c, watch as E, onMounted as T, nextTick as r, createElementBlock as d, openBlock as p, createTextVNode as V, toDisplayString as m, Fragment as A, renderList as C, withDirectives as D, normalizeClass as I, vModelText as j } from \"vue\";\nconst B = { class: \"otp-container\" }, K = [\"onUpdate:modelValue\", \"onInput\", \"onKeydown\"], O = {\n  __name: \"OtpInput\",\n  props: {\n    modelValue: { type: String, default: \"\" },\n    length: { type: Number, default: 6 }\n  },\n  emits: [\"update:modelValue\"],\n  setup(v, { emit: y }) {\n    const u = c(\"\"), i = c(\"\"), g = c(\"\"), s = v, x = y, o = c(Array.from({ length: s.length }, (n, e) => s.modelValue[e] || \"\")), w = (n) => {\n      const e = { \"۰\": \"0\", \"۱\": \"1\", \"۲\": \"2\", \"۳\": \"3\", \"۴\": \"4\", \"۵\": \"5\", \"۶\": \"6\", \"۷\": \"7\", \"۸\": \"8\", \"۹\": \"9\" };\n      return n.replace(/[۰-۹]/g, (t) => e[t]);\n    }, _ = (n, e) => {\n      const t = w(n.target.value).replace(/[^0-9]/g, \"\").charAt(0) || \"\";\n      o.value[e] = t, t && e < o.value.length - 1 && r(() => n.target.parentElement.children[e + 1].focus());\n    }, k = (n, e) => {\n      const t = n.currentTarget.parentElement.children;\n      if (n.key === \"Backspace\") {\n        !o.value[e] && e > 0 && r(() => t[e - 1].focus());\n        return;\n      }\n      n.key === \"ArrowLeft\" && e > 0 && r(() => t[e - 1].focus()), n.key === \"ArrowRight\" && e < o.value.length - 1 && r(() => t[e + 1].focus());\n    };\n    return E(o, () => {\n      x(\"update:modelValue\", o.value.join(\"\")), i.value = o.value.join(\"\");\n    }, { deep: !0 }), T(() => {\n      const n = document.createElement(\"style\");\n      if (n.textContent = `\n    .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }\n    .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }\n    .bounce { animation: pulse 0.3s ease-in-out alternate; } \n      @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }\n    `, document.head.appendChild(n), \"OTPCredential\" in window) {\n        const e = new AbortController();\n        navigator.credentials.get({\n          otp: { transport: [\"sms\"] },\n          signal: e.signal\n        }).then((t) => {\n          if (t?.code) {\n            i.value = t.code, g.value = t.type;\n            const l = t.code.split(\"\").slice(0, s.length);\n            o.value = l, r(() => {\n              const a = document.querySelectorAll(\".otp-container input\");\n              l.forEach((b, f) => {\n                a[f] && (a[f].value = b);\n              });\n              const h = Math.min(l.length, s.length) - 1;\n              a[h] && a[h].focus();\n            });\n          } else\n            u.value = \"OTP code not received!\";\n        }).catch((t) => {\n          u.value = t.message;\n        });\n      }\n    }), (n, e) => (p(), d(\"div\", B, [\n      V(m(u.value ?? \"\") + \" \" + m(i.value ?? \"\") + \" \" + m(g.value ?? \"\") + \" \", 1),\n      (p(!0), d(A, null, C(o.value, (t, l) => D((p(), d(\"input\", {\n        key: l,\n        type: \"text\",\n        class: I([\"digit-box\", { bounce: t !== \"\" }]),\n        \"onUpdate:modelValue\": (a) => o.value[l] = a,\n        maxlength: \"1\",\n        onInput: (a) => _(a, l),\n        onKeydown: (a) => k(a, l)\n      }, null, 42, K)), [\n        [j, o.value[l]]\n      ])), 128))\n    ]));\n  }\n};\nexport {\n  O as default\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}