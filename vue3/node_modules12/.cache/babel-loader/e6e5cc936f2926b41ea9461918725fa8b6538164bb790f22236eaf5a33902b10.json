{"ast":null,"code":"import { useCategoryStore } from '@/stores/category';\nimport { onMounted, computed, ref } from 'vue';\nexport default {\n  name: 'CategorySettings',\n  setup() {\n    const categoryStore = useCategoryStore();\n    const category = computed(() => categoryStore);\n    const newCategory = ref('');\n    const editId = ref(null);\n    const editName = ref('');\n    const addNewCategory = async () => {\n      if (!newCategory.value.trim()) return;\n      await categoryStore.addCategory(newCategory.value.trim());\n      newCategory.value = '';\n    };\n    const startEdit = cat => {\n      editId.value = cat.id;\n      editName.value = cat.name;\n    };\n    const updateCategory = async id => {\n      if (!editName.value.trim()) return;\n      await categoryStore.updateCategory(id, editName.value.trim());\n      editId.value = null;\n      editName.value = '';\n    };\n    const deleteCategory = async id => {\n      await categoryStore.deleteCategory(id);\n    };\n    onMounted(() => {\n      if (!categoryStore.isLoaded) {\n        categoryStore.fetchCategories();\n      }\n    });\n    return {\n      category,\n      newCategory,\n      editId,\n      editName,\n      addNewCategory,\n      startEdit,\n      updateCategory,\n      deleteCategory\n    };\n  }\n};","map":{"version":3,"names":["useCategoryStore","onMounted","computed","ref","name","setup","categoryStore","category","newCategory","editId","editName","addNewCategory","value","trim","addCategory","startEdit","cat","id","updateCategory","deleteCategory","isLoaded","fetchCategories"],"sources":["D:\\GitHub\\chat\\vue3\\src\\components\\tooles\\category\\CategorySettingList.vue"],"sourcesContent":["<template>\r\n  <div class=\"category-settings\">\r\n    <h2>مدیریت دسته‌بندی‌ها</h2>\r\n\r\n    <!-- فرم افزودن -->\r\n    <form @submit.prevent=\"addNewCategory\" class=\"category-form\">\r\n      <input v-model=\"newCategory\" placeholder=\"نام دسته‌بندی\" />\r\n      <button type=\"submit\">افزودن</button>\r\n    </form>\r\n\r\n    <!-- لیست دسته‌بندی‌ها -->\r\n    <div v-if=\"category.loading\">در حال بارگذاری...</div>\r\n    <ul v-else>\r\n      <li v-for=\"cat in category.categories\" :key=\"cat.id\">\r\n        <span v-if=\"editId !== cat.id\">{{ cat.name }}</span>\r\n        <input\r\n          v-else\r\n          v-model=\"editName\"\r\n          @keyup.enter=\"updateCategory(cat.id)\"\r\n        />\r\n        <button @click=\"startEdit(cat)\">ویرایش</button>\r\n        <button @click=\"deleteCategory(cat.id)\">حذف</button>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useCategoryStore } from '@/stores/category'\r\nimport { onMounted, computed, ref } from 'vue'\r\n\r\nexport default {\r\n  name: 'CategorySettings',\r\n  setup() {\r\n    const categoryStore = useCategoryStore()\r\n    const category = computed(() => categoryStore)\r\n\r\n    const newCategory = ref('')\r\n    const editId = ref(null)\r\n    const editName = ref('')\r\n\r\n    const addNewCategory = async () => {\r\n      if (!newCategory.value.trim()) return\r\n      await categoryStore.addCategory(newCategory.value.trim())\r\n      newCategory.value = ''\r\n    }\r\n\r\n    const startEdit = (cat) => {\r\n      editId.value = cat.id\r\n      editName.value = cat.name\r\n    }\r\n\r\n    const updateCategory = async (id) => {\r\n      if (!editName.value.trim()) return\r\n      await categoryStore.updateCategory(id, editName.value.trim())\r\n      editId.value = null\r\n      editName.value = ''\r\n    }\r\n\r\n    const deleteCategory = async (id) => {\r\n      await categoryStore.deleteCategory(id)\r\n    }\r\n\r\n    onMounted(() => {\r\n      if (!categoryStore.isLoaded) {\r\n        categoryStore.fetchCategories()\r\n      }\r\n    })\r\n\r\n    return {\r\n      category,\r\n      newCategory,\r\n      editId,\r\n      editName,\r\n      addNewCategory,\r\n      startEdit,\r\n      updateCategory,\r\n      deleteCategory\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.category-settings {\r\n  max-width: 500px;\r\n  margin: auto;\r\n  padding: 20px;\r\n}\r\n.category-form {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-bottom: 15px;\r\n}\r\n.category-form input {\r\n  flex: 1;\r\n}\r\nul {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\nli {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  margin: 5px 0;\r\n}\r\n</style>\r\n"],"mappings":"AA4BA,SAASA,gBAAe,QAAS,mBAAkB;AACnD,SAASC,SAAS,EAAEC,QAAQ,EAAEC,GAAE,QAAS,KAAI;AAE7C,eAAe;EACbC,IAAI,EAAE,kBAAkB;EACxBC,KAAKA,CAAA,EAAG;IACN,MAAMC,aAAY,GAAIN,gBAAgB,CAAC;IACvC,MAAMO,QAAO,GAAIL,QAAQ,CAAC,MAAMI,aAAa;IAE7C,MAAME,WAAU,GAAIL,GAAG,CAAC,EAAE;IAC1B,MAAMM,MAAK,GAAIN,GAAG,CAAC,IAAI;IACvB,MAAMO,QAAO,GAAIP,GAAG,CAAC,EAAE;IAEvB,MAAMQ,cAAa,GAAI,MAAAA,CAAA,KAAY;MACjC,IAAI,CAACH,WAAW,CAACI,KAAK,CAACC,IAAI,CAAC,CAAC,EAAE;MAC/B,MAAMP,aAAa,CAACQ,WAAW,CAACN,WAAW,CAACI,KAAK,CAACC,IAAI,CAAC,CAAC;MACxDL,WAAW,CAACI,KAAI,GAAI,EAAC;IACvB;IAEA,MAAMG,SAAQ,GAAKC,GAAG,IAAK;MACzBP,MAAM,CAACG,KAAI,GAAII,GAAG,CAACC,EAAC;MACpBP,QAAQ,CAACE,KAAI,GAAII,GAAG,CAACZ,IAAG;IAC1B;IAEA,MAAMc,cAAa,GAAI,MAAOD,EAAE,IAAK;MACnC,IAAI,CAACP,QAAQ,CAACE,KAAK,CAACC,IAAI,CAAC,CAAC,EAAE;MAC5B,MAAMP,aAAa,CAACY,cAAc,CAACD,EAAE,EAAEP,QAAQ,CAACE,KAAK,CAACC,IAAI,CAAC,CAAC;MAC5DJ,MAAM,CAACG,KAAI,GAAI,IAAG;MAClBF,QAAQ,CAACE,KAAI,GAAI,EAAC;IACpB;IAEA,MAAMO,cAAa,GAAI,MAAOF,EAAE,IAAK;MACnC,MAAMX,aAAa,CAACa,cAAc,CAACF,EAAE;IACvC;IAEAhB,SAAS,CAAC,MAAM;MACd,IAAI,CAACK,aAAa,CAACc,QAAQ,EAAE;QAC3Bd,aAAa,CAACe,eAAe,CAAC;MAChC;IACF,CAAC;IAED,OAAO;MACLd,QAAQ;MACRC,WAAW;MACXC,MAAM;MACNC,QAAQ;MACRC,cAAc;MACdI,SAAS;MACTG,cAAc;MACdC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}