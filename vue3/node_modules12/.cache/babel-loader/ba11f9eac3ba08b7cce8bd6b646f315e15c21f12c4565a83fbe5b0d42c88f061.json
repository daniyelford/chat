{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"map-wrapper\"\n};\nimport { onMounted, ref, watch } from 'vue';\nimport { BASE_URL } from '@/config';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nexport default {\n  __name: 'StaticMapWithMarkers',\n  props: {\n    center: Object,\n    // { lat: Number, lon: Number }\n    markers: Array // [{ lat: Number, lon: Number }]\n  },\n  setup(__props) {\n    const map = ref(null);\n    const markerLayer = ref(null);\n    const markerIconUrl = BASE_URL + '/assets/images/marker.svg';\n    const props = __props;\n    onMounted(() => {\n      map.value = L.map('static-map', {\n        zoomControl: false,\n        dragging: false,\n        scrollWheelZoom: false,\n        doubleClickZoom: false,\n        boxZoom: false,\n        keyboard: false,\n        tap: false,\n        touchZoom: false\n      }).setView([props.center.lat, props.center.lon], 13);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; OpenStreetMap contributors'\n      }).addTo(map.value);\n      markerLayer.value = L.layerGroup().addTo(map.value);\n      drawMarkers();\n    });\n    const drawMarkers = () => {\n      markerLayer.value.clearLayers();\n      props.markers.forEach(pos => {\n        L.marker([pos.lat, pos.lon], {\n          icon: L.icon({\n            iconUrl: markerIconUrl,\n            iconSize: [32, 32],\n            iconAnchor: [16, 32]\n          })\n        }).addTo(markerLayer.value);\n      });\n    };\n    watch(() => props.markers, drawMarkers, {\n      deep: true\n    });\n    watch(() => props.center, val => {\n      if (val && map.value) {\n        map.value.setView([val.lat, val.lon], 13);\n      }\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, _cache[0] || (_cache[0] = [_createElementVNode(\"div\", {\n        id: \"static-map\",\n        class: \"map\"\n      }, null, -1)]));\n    };\n  }\n};","map":{"version":3,"names":["onMounted","ref","watch","BASE_URL","L","map","markerLayer","markerIconUrl","props","__props","value","zoomControl","dragging","scrollWheelZoom","doubleClickZoom","boxZoom","keyboard","tap","touchZoom","setView","center","lat","lon","tileLayer","attribution","addTo","layerGroup","drawMarkers","clearLayers","markers","forEach","pos","marker","icon","iconUrl","iconSize","iconAnchor","deep","val"],"sources":["D:/GitHub/chat/vue3/src/components/tooles/places/StaticMapWithMarkers.vue"],"sourcesContent":["<template>\r\n  <div class=\"map-wrapper\">\r\n    <div id=\"static-map\" class=\"map\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref, defineProps, watch } from 'vue'\r\nimport { BASE_URL } from '@/config'\r\nimport L from 'leaflet'\r\nimport 'leaflet/dist/leaflet.css'\r\n\r\nconst map = ref(null)\r\nconst markerLayer = ref(null)\r\nconst markerIconUrl = BASE_URL + '/assets/images/marker.svg'\r\n\r\nconst props = defineProps({\r\n  center: Object, // { lat: Number, lon: Number }\r\n  markers: Array  // [{ lat: Number, lon: Number }]\r\n})\r\n\r\nonMounted(() => {\r\n  map.value = L.map('static-map', {\r\n    zoomControl: false,\r\n    dragging: false,\r\n    scrollWheelZoom: false,\r\n    doubleClickZoom: false,\r\n    boxZoom: false,\r\n    keyboard: false,\r\n    tap: false,\r\n    touchZoom: false,\r\n  }).setView([props.center.lat, props.center.lon], 13)\r\n\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution: '&copy; OpenStreetMap contributors',\r\n  }).addTo(map.value)\r\n\r\n  markerLayer.value = L.layerGroup().addTo(map.value)\r\n  drawMarkers()\r\n})\r\n\r\nconst drawMarkers = () => {\r\n  markerLayer.value.clearLayers()\r\n  props.markers.forEach(pos => {\r\n    L.marker([pos.lat, pos.lon], {\r\n      icon: L.icon({\r\n        iconUrl: markerIconUrl,\r\n        iconSize: [32, 32],\r\n        iconAnchor: [16, 32],\r\n      })\r\n    }).addTo(markerLayer.value)\r\n  })\r\n}\r\n\r\nwatch(() => props.markers, drawMarkers, { deep: true })\r\nwatch(() => props.center, (val) => {\r\n  if (val && map.value) {\r\n    map.value.setView([val.lat, val.lon], 13)\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.map-wrapper {\r\n  width: 100%;\r\n  height: 300px;\r\n  margin-top: 1rem;\r\n}\r\n.map {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 8px;\r\n  z-index: 9;\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;AAOA,SAASA,SAAS,EAAEC,GAAgB,EAAEC,KAAK,QAAQ,KAAK;AACxD,SAASC,QAAQ,QAAQ,UAAU;AACnC,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;;;;;;;;;IAEjC,MAAMC,GAAG,GAAGJ,GAAG,CAAC,IAAI,CAAC;IACrB,MAAMK,WAAW,GAAGL,GAAG,CAAC,IAAI,CAAC;IAC7B,MAAMM,aAAa,GAAGJ,QAAQ,GAAG,2BAA2B;IAE5D,MAAMK,KAAK,GAAGC,OAGZ;IAEFT,SAAS,CAAC,MAAM;MACdK,GAAG,CAACK,KAAK,GAAGN,CAAC,CAACC,GAAG,CAAC,YAAY,EAAE;QAC9BM,WAAW,EAAE,KAAK;QAClBC,QAAQ,EAAE,KAAK;QACfC,eAAe,EAAE,KAAK;QACtBC,eAAe,EAAE,KAAK;QACtBC,OAAO,EAAE,KAAK;QACdC,QAAQ,EAAE,KAAK;QACfC,GAAG,EAAE,KAAK;QACVC,SAAS,EAAE;MACb,CAAC,CAAC,CAACC,OAAO,CAAC,CAACX,KAAK,CAACY,MAAM,CAACC,GAAG,EAAEb,KAAK,CAACY,MAAM,CAACE,GAAG,CAAC,EAAE,EAAE,CAAC;MAEpDlB,CAAC,CAACmB,SAAS,CAAC,oDAAoD,EAAE;QAChEC,WAAW,EAAE;MACf,CAAC,CAAC,CAACC,KAAK,CAACpB,GAAG,CAACK,KAAK,CAAC;MAEnBJ,WAAW,CAACI,KAAK,GAAGN,CAAC,CAACsB,UAAU,CAAC,CAAC,CAACD,KAAK,CAACpB,GAAG,CAACK,KAAK,CAAC;MACnDiB,WAAW,CAAC,CAAC;IACf,CAAC,CAAC;IAEF,MAAMA,WAAW,GAAGA,CAAA,KAAM;MACxBrB,WAAW,CAACI,KAAK,CAACkB,WAAW,CAAC,CAAC;MAC/BpB,KAAK,CAACqB,OAAO,CAACC,OAAO,CAACC,GAAG,IAAI;QAC3B3B,CAAC,CAAC4B,MAAM,CAAC,CAACD,GAAG,CAACV,GAAG,EAAEU,GAAG,CAACT,GAAG,CAAC,EAAE;UAC3BW,IAAI,EAAE7B,CAAC,CAAC6B,IAAI,CAAC;YACXC,OAAO,EAAE3B,aAAa;YACtB4B,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;YAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;UACrB,CAAC;QACH,CAAC,CAAC,CAACX,KAAK,CAACnB,WAAW,CAACI,KAAK,CAAC;MAC7B,CAAC,CAAC;IACJ,CAAC;IAEDR,KAAK,CAAC,MAAMM,KAAK,CAACqB,OAAO,EAAEF,WAAW,EAAE;MAAEU,IAAI,EAAE;IAAK,CAAC,CAAC;IACvDnC,KAAK,CAAC,MAAMM,KAAK,CAACY,MAAM,EAAGkB,GAAG,IAAK;MACjC,IAAIA,GAAG,IAAIjC,GAAG,CAACK,KAAK,EAAE;QACpBL,GAAG,CAACK,KAAK,CAACS,OAAO,CAAC,CAACmB,GAAG,CAACjB,GAAG,EAAEiB,GAAG,CAAChB,GAAG,CAAC,EAAE,EAAE,CAAC;MAC3C;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}