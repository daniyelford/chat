{"ast":null,"code":"import { createRouter, createWebHistory } from 'vue-router';\nimport LoginView from '@/views/home/LoginView.vue';\nimport RegisterView from '@/views/home/RegisterView.vue';\nimport MainDashboard from '@/views/dashboard/MainDashboard.vue';\nimport NotFoundPage from '@/components/NotFoundPage.vue';\nimport { useMenuStore } from '@/stores/menu';\nimport { useNotificationStore } from '@/stores/notification';\nimport { useSecurityStore } from '@/stores/security';\nimport { BASE_URL } from '@/config';\nconst icon = BASE_URL + '/assets/images/fav.png';\nconst routes = [{\n  path: '/',\n  name: 'login',\n  component: LoginView,\n  meta: {\n    onlyAuth: true\n  }\n}, {\n  path: '/register',\n  name: 'register',\n  component: RegisterView,\n  meta: {\n    checkHasMobileId: true,\n    onlyAuth: true\n  }\n}, {\n  path: '/dashboard',\n  name: 'dashboard',\n  component: MainDashboard,\n  meta: {\n    requiresAuth: true\n  },\n  props: {\n    view: 'dashboard'\n  }\n}, {\n  path: '/places',\n  name: 'places',\n  component: MainDashboard,\n  meta: {\n    requiresAuth: true\n  },\n  props: {\n    view: 'places'\n  }\n}, {\n  path: '/report-list',\n  name: 'report-list',\n  component: MainDashboard,\n  meta: {\n    requiresAuth: true\n  },\n  props: {\n    view: 'report-list'\n  }\n}, {\n  path: '/manage-news',\n  name: 'manage-news',\n  component: MainDashboard,\n  meta: {\n    requiresAuth: true\n  },\n  props: {\n    view: 'manage-news'\n  }\n}, {\n  path: '/user-setting',\n  name: 'user-setting',\n  component: MainDashboard,\n  meta: {\n    requiresAuth: true\n  },\n  props: {\n    view: 'user-setting'\n  }\n}, {\n  path: '/cartable',\n  name: 'cartable',\n  component: MainDashboard,\n  props: {\n    view: 'cartable'\n  },\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/show-cartable/:id',\n  name: 'show-cartable',\n  component: MainDashboard,\n  props: route => ({\n    view: 'show-cartable',\n    id: route.params.id\n  }),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/show-news/:id',\n  name: 'show-news',\n  component: MainDashboard,\n  props: route => ({\n    view: 'show-news',\n    id: route.params.id\n  }),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/:pathMatch(.*)*',\n  name: 'NotFound',\n  component: NotFoundPage\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\nrouter.beforeEach(async (to, from, next) => {\n  const security = useSecurityStore();\n  if (to.name) {\n    document.title = to.name;\n  }\n  const link = document.querySelector(\"link[rel~='icon']\") || document.createElement('link');\n  link.href = icon;\n  if (to.meta.requiresAuth) {\n    const ok = await security.checkAuth();\n    if (!ok) return next('/');\n  }\n  if (to.meta.checkHasMobileId) {\n    const ok = await security.checkHasMobile();\n    if (!ok) return next('/');\n  }\n  if (to.meta.onlyAuth) {\n    const ok = await security.checkOnlyAuth();\n    if (ok) return next('/dashboard');\n  }\n  next();\n});\nrouter.afterEach(() => {\n  const menuStore = useMenuStore();\n  menuStore.close();\n  const notificationStore = useNotificationStore();\n  notificationStore.close();\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","LoginView","RegisterView","MainDashboard","NotFoundPage","useMenuStore","useNotificationStore","useSecurityStore","BASE_URL","icon","routes","path","name","component","meta","onlyAuth","checkHasMobileId","requiresAuth","props","view","route","id","params","router","history","process","env","beforeEach","to","from","next","security","document","title","link","querySelector","createElement","href","ok","checkAuth","checkHasMobile","checkOnlyAuth","afterEach","menuStore","close","notificationStore"],"sources":["D:/GitHub/chat/vue3/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\r\nimport LoginView from '@/views/home/LoginView.vue';\r\nimport RegisterView from '@/views/home/RegisterView.vue';\r\nimport MainDashboard from '@/views/dashboard/MainDashboard.vue';\r\nimport NotFoundPage from '@/components/NotFoundPage.vue';\r\nimport { useMenuStore } from '@/stores/menu'\r\nimport { useNotificationStore } from '@/stores/notification'\r\nimport { useSecurityStore } from '@/stores/security';\r\nimport { BASE_URL } from '@/config';\r\nconst icon=BASE_URL+'/assets/images/fav.png'\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'login',\r\n    component: LoginView,\r\n    meta:{onlyAuth:true}\r\n  },\r\n  {\r\n    path: '/register',\r\n    name: 'register',\r\n    component: RegisterView,\r\n    meta:{checkHasMobileId:true,onlyAuth:true}\r\n  },\r\n  {\r\n    path: '/dashboard',\r\n    name: 'dashboard',\r\n    component: MainDashboard,\r\n    meta: { requiresAuth: true },\r\n    props: { view: 'dashboard' } \r\n  },\r\n  {\r\n    path: '/places',\r\n    name: 'places',\r\n    component: MainDashboard,\r\n    meta: { requiresAuth: true },\r\n    props: { view: 'places' } \r\n  },\r\n  {\r\n    path: '/report-list',\r\n    name: 'report-list',\r\n    component: MainDashboard,\r\n    meta: { requiresAuth: true },\r\n    props: { view: 'report-list' } \r\n  },\r\n  {\r\n    path: '/manage-news',\r\n    name: 'manage-news',\r\n    component: MainDashboard,\r\n    meta: { requiresAuth: true },\r\n    props: { view: 'manage-news' } \r\n  },\r\n  {\r\n    path: '/user-setting',\r\n    name: 'user-setting',\r\n    component: MainDashboard,\r\n    meta: { requiresAuth: true },\r\n    props: { view: 'user-setting' } \r\n  },\r\n  {\r\n    path: '/cartable',\r\n    name: 'cartable',\r\n    component: MainDashboard,\r\n    props: { view: 'cartable' },\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/show-cartable/:id',\r\n    name: 'show-cartable',\r\n    component: MainDashboard,\r\n    props: route => ({ view: 'show-cartable', id: route.params.id }),\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/show-news/:id',\r\n    name: 'show-news',\r\n    component: MainDashboard,\r\n    props: route => ({ view: 'show-news', id: route.params.id }),\r\n    meta: { requiresAuth: true }\r\n  },\r\n  { \r\n    path: '/:pathMatch(.*)*', \r\n    name: 'NotFound', \r\n    component: NotFoundPage \r\n  }\r\n]\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\nrouter.beforeEach(async (to, from, next) => {\r\n  const security = useSecurityStore()\r\n  if (to.name) {\r\n    document.title = to.name;\r\n  }\r\n  const link = document.querySelector(\"link[rel~='icon']\") || document.createElement('link');\r\n  link.href = icon;\r\n  if (to.meta.requiresAuth) {\r\n    const ok = await security.checkAuth()\r\n    if (!ok) return next('/')\r\n  }\r\n  if (to.meta.checkHasMobileId) {\r\n    const ok = await security.checkHasMobile()\r\n    if (!ok) return next('/')\r\n  }\r\n  if (to.meta.onlyAuth) {\r\n    const ok = await security.checkOnlyAuth()\r\n    if (ok) return next('/dashboard')\r\n  }\r\n  next()\r\n});\r\nrouter.afterEach(() => {\r\n  const menuStore = useMenuStore()\r\n  menuStore.close()\r\n  const notificationStore=useNotificationStore()\r\n  notificationStore.close()\r\n})\r\nexport default router\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}