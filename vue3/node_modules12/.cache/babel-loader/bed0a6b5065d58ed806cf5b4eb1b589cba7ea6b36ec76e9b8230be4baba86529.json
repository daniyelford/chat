{"ast":null,"code":"import { toDisplayString as _toDisplayString } from \"vue\";\n\n// import { ref, onMounted, onUnmounted, defineProps, watch, computed } from 'vue'\n// import { useCartableStore } from '@/stores/cartable'\n// import MediaSlider from '@/components/tooles/media/MediaSlider.vue'\n// import UploaderManyMedia from '@/components/tooles/upload/UploaderManyMedia.vue'\n// import { sendApi } from '@/utils/api'\n// import moment from 'moment-jalaali'\n\nexport default {\n  __name: 'ShowCartable',\n  props: {\n    id: Number\n  },\n  setup(__props) {\n    const props = __props;\n    // const store = useCartableStore()\n    // const item = computed(() => store.getCartableById(props.id))\n    // const isModalOpen = ref(false)\n    // const description = ref('')\n    // const mediaIds = ref([])\n    // const openModal = () => {\n    //     if (item.value) {\n    //         description.value = item.value.report?.description || ''\n    //         mediaIds.value = item.value.report?.media?.map(m => m.id) || []\n    //         isModalOpen.value = true\n    //     }\n    // }\n    // const handleUploadResult = (uploaded) => {\n    //     mediaIds.value = uploaded.map(m => m.id)\n    // }\n    // const submitForm = async () => {\n    //     const res = await sendApi({\n    //         control: 'news',\n    //         action: 'edit_report',\n    //         data: {\n    //             id: props.id,\n    //             description: description.value,\n    //             media_id: mediaIds.value,\n    //         }\n    //     })\n    //     if (res.status === 'success') {\n    //         alert('گزارش ذخیره شد')\n    //         await store.fetchCartables()\n    //         isModalOpen.value = false\n    //     } else {\n    //         alert('خطا: ' + res.message)\n    //     }\n    // }\n    // onMounted(async () => {\n    //     if (!store.allItems.length) {\n    //         await store.fetchCartables()\n    //     }\n    //     store.startPolling()\n    // })\n    // onUnmounted(() => store.stopPolling())\n    // watch(() => props.id, async () => {\n    //     if (!store.allItems.length) {\n    //         await store.fetchCartables()\n    //     }\n    // })\n\n    return (_ctx, _cache) => {\n      return _toDisplayString(props.id);\n    };\n  }\n};","map":{"version":3,"names":["props","__props"],"sources":["D:/GitHub/ci3-vue3/vue3/src/components/dashboard/pagesContent/ShowCartable.vue"],"sourcesContent":["<!-- <template>\r\n    <div v-if=\"!item\">در حال بارگذاری یا موردی یافت نشد</div>\r\n    <div v-else class=\"cartable-details\">\r\n        <section class=\"news-section\">\r\n            <div class=\"news-header\">\r\n                <div v-if=\"item.has_rule\" class=\"user-info over-news\">\r\n                    <img v-if=\"item.user?.image\" :src=\"item.user.image\" class=\"avatar\" alt=\"User\" />\r\n                    <div class=\"user\">\r\n                        <strong>{{ item.user.name }} {{ item.user.family }}</strong>\r\n                        <a v-if=\"item.user?.phone\" :href=\"`tel:${item.user.phone}`\">\r\n                            <svg height=\"20\" width=\"20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0,0,256,256\" data-v-ac41ac96=\"\"><g fill=\"none\" fill-rule=\"nonzero\" stroke=\"none\" stroke-width=\"1\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\" stroke-miterlimit=\"10\" stroke-dasharray=\"\" stroke-dashoffset=\"0\" font-family=\"none\" font-weight=\"none\" font-size=\"none\" text-anchor=\"none\" style=\"mix-blend-mode:normal;\" data-v-ac41ac96=\"\"><g transform=\"scale(4,4)\" data-v-ac41ac96=\"\"><path d=\"M1,32c0,-17.1 13.9,-31 31,-31c17.1,0 31,13.9 31,31c0,17.1 -13.9,31 -31,31c-17.1,0 -31,-13.9 -31,-31z\" fill=\"#3ec81c\" data-v-ac41ac96=\"\"></path><path d=\"M43.1,51.4c-0.7,0 -1.3,-0.1 -1.9,-0.4c-3.6,-1.6 -10.6,-5.1 -16.8,-11.3c-6.2,-6.2 -9.8,-13.3 -11.4,-16.9c-0.8,-1.8 -0.4,-3.9 1.1,-5.4l3.8,-3.8c0.5,-0.5 1.1,-0.9 1.8,-1c1,-0.2 2,0.2 2.7,0.9l4.9,4.9c1.3,1.3 1.3,3.4 0,4.8l-3.9,3.9c-0.4,0.4 -0.5,1 -0.3,1.5c0.7,1.5 2.3,4.6 5,7.3c2.7,2.7 5.8,4.3 7.3,5c0.5,0.2 1.1,0.1 1.5,-0.3l4,-4c0.5,-0.5 1,-0.8 1.7,-0.9c1,-0.2 2,0.1 2.8,0.9l5.1,5.1c1.2,1.2 1.2,3.2 0,4.4l-3.9,3.9c-0.9,0.9 -2.2,1.4 -3.5,1.4z\" fill=\"#54e6eb\" data-v-ac41ac96=\"\"></path></g></g></svg>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <MediaSlider v-if=\"item.news?.media?.length\" :medias=\"item.news.media\" />\r\n            <h2>{{ item.news.description }}</h2>\r\n            <div v-if=\"item.news.address?.address\">\r\n                {{ item.news.address.address }}\r\n            </div>\r\n        </section>\r\n        <section class=\"report-section\">\r\n            <div v-if=\"!item.has_rule\" class=\"user-info over-report\">\r\n                <img v-if=\"item.user?.image\" :src=\"item.user.image\" class=\"avatar\" />\r\n                <div class=\"user\">\r\n                    <strong>{{ item.user.name }} {{ item.user.family }}</strong>\r\n                    <a v-if=\"item.user?.phone\" :href=\"`tel:${item.user.phone}`\">\r\n                        <svg height=\"20\" width=\"20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0,0,256,256\" data-v-ac41ac96=\"\"><g fill=\"none\" fill-rule=\"nonzero\" stroke=\"none\" stroke-width=\"1\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\" stroke-miterlimit=\"10\" stroke-dasharray=\"\" stroke-dashoffset=\"0\" font-family=\"none\" font-weight=\"none\" font-size=\"none\" text-anchor=\"none\" style=\"mix-blend-mode:normal;\" data-v-ac41ac96=\"\"><g transform=\"scale(4,4)\" data-v-ac41ac96=\"\"><path d=\"M1,32c0,-17.1 13.9,-31 31,-31c17.1,0 31,13.9 31,31c0,17.1 -13.9,31 -31,31c-17.1,0 -31,-13.9 -31,-31z\" fill=\"#3ec81c\" data-v-ac41ac96=\"\"></path><path d=\"M43.1,51.4c-0.7,0 -1.3,-0.1 -1.9,-0.4c-3.6,-1.6 -10.6,-5.1 -16.8,-11.3c-6.2,-6.2 -9.8,-13.3 -11.4,-16.9c-0.8,-1.8 -0.4,-3.9 1.1,-5.4l3.8,-3.8c0.5,-0.5 1.1,-0.9 1.8,-1c1,-0.2 2,0.2 2.7,0.9l4.9,4.9c1.3,1.3 1.3,3.4 0,4.8l-3.9,3.9c-0.4,0.4 -0.5,1 -0.3,1.5c0.7,1.5 2.3,4.6 5,7.3c2.7,2.7 5.8,4.3 7.3,5c0.5,0.2 1.1,0.1 1.5,-0.3l4,-4c0.5,-0.5 1,-0.8 1.7,-0.9c1,-0.2 2,0.1 2.8,0.9l5.1,5.1c1.2,1.2 1.2,3.2 0,4.4l-3.9,3.9c-0.9,0.9 -2.2,1.4 -3.5,1.4z\" fill=\"#54e6eb\" data-v-ac41ac96=\"\"></path></g></g></svg>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div class=\"report-content\">\r\n                <button v-if=\"item.has_rule\" @click=\"openModal\">✏️ ویرایش گزارش</button>\r\n                <MediaSlider v-if=\"item.report?.media?.length\" :medias=\"item.report.media\" />\r\n                <h3>{{ item.report?.description || 'بدون پیوست' }}</h3>\r\n                <div class=\"times\">\r\n                    <small>ثبت: {{ moment(item.report?.created_at).format('jYYYY/jMM/jDD') }}</small>\r\n                    <small>اجرا: {{ moment(item.report?.run_time).format('jYYYY/jMM/jDD') }}</small>\r\n                </div>\r\n            </div>\r\n        </section>\r\n        <div v-if=\"isModalOpen\" class=\"modal-overlay\">\r\n            <div class=\"modal\">\r\n                <h3>پیوست گزارش</h3>\r\n                <form @submit.prevent=\"submitForm\">\r\n                    <UploaderManyMedia \r\n                    :url=\"'report_media/'\"\r\n                    :toAction=\"'report'\"\r\n                    @done=\"handleUploadResult\" \r\n                    />\r\n                    <textarea v-model=\"description\" rows=\"4\" placeholder=\"توضیحات...\" />\r\n                    <div class=\"modal-actions\">\r\n                        <button type=\"submit\">ثبت</button>\r\n                        <button @click.prevent=\"isModalOpen = false\">بستن</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template> -->\r\n<template>{{ props.id }}</template>\r\n<script setup>\r\n    import { defineProps } from 'vue';\r\n    // import { ref, onMounted, onUnmounted, defineProps, watch, computed } from 'vue'\r\n    // import { useCartableStore } from '@/stores/cartable'\r\n    // import MediaSlider from '@/components/tooles/media/MediaSlider.vue'\r\n    // import UploaderManyMedia from '@/components/tooles/upload/UploaderManyMedia.vue'\r\n    // import { sendApi } from '@/utils/api'\r\n    // import moment from 'moment-jalaali'\r\n    const props = defineProps({ id: Number })\r\n    // const store = useCartableStore()\r\n    // const item = computed(() => store.getCartableById(props.id))\r\n    // const isModalOpen = ref(false)\r\n    // const description = ref('')\r\n    // const mediaIds = ref([])\r\n    // const openModal = () => {\r\n    //     if (item.value) {\r\n    //         description.value = item.value.report?.description || ''\r\n    //         mediaIds.value = item.value.report?.media?.map(m => m.id) || []\r\n    //         isModalOpen.value = true\r\n    //     }\r\n    // }\r\n    // const handleUploadResult = (uploaded) => {\r\n    //     mediaIds.value = uploaded.map(m => m.id)\r\n    // }\r\n    // const submitForm = async () => {\r\n    //     const res = await sendApi({\r\n    //         control: 'news',\r\n    //         action: 'edit_report',\r\n    //         data: {\r\n    //             id: props.id,\r\n    //             description: description.value,\r\n    //             media_id: mediaIds.value,\r\n    //         }\r\n    //     })\r\n    //     if (res.status === 'success') {\r\n    //         alert('گزارش ذخیره شد')\r\n    //         await store.fetchCartables()\r\n    //         isModalOpen.value = false\r\n    //     } else {\r\n    //         alert('خطا: ' + res.message)\r\n    //     }\r\n    // }\r\n    // onMounted(async () => {\r\n    //     if (!store.allItems.length) {\r\n    //         await store.fetchCartables()\r\n    //     }\r\n    //     store.startPolling()\r\n    // })\r\n    // onUnmounted(() => store.stopPolling())\r\n    // watch(() => props.id, async () => {\r\n    //     if (!store.allItems.length) {\r\n    //         await store.fetchCartables()\r\n    //     }\r\n    // })\r\n</script>\r\n<style scoped>\r\n    .times{\r\n        display: flex;\r\n        flex-wrap: nowrap;\r\n        flex-direction: row;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n    }\r\n    .user{\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: flex-start;\r\n        justify-content: space-between;\r\n        flex-wrap: nowrap;\r\n        gap: 2px;\r\n    }\r\n    .cartable-details {\r\n        padding: 1rem;\r\n        direction: rtl;\r\n    }\r\n    .news-section, .report-section {\r\n        margin-bottom: 2rem;\r\n        border: 1px solid #eee;\r\n        padding: 1rem;\r\n        border-radius: 8px;\r\n    }\r\n    .user-info {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 10px;\r\n    }\r\n    .avatar {\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 50%;\r\n    }\r\n    .modal-overlay {\r\n        position: fixed;\r\n        top: 0; left: 0; right: 0; bottom: 0;\r\n        background: rgba(0,0,0,0.5);\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n    .modal {\r\n        background: white;\r\n        padding: 1.5rem;\r\n        border-radius: 10px;\r\n        width: 90%;\r\n        max-width: 500px;\r\n    }\r\n    .modal-actions {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        margin-top: 1rem;\r\n    }\r\n    textarea {\r\n        width: 100%;\r\n        margin-top: 1rem;\r\n    }\r\n</style>"],"mappings":";;AAgEI;AACA;AACA;AACA;AACA;AACA;;;;;;;;IACA,MAAMA,KAAK,GAAGC,OAA2B;IACzC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}