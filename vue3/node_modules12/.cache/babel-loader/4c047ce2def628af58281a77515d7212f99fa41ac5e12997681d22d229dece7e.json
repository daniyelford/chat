{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"map-wrapper\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"error\"\n};\nimport { ref, onMounted, watch, createApp } from 'vue';\nimport MediaSlider from '@/components/tooles/media/MediaSlider.vue';\nimport PlacePopup from '@/components/tooles/places/PlacePopup.vue';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet-routing-machine';\nimport 'leaflet-routing-machine/dist/leaflet-routing-machine.css';\nimport { ORS_API_KEY } from '@/config';\nexport default {\n  __name: 'SinglePlaceMap',\n  props: {\n    userCenter: {\n      type: Object,\n      required: true\n    },\n    place: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(__props) {\n    const props = __props;\n    const mapId = `map-${Math.random().toString(36).substring(2, 10)}`;\n    const map = ref(null);\n    const markerRef = ref(null);\n    const routingControl = ref(null);\n    const routeError = ref(null);\n    const markerIcon = L.icon({\n      iconUrl: '/assets/images/marker.svg',\n      iconSize: [32, 32],\n      iconAnchor: [16, 32]\n    });\n    function createORSRouter(apiKey, profile = 'driving-car') {\n      return {\n        route: function (waypoints, callback, context, options) {\n          if (options === 110) {\n            console.log(options);\n          }\n          const coordinates = waypoints.map(wp => [wp.latLng.lng, wp.latLng.lat]);\n          if (coordinates.length < 2) {\n            routeError.value = 'مبدا و مقصد مشخص نیستند.';\n            callback.call(context, null, []);\n            return;\n          }\n          if (coordinates[0][0] === coordinates[1][0] && coordinates[0][1] === coordinates[1][1]) {\n            routeError.value = 'شما در محل هستید.';\n            callback.call(context, null, []);\n            return;\n          }\n          fetch(`https://api.openrouteservice.org/v2/directions/${profile}/geojson`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': apiKey\n            },\n            body: JSON.stringify({\n              coordinates,\n              instructions: false\n            })\n          }).then(res => res.json()).then(data => {\n            const coords = data.features?.[0]?.geometry?.coordinates || [];\n            const latlngs = coords.map(([lng, lat]) => L.latLng(lat, lng));\n            const summary = data.features?.[0]?.properties?.summary || {};\n            const route = {\n              name: '',\n              coordinates: latlngs,\n              instructions: [],\n              summary: {\n                totalDistance: summary.distance ?? 0,\n                totalTime: summary.duration ?? 0\n              },\n              inputWaypoints: waypoints,\n              waypoints: latlngs\n            };\n            routeError.value = null;\n            callback.call(context, null, [route]);\n          }).catch(err => {\n            console.error('Routing error', err);\n            routeError.value = 'خطا در رسم مسیر.';\n            callback.call(context, err);\n          });\n        }\n      };\n    }\n    function drawRoute(from, to) {\n      if (!map.value || !from || !to) return;\n      if (routingControl.value) {\n        map.value.removeControl(routingControl.value);\n      }\n      routingControl.value = L.Routing.control({\n        waypoints: [L.latLng(from.lat, from.lon), L.latLng(to.lat, to.lon)],\n        router: createORSRouter(ORS_API_KEY),\n        addWaypoints: false,\n        draggableWaypoints: false,\n        routeWhileDragging: false,\n        show: false,\n        createMarker: () => null\n      }).addTo(map.value);\n    }\n    function initMap() {\n      if (map.value) return;\n      map.value = L.map(mapId).setView([props.place.lat, props.place.lon], 13);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; OpenStreetMap contributors'\n      }).addTo(map.value);\n      const container = document.createElement('div');\n      container.style.maxWidth = '250px';\n      const app = createApp(PlacePopup, {\n        place: props.place\n      });\n      app.component('MediaSlider', MediaSlider);\n      app.mount(container);\n      markerRef.value = L.marker([props.place.lat, props.place.lon], {\n        icon: markerIcon\n      }).addTo(map.value).bindPopup(container);\n      drawRoute(props.userCenter, props.place);\n      if (navigator.geolocation) {\n        navigator.geolocation.watchPosition(position => {\n          const lat = position.coords.latitude;\n          const lon = position.coords.longitude;\n          map.value.setView([lat, lon], 13);\n          drawRoute({\n            lat,\n            lon\n          }, props.place);\n        }, error => {\n          console.warn('GPS error', error);\n        }, {\n          enableHighAccuracy: true,\n          timeout: 5000,\n          maximumAge: 1000\n        });\n      } else {\n        console.warn('Geolocation is not supported');\n      }\n    }\n    watch(() => props.userCenter, val => {\n      if (val && val.lat && val.lon) {\n        drawRoute(val, props.place);\n      }\n    }, {\n      immediate: true\n    });\n    watch(() => props.place, val => {\n      if (val && val.lat && val.lon) {\n        map.value?.setView([val.lat, val.lon], 13);\n        if (markerRef.value) {\n          markerRef.value.setLatLng([val.lat, val.lon]);\n        } else {\n          const container = document.createElement('div');\n          container.style.maxWidth = '250px';\n          const app = createApp(PlacePopup, {\n            place: props.place\n          });\n          app.component('MediaSlider', MediaSlider);\n          app.mount(container);\n          markerRef.value = L.marker([props.place.lat, props.place.lon], {\n            icon: markerIcon\n          }).addTo(map.value).bindPopup(container);\n\n          // markerRef.value = L.marker([val.lat, val.lon], { icon: markerIcon })\n          // .addTo(map.value)\n          // .bindPopup(val.title || 'مکان مورد نظر')\n        }\n        drawRoute(props.userCenter, val);\n      }\n    }, {\n      immediate: true\n    });\n    onMounted(() => {\n      initMap();\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n        id: mapId,\n        class: \"map\"\n      }), routeError.value ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString(routeError.value), 1)) : _createCommentVNode(\"\", true)]);\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","createApp","MediaSlider","PlacePopup","L","ORS_API_KEY","props","__props","mapId","Math","random","toString","substring","map","markerRef","routingControl","routeError","markerIcon","icon","iconUrl","iconSize","iconAnchor","createORSRouter","apiKey","profile","route","waypoints","callback","context","options","console","log","coordinates","wp","latLng","lng","lat","length","value","call","fetch","method","headers","body","JSON","stringify","instructions","then","res","json","data","coords","features","geometry","latlngs","summary","properties","name","totalDistance","distance","totalTime","duration","inputWaypoints","catch","err","error","drawRoute","from","to","removeControl","Routing","control","lon","router","addWaypoints","draggableWaypoints","routeWhileDragging","show","createMarker","addTo","initMap","setView","place","tileLayer","attribution","container","document","createElement","style","maxWidth","app","component","mount","marker","bindPopup","userCenter","navigator","geolocation","watchPosition","position","latitude","longitude","warn","enableHighAccuracy","timeout","maximumAge","val","immediate","setLatLng"],"sources":["D:/GitHub/chat/vue3/src/components/tooles/places/SinglePlaceMap.vue"],"sourcesContent":["<template>\r\n    <div class=\"map-wrapper\">\r\n        <div :id=\"mapId\" class=\"map\"></div>\r\n        <div v-if=\"routeError\" class=\"error\">{{ routeError }}</div>\r\n    </div>\r\n</template>\r\n<script setup>\r\n    import { ref, onMounted, watch, createApp, defineProps } from 'vue'\r\n    import MediaSlider from '@/components/tooles/media/MediaSlider.vue'\r\n    import PlacePopup from '@/components/tooles/places/PlacePopup.vue'\r\n    import L from 'leaflet'\r\n    import 'leaflet/dist/leaflet.css'\r\n    import 'leaflet-routing-machine'\r\n    import 'leaflet-routing-machine/dist/leaflet-routing-machine.css'\r\n    import { ORS_API_KEY } from '@/config'\r\n    const props = defineProps({\r\n        userCenter: { type: Object, required: true },\r\n        place: { type: Object, required: true }\r\n    })\r\n    const mapId = `map-${Math.random().toString(36).substring(2, 10)}`\r\n    const map = ref(null)\r\n    const markerRef = ref(null)\r\n    const routingControl = ref(null)\r\n    const routeError = ref(null)\r\n    const markerIcon = L.icon({\r\n        iconUrl: '/assets/images/marker.svg',\r\n        iconSize: [32, 32],\r\n        iconAnchor: [16, 32]\r\n    })\r\n    function createORSRouter(apiKey, profile = 'driving-car') {\r\n        return {\r\n            route: function (waypoints, callback, context, options) {\r\n                if(options===110){\r\n                    console.log(options);\r\n                }\r\n                const coordinates = waypoints.map(wp => [wp.latLng.lng, wp.latLng.lat])\r\n                if (coordinates.length < 2) {\r\n                    routeError.value = 'مبدا و مقصد مشخص نیستند.'\r\n                    callback.call(context, null, [])\r\n                    return\r\n                }\r\n                if (coordinates[0][0] === coordinates[1][0] && coordinates[0][1] === coordinates[1][1]) {\r\n                    routeError.value = 'شما در محل هستید.'\r\n                    callback.call(context, null, [])\r\n                    return\r\n                }\r\n                fetch(`https://api.openrouteservice.org/v2/directions/${profile}/geojson`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': apiKey\r\n                    },\r\n                    body: JSON.stringify({\r\n                        coordinates,\r\n                        instructions: false\r\n                    })\r\n                })\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                const coords = data.features?.[0]?.geometry?.coordinates || []\r\n                const latlngs = coords.map(([lng, lat]) => L.latLng(lat, lng))\r\n                const summary = data.features?.[0]?.properties?.summary || {}\r\n                const route = {\r\n                    name: '',\r\n                    coordinates: latlngs,\r\n                    instructions: [],\r\n                    summary: {\r\n                        totalDistance: summary.distance ?? 0,\r\n                        totalTime: summary.duration ?? 0\r\n                    },\r\n                    inputWaypoints: waypoints,\r\n                    waypoints: latlngs\r\n                }\r\n                routeError.value = null\r\n                    callback.call(context, null, [route])\r\n                })\r\n                .catch(err => {\r\n                    console.error('Routing error', err)\r\n                    routeError.value = 'خطا در رسم مسیر.'\r\n                    callback.call(context, err)\r\n                })\r\n            }\r\n        }\r\n    }\r\n    function drawRoute(from, to) {\r\n        if (!map.value || !from || !to) return\r\n        if (routingControl.value) {\r\n            map.value.removeControl(routingControl.value)\r\n        }\r\n        routingControl.value = L.Routing.control({\r\n            waypoints: [\r\n                L.latLng(from.lat, from.lon),\r\n                L.latLng(to.lat, to.lon)\r\n            ],\r\n            router: createORSRouter(ORS_API_KEY),\r\n            addWaypoints: false,\r\n            draggableWaypoints: false,\r\n            routeWhileDragging: false,\r\n            show: false,\r\n            createMarker: () => null\r\n        }).addTo(map.value)\r\n    }\r\n    function initMap() {\r\n        if (map.value) return\r\n        map.value = L.map(mapId).setView([props.place.lat, props.place.lon], 13)\r\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            attribution: '&copy; OpenStreetMap contributors'\r\n        }).addTo(map.value)\r\n        const container = document.createElement('div')\r\n        container.style.maxWidth = '250px'\r\n        const app = createApp(PlacePopup, { place: props.place })\r\n        app.component('MediaSlider', MediaSlider)\r\n        app.mount(container)\r\n        markerRef.value = L.marker([props.place.lat, props.place.lon], { icon: markerIcon })\r\n            .addTo(map.value)\r\n            .bindPopup(container)\r\n        drawRoute(props.userCenter, props.place)\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.watchPosition(\r\n                position => {\r\n                    const lat = position.coords.latitude\r\n                    const lon = position.coords.longitude\r\n                    map.value.setView([lat, lon], 13)\r\n                    drawRoute({ lat, lon }, props.place)\r\n                },error => {\r\n                    console.warn('GPS error', error)\r\n                },{\r\n                    enableHighAccuracy: true,\r\n                    timeout: 5000,\r\n                    maximumAge: 1000\r\n                }\r\n            )\r\n        } else {\r\n            console.warn('Geolocation is not supported')\r\n        }\r\n    }\r\n\r\n\r\n    watch(() => props.userCenter, (val) => {\r\n        if (val && val.lat && val.lon) {\r\n            drawRoute(val, props.place)\r\n        }\r\n    }, { immediate: true })\r\n    watch(() => props.place, (val) => {\r\n        if (val && val.lat && val.lon) {\r\n        map.value?.setView([val.lat, val.lon], 13)\r\n        if (markerRef.value) {\r\n            markerRef.value.setLatLng([val.lat, val.lon])\r\n        } else {\r\n            const container = document.createElement('div')\r\n            container.style.maxWidth = '250px'\r\n\r\n            const app = createApp(PlacePopup, { place: props.place })\r\n            app.component('MediaSlider', MediaSlider)\r\n            app.mount(container)\r\n\r\n            markerRef.value = L.marker([props.place.lat, props.place.lon], { icon: markerIcon })\r\n            .addTo(map.value)\r\n            .bindPopup(container)\r\n\r\n            // markerRef.value = L.marker([val.lat, val.lon], { icon: markerIcon })\r\n            // .addTo(map.value)\r\n            // .bindPopup(val.title || 'مکان مورد نظر')\r\n        }\r\n        drawRoute(props.userCenter, val)\r\n    }\r\n    }, { immediate: true })\r\n    onMounted(() => {\r\n        initMap()\r\n    })\r\n</script>\r\n<style scoped>\r\n    .map-wrapper {\r\n        width: 100%;\r\n        height: 400px;\r\n        position: relative;\r\n    }\r\n    .map {\r\n        width: 100%;\r\n        height: 100%;\r\n        border-radius: 10px;\r\n        z-index: 1;\r\n    }\r\n    .error {\r\n        position: absolute;\r\n        bottom: 10px;\r\n        right: 10px;\r\n        background: #ffdddd;\r\n        color: #d00;\r\n        padding: 6px 12px;\r\n        border-radius: 6px;\r\n        font-size: 0.85rem;\r\n        z-index: 9999;\r\n    }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}