{"ast":null,"code":"import { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nimport { ref, watch, onMounted } from 'vue';\nimport PhoneForm from '@/components/home/PhoneLogin/PhoneForm.vue';\nimport SmsLoginForm from '@/components/home/PhoneLogin/SmsLoginForm.vue';\nexport default {\n  __name: 'PhoneLogin',\n  emits: ['validPhone'],\n  setup(__props, {\n    emit: __emit\n  }) {\n    const step = ref(1);\n    const phone = ref('');\n    const emit = __emit;\n    const savedStep = localStorage.getItem('login_step');\n    console.log(savedStep);\n    watch(step, val => localStorage.setItem('login_step', val));\n    onMounted(() => {\n      const savedPhone = localStorage.getItem('phone');\n      if (savedStep) step.value = parseInt(savedStep);\n      if (savedPhone) phone.value = savedPhone;\n    });\n    const goStep2 = val => {\n      if (val) {\n        phone.value = val;\n        step.value = 2;\n      } else {\n        step.value = 1;\n      }\n    };\n    const validPhoneNumber = val => {\n      emit('validPhone', val);\n    };\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", null, [step.value === 1 ? (_openBlock(), _createBlock(PhoneForm, {\n        key: 0,\n        onSuccess: goStep2,\n        onValid: validPhoneNumber\n      })) : step.value === 2 ? (_openBlock(), _createBlock(SmsLoginForm, {\n        key: 1,\n        phone: phone.value,\n        onBack: _cache[0] || (_cache[0] = $event => step.value = 1)\n      }, null, 8, [\"phone\"])) : _createCommentVNode(\"\", true)]);\n    };\n  }\n};","map":{"version":3,"names":["ref","watch","onMounted","PhoneForm","SmsLoginForm","step","phone","emit","__emit","savedStep","localStorage","getItem","console","log","val","setItem","savedPhone","value","parseInt","goStep2","validPhoneNumber"],"sources":["D:/GitHub/ci3-vue3/vue3/src/components/home/PhoneLogin.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <PhoneForm v-if=\" step === 1\" @success=\"goStep2\" @valid=\"validPhoneNumber\"/>\r\n    <SmsLoginForm v-else-if=\" step === 2\" :phone=\"phone\" @back=\"step = 1\"/>\r\n  </div>\r\n</template>\r\n<script setup>\r\n  import { ref,watch,onMounted,defineEmits } from 'vue'\r\n  import PhoneForm from '@/components/home/PhoneLogin/PhoneForm.vue'\r\n  import SmsLoginForm from '@/components/home/PhoneLogin/SmsLoginForm.vue'\r\n  const step=ref(1)\r\n  const phone=ref('')\r\n  const emit = defineEmits(['validPhone'])\r\n  const savedStep = localStorage.getItem('login_step')\r\n  console.log(savedStep)\r\n  watch(step, val => localStorage.setItem('login_step', val))\r\n  onMounted(() => {\r\n    const savedPhone = localStorage.getItem('phone')\r\n    if (savedStep) step.value = parseInt(savedStep)\r\n    if (savedPhone) phone.value = savedPhone\r\n  })\r\n  const goStep2=(val)=>{\r\n    if(val){\r\n      phone.value=val\r\n      step.value=2\r\n    }else{\r\n      step.value=1\r\n    }\r\n  }\r\n  const validPhoneNumber=(val)=>{\r\n    emit('validPhone', val)\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  form {\r\n    max-width: 300px;\r\n    margin: auto;\r\n  }\r\n  label,\r\n  input,\r\n  button {\r\n    display: block;\r\n    width: 100%;\r\n    margin-bottom: 10px;\r\n  }\r\n  button{\r\n    background-color: green;\r\n    color: white;\r\n    padding: 7px;\r\n    border-radius: 10px;\r\n    border: none;\r\n  }\r\n  button[disabled] {\r\n    opacity: 0.6;\r\n    background-color: rgb(143, 141, 141);\r\n    cursor: not-allowed;\r\n  }\r\n  input {\r\n    box-sizing: border-box;\r\n    padding: 7px;\r\n    border: none;\r\n    outline: none;\r\n    border-radius: 10px;\r\n    background-color: #edefff;\r\n}\r\n</style>\r\n"],"mappings":";AAOE,SAASA,GAAG,EAACC,KAAK,EAACC,SAAqB,QAAQ,KAAK;AACrD,OAAOC,SAAS,MAAM,4CAA4C;AAClE,OAAOC,YAAY,MAAM,+CAA+C;;;;;;;IACxE,MAAMC,IAAI,GAACL,GAAG,CAAC,CAAC,CAAC;IACjB,MAAMM,KAAK,GAACN,GAAG,CAAC,EAAE,CAAC;IACnB,MAAMO,IAAI,GAAGC,MAA2B;IACxC,MAAMC,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IACpDC,OAAO,CAACC,GAAG,CAACJ,SAAS,CAAC;IACtBR,KAAK,CAACI,IAAI,EAAES,GAAG,IAAIJ,YAAY,CAACK,OAAO,CAAC,YAAY,EAAED,GAAG,CAAC,CAAC;IAC3DZ,SAAS,CAAC,MAAM;MACd,MAAMc,UAAU,GAAGN,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAChD,IAAIF,SAAS,EAAEJ,IAAI,CAACY,KAAK,GAAGC,QAAQ,CAACT,SAAS,CAAC;MAC/C,IAAIO,UAAU,EAAEV,KAAK,CAACW,KAAK,GAAGD,UAAU;IAC1C,CAAC,CAAC;IACF,MAAMG,OAAO,GAAEL,GAAG,IAAG;MACnB,IAAGA,GAAG,EAAC;QACLR,KAAK,CAACW,KAAK,GAACH,GAAG;QACfT,IAAI,CAACY,KAAK,GAAC,CAAC;MACd,CAAC,MAAI;QACHZ,IAAI,CAACY,KAAK,GAAC,CAAC;MACd;IACF,CAAC;IACD,MAAMG,gBAAgB,GAAEN,GAAG,IAAG;MAC5BP,IAAI,CAAC,YAAY,EAAEO,GAAG,CAAC;IACzB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}