{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref as p, watch as v, onMounted as w, createElementBlock as i, openBlock as d, createTextVNode as k, toDisplayString as x, Fragment as b, renderList as _, withDirectives as A, normalizeClass as T, vModelText as D, nextTick as s } from \"vue\";\nconst V = {\n    class: \"otp-container\"\n  },\n  C = [\"onUpdate:modelValue\", \"placeholder\", \"onKeydown\"],\n  E = `\n  .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }\n  .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }\n  .bounce { animation: pulse 0.3s ease-in-out alternate; } \n    @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }\n  `,\n  O = {\n    __name: \"OtpInput\",\n    props: {\n      modelValue: {\n        type: String,\n        default: \"\"\n      },\n      length: {\n        type: Number,\n        default: 6\n      }\n    },\n    emits: [\"update:modelValue\"],\n    setup(m, {\n      emit: f\n    }) {\n      const u = p(\"\"),\n        c = m,\n        g = f,\n        o = p(Array.from({\n          length: c.length\n        }, (e, t) => c.modelValue[t] || \"\")),\n        h = (e, t) => {\n          const l = e.currentTarget.parentElement.children,\n            n = /^[0-9]$/.test(e.key);\n          if (!n && ![\"Backspace\", \"ArrowLeft\", \"ArrowRight\", \"Tab\"].includes(e.key)) {\n            e.preventDefault();\n            return;\n          }\n          if (n) {\n            o.value[t] = e.key, e.preventDefault(), t < o.value.length - 1 && s(() => l[t + 1].focus());\n            return;\n          }\n          if (e.key === \"Backspace\") {\n            o.value[t] = \"\", e.preventDefault(), t > 0 && s(() => l[t - 1].focus());\n            return;\n          }\n          e.key === \"ArrowLeft\" && t > 0 && s(() => l[t - 1].focus()), e.key === \"ArrowRight\" && t < o.value.length - 1 && s(() => l[t + 1].focus());\n        };\n      async function y(e = 6e4) {\n        if (!(\"OTPCredential\" in window)) return;\n        const t = new AbortController(),\n          l = t.signal;\n        setTimeout(() => t.abort(), e);\n        try {\n          const n = await navigator.credentials.get({\n            otp: {\n              transport: [\"sms\"]\n            },\n            signal: l\n          });\n          n?.code ? (n.code.split(\"\").forEach((a, r) => {\n            r < c.length && (o.value[r] = a);\n          }), s(() => {\n            const a = document.querySelectorAll(\".otp-container input\"),\n              r = Math.min(n.code.length, c.length) - 1;\n            a[r] && a[r].focus();\n          })) : u.value = \"empty content\";\n        } catch (n) {\n          u.value = n.message, console.warn(\"OTP AutoFill failed:\", n.message);\n        }\n      }\n      return v(o, () => {\n        g(\"update:modelValue\", o.value.join(\"\"));\n      }, {\n        deep: !0\n      }), w(() => {\n        const e = document.createElement(\"style\");\n        e.textContent = E, document.head.appendChild(e), y();\n      }), (e, t) => (d(), i(\"div\", V, [k(x(u.value ?? \"\") + \" \", 1), (d(!0), i(b, null, _(o.value, (l, n) => A((d(), i(\"input\", {\n        key: n,\n        type: \"text\",\n        class: T([\"digit-box\", {\n          bounce: l !== \"\"\n        }]),\n        \"onUpdate:modelValue\": a => o.value[n] = a,\n        maxlength: \"1\",\n        placeholder: o.value[n] ?? 0,\n        onKeydown: a => h(a, n)\n      }, null, 42, C)), [[D, o.value[n]]])), 128))]));\n    }\n  };\nexport { O as default };","map":{"version":3,"names":["ref","p","watch","v","onMounted","w","createElementBlock","i","openBlock","d","createTextVNode","k","toDisplayString","x","Fragment","b","renderList","_","withDirectives","A","normalizeClass","T","vModelText","D","nextTick","s","V","class","C","E","O","__name","props","modelValue","type","String","default","length","Number","emits","setup","m","emit","f","u","c","g","o","Array","from","e","t","h","l","currentTarget","parentElement","children","n","test","key","includes","preventDefault","value","focus","y","window","AbortController","signal","setTimeout","abort","navigator","credentials","get","otp","transport","code","split","forEach","a","r","document","querySelectorAll","Math","min","message","console","warn","join","deep","createElement","textContent","head","appendChild","bounce","maxlength","placeholder","onKeydown"],"sources":["D:/GitHub/vue-otp-autofill/dist/index.es.js"],"sourcesContent":["import { ref as p, watch as v, onMounted as w, createElementBlock as i, openBlock as d, createTextVNode as k, toDisplayString as x, Fragment as b, renderList as _, withDirectives as A, normalizeClass as T, vModelText as D, nextTick as s } from \"vue\";\nconst V = { class: \"otp-container\" }, C = [\"onUpdate:modelValue\", \"placeholder\", \"onKeydown\"], E = `\n  .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }\n  .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }\n  .bounce { animation: pulse 0.3s ease-in-out alternate; } \n    @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }\n  `, O = {\n  __name: \"OtpInput\",\n  props: {\n    modelValue: { type: String, default: \"\" },\n    length: { type: Number, default: 6 }\n  },\n  emits: [\"update:modelValue\"],\n  setup(m, { emit: f }) {\n    const u = p(\"\"), c = m, g = f, o = p(Array.from({ length: c.length }, (e, t) => c.modelValue[t] || \"\")), h = (e, t) => {\n      const l = e.currentTarget.parentElement.children, n = /^[0-9]$/.test(e.key);\n      if (!n && ![\"Backspace\", \"ArrowLeft\", \"ArrowRight\", \"Tab\"].includes(e.key)) {\n        e.preventDefault();\n        return;\n      }\n      if (n) {\n        o.value[t] = e.key, e.preventDefault(), t < o.value.length - 1 && s(() => l[t + 1].focus());\n        return;\n      }\n      if (e.key === \"Backspace\") {\n        o.value[t] = \"\", e.preventDefault(), t > 0 && s(() => l[t - 1].focus());\n        return;\n      }\n      e.key === \"ArrowLeft\" && t > 0 && s(() => l[t - 1].focus()), e.key === \"ArrowRight\" && t < o.value.length - 1 && s(() => l[t + 1].focus());\n    };\n    async function y(e = 6e4) {\n      if (!(\"OTPCredential\" in window)) return;\n      const t = new AbortController(), l = t.signal;\n      setTimeout(() => t.abort(), e);\n      try {\n        const n = await navigator.credentials.get({\n          otp: { transport: [\"sms\"] },\n          signal: l\n        });\n        n?.code ? (n.code.split(\"\").forEach((a, r) => {\n          r < c.length && (o.value[r] = a);\n        }), s(() => {\n          const a = document.querySelectorAll(\".otp-container input\"), r = Math.min(n.code.length, c.length) - 1;\n          a[r] && a[r].focus();\n        })) : u.value = \"empty content\";\n      } catch (n) {\n        u.value = n.message, console.warn(\"OTP AutoFill failed:\", n.message);\n      }\n    }\n    return v(o, () => {\n      g(\"update:modelValue\", o.value.join(\"\"));\n    }, { deep: !0 }), w(() => {\n      const e = document.createElement(\"style\");\n      e.textContent = E, document.head.appendChild(e), y();\n    }), (e, t) => (d(), i(\"div\", V, [\n      k(x(u.value ?? \"\") + \" \", 1),\n      (d(!0), i(b, null, _(o.value, (l, n) => A((d(), i(\"input\", {\n        key: n,\n        type: \"text\",\n        class: T([\"digit-box\", { bounce: l !== \"\" }]),\n        \"onUpdate:modelValue\": (a) => o.value[n] = a,\n        maxlength: \"1\",\n        placeholder: o.value[n] ?? 0,\n        onKeydown: (a) => h(a, n)\n      }, null, 42, C)), [\n        [D, o.value[n]]\n      ])), 128))\n    ]));\n  }\n};\nexport {\n  O as default\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}