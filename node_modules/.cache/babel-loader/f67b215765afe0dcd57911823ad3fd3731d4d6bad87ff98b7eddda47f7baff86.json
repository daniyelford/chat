{"ast":null,"code":"import { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createBlock as _createBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"cartable-inner\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n  key: 1,\n  class: \"user-avatar\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"#000000\",\n  \"enable-background\": \"new 0 0 24 24\",\n  viewBox: \"0 0 24 24\"\n};\nconst _hoisted_5 = [\"href\"];\nconst _hoisted_6 = {\n  class: \"news-description\"\n};\nconst _hoisted_7 = {\n  key: 1,\n  class: \"address\"\n};\nimport { ref, computed, onMounted, onUnmounted, nextTick } from 'vue';\nimport { useCartableStore } from '@/stores/cartable';\nimport MediaSlider from '@/components/tooles/media/MediaSlider.vue';\nconst perPage = 5;\nexport default {\n  __name: 'AllCartables',\n  setup(__props) {\n    const store = useCartableStore();\n    const scrollContainer = ref(null);\n    const currentPage = ref(1);\n    const paginatedItems = computed(() => store.allItems.slice(0, currentPage.value * perPage));\n    const hasMore = computed(() => store.allItems.length > paginatedItems.value.length);\n    const loadMore = async () => {\n      currentPage.value++;\n      await nextTick();\n      scrollContainer.value?.scrollTo({\n        top: scrollContainer.value.scrollHeight,\n        behavior: 'smooth'\n      });\n    };\n    onMounted(() => {\n      store.startPolling();\n    });\n    onUnmounted(() => {\n      store.stopPolling();\n    });\n    return (_ctx, _cache) => {\n      const _component_RouterLink = _resolveComponent(\"RouterLink\");\n      return _unref(store).loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \"در حال بارگذاری...\")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(paginatedItems.value, (item, index) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: index,\n          class: \"cartable\"\n        }, [_createElementVNode(\"div\", {\n          class: \"user-info\",\n          ref_for: true,\n          ref_key: \"scrollContainer\",\n          ref: scrollContainer\n        }, [_createElementVNode(\"div\", null, [item.user?.image ? (_openBlock(), _createElementBlock(\"img\", {\n          key: 0,\n          src: item.user.image,\n          alt: \"User Image\",\n          class: \"user-avatar\"\n        }, null, 8, _hoisted_3)) : (_openBlock(), _createElementBlock(\"svg\", _hoisted_4, _cache[0] || (_cache[0] = [_createElementVNode(\"g\", null, [_createElementVNode(\"rect\", {\n          fill: \"none\",\n          height: \"24\",\n          width: \"24\"\n        })], -1), _createElementVNode(\"g\", null, [_createElementVNode(\"path\", {\n          d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z\"\n        })], -1)]))), _createElementVNode(\"strong\", null, _toDisplayString(item.user?.name) + \" \" + _toDisplayString(item.user?.family), 1)]), item.user?.phone ? (_openBlock(), _createElementBlock(\"a\", {\n          key: 0,\n          href: `tel:${item.user.phone}`\n        }, _cache[1] || (_cache[1] = [_createStaticVNode(\"<svg version=\\\"1.1\\\" class=\\\"tooles\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"0,0,256,256\\\" data-v-ac41ac96=\\\"\\\" data-v-8187de10><g fill=\\\"none\\\" fill-rule=\\\"nonzero\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" stroke-linecap=\\\"butt\\\" stroke-linejoin=\\\"miter\\\" stroke-miterlimit=\\\"10\\\" stroke-dasharray=\\\"\\\" stroke-dashoffset=\\\"0\\\" font-family=\\\"none\\\" font-weight=\\\"none\\\" font-size=\\\"none\\\" text-anchor=\\\"none\\\" style=\\\"mix-blend-mode:normal;\\\" data-v-ac41ac96=\\\"\\\" data-v-8187de10><g transform=\\\"scale(4,4)\\\" data-v-ac41ac96=\\\"\\\" data-v-8187de10><path d=\\\"M1,32c0,-17.1 13.9,-31 31,-31c17.1,0 31,13.9 31,31c0,17.1 -13.9,31 -31,31c-17.1,0 -31,-13.9 -31,-31z\\\" fill=\\\"#3ec81c\\\" data-v-ac41ac96=\\\"\\\" data-v-8187de10></path><path d=\\\"M43.1,51.4c-0.7,0 -1.3,-0.1 -1.9,-0.4c-3.6,-1.6 -10.6,-5.1 -16.8,-11.3c-6.2,-6.2 -9.8,-13.3 -11.4,-16.9c-0.8,-1.8 -0.4,-3.9 1.1,-5.4l3.8,-3.8c0.5,-0.5 1.1,-0.9 1.8,-1c1,-0.2 2,0.2 2.7,0.9l4.9,4.9c1.3,1.3 1.3,3.4 0,4.8l-3.9,3.9c-0.4,0.4 -0.5,1 -0.3,1.5c0.7,1.5 2.3,4.6 5,7.3c2.7,2.7 5.8,4.3 7.3,5c0.5,0.2 1.1,0.1 1.5,-0.3l4,-4c0.5,-0.5 1,-0.8 1.7,-0.9c1,-0.2 2,0.1 2.8,0.9l5.1,5.1c1.2,1.2 1.2,3.2 0,4.4l-3.9,3.9c-0.9,0.9 -2.2,1.4 -3.5,1.4z\\\" fill=\\\"#54e6eb\\\" data-v-ac41ac96=\\\"\\\" data-v-8187de10></path></g></g></svg>\", 1)]), 8, _hoisted_5)) : _createCommentVNode(\"\", true)], 512), item.news?.media?.length ? (_openBlock(), _createBlock(MediaSlider, {\n          key: 0,\n          medias: item.news.media\n        }, null, 8, [\"medias\"])) : _createCommentVNode(\"\", true), _createElementVNode(\"p\", _hoisted_6, _toDisplayString(item.news?.description), 1), item.news?.address?.address ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \" موقعیت: \" + _toDisplayString(item.news.address.address), 1)) : _createCommentVNode(\"\", true), item.id ? (_openBlock(), _createBlock(_component_RouterLink, {\n          key: 2,\n          class: \"send\",\n          to: {\n            path: `/show-cartable/${item.id}`\n          }\n        }, {\n          default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\" گزارش \")])),\n          _: 2,\n          __: [2]\n        }, 1032, [\"to\"])) : _createCommentVNode(\"\", true)]);\n      }), 128)), hasMore.value ? (_openBlock(), _createElementBlock(\"button\", {\n        key: 0,\n        onClick: loadMore\n      }, \"موارد بیشتر\")) : _createCommentVNode(\"\", true)]));\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onUnmounted","nextTick","useCartableStore","MediaSlider","perPage","store","scrollContainer","currentPage","paginatedItems","allItems","slice","value","hasMore","length","loadMore","scrollTo","top","scrollHeight","behavior","startPolling","stopPolling"],"sources":["D:/GitHub/ci3-vue3/vue3/src/components/dashboard/pagesContent/AllCartables.vue"],"sourcesContent":["<template>\r\n    <div v-if=\"store.loading\" class=\"loading\">در حال بارگذاری...</div>\r\n    <div v-else class=\"cartable-inner\">\r\n        <div v-for=\"(item, index) in paginatedItems\" :key=\"index\" class=\"cartable\">\r\n            <div class=\"user-info\" ref=\"scrollContainer\">\r\n                <div>\r\n                    <img v-if=\"item.user?.image\" :src=\"item.user.image\" alt=\"User Image\" class=\"user-avatar\"/>\r\n                    <svg v-else class=\"user-avatar\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" enable-background=\"new 0 0 24 24\" viewBox=\"0 0 24 24\"><g><rect fill=\"none\" height=\"24\" width=\"24\"/></g><g><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z\"/></g></svg>\r\n                    <strong>{{ item.user?.name }} {{ item.user?.family }}</strong>\r\n                </div>\r\n                <a v-if=\"item.user?.phone\" :href=\"`tel:${item.user.phone}`\">\r\n                    <svg version=\"1.1\" class=\"tooles\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0,0,256,256\" data-v-ac41ac96=\"\"><g fill=\"none\" fill-rule=\"nonzero\" stroke=\"none\" stroke-width=\"1\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\" stroke-miterlimit=\"10\" stroke-dasharray=\"\" stroke-dashoffset=\"0\" font-family=\"none\" font-weight=\"none\" font-size=\"none\" text-anchor=\"none\" style=\"mix-blend-mode:normal;\" data-v-ac41ac96=\"\"><g transform=\"scale(4,4)\" data-v-ac41ac96=\"\"><path d=\"M1,32c0,-17.1 13.9,-31 31,-31c17.1,0 31,13.9 31,31c0,17.1 -13.9,31 -31,31c-17.1,0 -31,-13.9 -31,-31z\" fill=\"#3ec81c\" data-v-ac41ac96=\"\"></path><path d=\"M43.1,51.4c-0.7,0 -1.3,-0.1 -1.9,-0.4c-3.6,-1.6 -10.6,-5.1 -16.8,-11.3c-6.2,-6.2 -9.8,-13.3 -11.4,-16.9c-0.8,-1.8 -0.4,-3.9 1.1,-5.4l3.8,-3.8c0.5,-0.5 1.1,-0.9 1.8,-1c1,-0.2 2,0.2 2.7,0.9l4.9,4.9c1.3,1.3 1.3,3.4 0,4.8l-3.9,3.9c-0.4,0.4 -0.5,1 -0.3,1.5c0.7,1.5 2.3,4.6 5,7.3c2.7,2.7 5.8,4.3 7.3,5c0.5,0.2 1.1,0.1 1.5,-0.3l4,-4c0.5,-0.5 1,-0.8 1.7,-0.9c1,-0.2 2,0.1 2.8,0.9l5.1,5.1c1.2,1.2 1.2,3.2 0,4.4l-3.9,3.9c-0.9,0.9 -2.2,1.4 -3.5,1.4z\" fill=\"#54e6eb\" data-v-ac41ac96=\"\"></path></g></g></svg>\r\n                </a>\r\n            </div>\r\n            <MediaSlider v-if=\"item.news?.media?.length\" :medias=\"item.news.media\" />\r\n            <p class=\"news-description\">{{ item.news?.description }}</p>\r\n            <div v-if=\"item.news?.address?.address\" class=\"address\">\r\n                موقعیت: {{ item.news.address.address }}\r\n            </div>\r\n            <RouterLink class=\"send\" v-if=\"item.id\" :to=\"{ path: `/show-cartable/${item.id}` }\">\r\n                گزارش\r\n            </RouterLink>\r\n        </div>\r\n        <button v-if=\"hasMore\" @click=\"loadMore\">موارد بیشتر</button>\r\n    </div>\r\n</template>\r\n<script setup>\r\n    import { ref, computed, onMounted, onUnmounted, nextTick } from 'vue'\r\n    import { useCartableStore } from '@/stores/cartable'\r\n    import MediaSlider from '@/components/tooles/media/MediaSlider.vue'\r\n    const store = useCartableStore()\r\n    const scrollContainer = ref(null)\r\n    const currentPage = ref(1)\r\n    const perPage = 5\r\n    const paginatedItems = computed(() =>\r\n        store.allItems.slice(0, currentPage.value * perPage)\r\n    )\r\n    const hasMore = computed(() =>\r\n        store.allItems.length > paginatedItems.value.length\r\n    )\r\n    const loadMore = async () => {\r\n        currentPage.value++\r\n        await nextTick()\r\n        scrollContainer.value?.scrollTo({\r\n            top: scrollContainer.value.scrollHeight,\r\n            behavior: 'smooth'\r\n        })\r\n    }\r\n    onMounted(() => {\r\n        store.startPolling()\r\n    })\r\n    onUnmounted(() => {\r\n        store.stopPolling()\r\n    })\r\n</script>\r\n<style scoped>\r\n    .loading {\r\n        text-align: center;\r\n        font-size: 1.1rem;\r\n        padding: 2rem;\r\n        color: #555;\r\n    }\r\n    .cartable-inner {\r\n        direction: rtl;\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 1.5rem;\r\n    }\r\n    .cartable {\r\n        background-color: #ffffff;\r\n        padding: 1rem 1.2rem;\r\n        border-radius: 10px;\r\n        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.1);\r\n    }\r\n    .user-info {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        margin-bottom: 0.5rem;\r\n    }\r\n    .user-info div {\r\n        display: flex;\r\n        gap: 0.75rem;\r\n        align-items: center;\r\n    }\r\n    .user-avatar {\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 50%;\r\n        object-fit: cover;\r\n        border: 2px solid #ccc;\r\n    }\r\n    .user-info svg {\r\n        width: 20px;\r\n        height: 20px;\r\n    }\r\n    .user-info strong {\r\n        font-weight: bold;\r\n        font-size: 1rem;\r\n        color: #333;\r\n    }\r\n    .user-info small {\r\n        color: #666;\r\n        font-size: 0.9rem;\r\n    }\r\n    .news-description {\r\n        font-size: 1rem;\r\n        margin: 0.5rem 0;\r\n        color: #444;\r\n    }\r\n    .address {\r\n        font-size: 0.9rem;\r\n        color: #555;\r\n        margin-bottom: 0.5rem;\r\n        word-break: break-all;\r\n    }\r\n    button {\r\n        display: block;\r\n        margin: 1rem auto 0;\r\n        background-color: #007bff;\r\n        color: #fff;\r\n        border: none;\r\n        padding: 0.6rem 1.4rem;\r\n        font-size: 0.95rem;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        transition: background 0.3s ease;\r\n    }\r\n    button:hover {\r\n        background-color: #0056b3;\r\n    }\r\n    .send {\r\n        display: inline-block;\r\n        width: 100%;\r\n        margin-top: .5rem;\r\n        padding: 10px;\r\n        text-decoration: none;\r\n        background: #007bff;\r\n        font-weight: 500;\r\n        border-radius: 10px;\r\n        text-align: center;\r\n        color: white;\r\n    }\r\n    .send:hover {\r\n        opacity: 0.6;\r\n    }\r\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA2BI,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,QAAQ,QAAQ,KAAK;AACrE,SAASC,gBAAgB,QAAQ,mBAAmB;AACpD,OAAOC,WAAW,MAAM,2CAA2C;AAInE,MAAMC,OAAO,GAAG,CAAC;;;;IAHjB,MAAMC,KAAK,GAAGH,gBAAgB,CAAC,CAAC;IAChC,MAAMI,eAAe,GAAGT,GAAG,CAAC,IAAI,CAAC;IACjC,MAAMU,WAAW,GAAGV,GAAG,CAAC,CAAC,CAAC;IAE1B,MAAMW,cAAc,GAAGV,QAAQ,CAAC,MAC5BO,KAAK,CAACI,QAAQ,CAACC,KAAK,CAAC,CAAC,EAAEH,WAAW,CAACI,KAAK,GAAGP,OAAO,CACvD,CAAC;IACD,MAAMQ,OAAO,GAAGd,QAAQ,CAAC,MACrBO,KAAK,CAACI,QAAQ,CAACI,MAAM,GAAGL,cAAc,CAACG,KAAK,CAACE,MACjD,CAAC;IACD,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAY;MACzBP,WAAW,CAACI,KAAK,EAAE;MACnB,MAAMV,QAAQ,CAAC,CAAC;MAChBK,eAAe,CAACK,KAAK,EAAEI,QAAQ,CAAC;QAC5BC,GAAG,EAAEV,eAAe,CAACK,KAAK,CAACM,YAAY;QACvCC,QAAQ,EAAE;MACd,CAAC,CAAC;IACN,CAAC;IACDnB,SAAS,CAAC,MAAM;MACZM,KAAK,CAACc,YAAY,CAAC,CAAC;IACxB,CAAC,CAAC;IACFnB,WAAW,CAAC,MAAM;MACdK,KAAK,CAACe,WAAW,CAAC,CAAC;IACvB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}