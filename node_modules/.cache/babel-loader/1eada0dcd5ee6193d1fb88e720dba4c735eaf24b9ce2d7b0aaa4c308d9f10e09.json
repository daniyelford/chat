{"ast":null,"code":"import { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createBlock as _createBlock, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 1\n};\nconst _hoisted_3 = {\n  class: \"user-info\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  class: \"news-description\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"address\"\n};\nconst _hoisted_7 = {\n  key: 2,\n  class: \"report-info\"\n};\nconst _hoisted_8 = {\n  class: \"rule\"\n};\nimport { ref, computed, onMounted, onUnmounted, nextTick } from 'vue';\nimport { useCartableStore } from '@/stores/cartable';\nimport MediaSlider from '@/components/tooles/media/MediaSlider.vue';\nconst perPage = 5;\nexport default {\n  __name: 'AllCartables',\n  setup(__props) {\n    const store = useCartableStore();\n    const scrollContainer = ref(null);\n    const currentPage = ref(1);\n    const paginatedItems = computed(() => store.allItems.slice(0, currentPage.value * perPage));\n    const hasMore = computed(() => store.allItems.length > paginatedItems.value.length);\n    const loadMore = async () => {\n      currentPage.value++;\n      await nextTick();\n      scrollContainer.value?.scrollTo({\n        top: scrollContainer.value.scrollHeight,\n        behavior: 'smooth'\n      });\n    };\n    onMounted(() => {\n      store.startPolling();\n    });\n    onUnmounted(() => {\n      store.stopPolling();\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        class: \"cartable-container\",\n        ref_key: \"scrollContainer\",\n        ref: scrollContainer\n      }, [_unref(store).loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \"در حال بارگذاری...\")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(paginatedItems.value, (item, index) => {\n        return _openBlock(), _createElementBlock(\"li\", {\n          key: index,\n          class: \"cartable-item\"\n        }, [_createElementVNode(\"div\", _hoisted_3, [item.user?.image ? (_openBlock(), _createElementBlock(\"img\", {\n          key: 0,\n          src: item.user.image,\n          alt: \"User Image\",\n          class: \"user-avatar\"\n        }, null, 8, _hoisted_4)) : _createCommentVNode(\"\", true), _createElementVNode(\"strong\", null, _toDisplayString(item.user?.name) + \" \" + _toDisplayString(item.user?.family), 1), _createElementVNode(\"small\", null, _toDisplayString(item.user?.phone), 1)]), _createElementVNode(\"p\", _hoisted_5, _toDisplayString(item.news?.description), 1), item.news?.address ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \" موقعیت: \" + _toDisplayString(item.news.address.city) + \" - \" + _toDisplayString(item.news.address.address), 1)) : _createCommentVNode(\"\", true), item.news?.media?.length ? (_openBlock(), _createBlock(MediaSlider, {\n          key: 1,\n          medias: item.news.media\n        }, null, 8, [\"medias\"])) : _createCommentVNode(\"\", true), item.report ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createTextVNode(\" زمان اجرا: \" + _toDisplayString(item.report.run_time) + \" \", 1), _cache[0] || (_cache[0] = _createElementVNode(\"br\", null, null, -1)), _createTextVNode(\" توضیحات گزارش: \" + _toDisplayString(item.report.description || 'ندارد'), 1)])) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_8, \" دارای دستورالعمل: \" + _toDisplayString(item.has_rule ? 'بله' : 'خیر'), 1)]);\n      }), 128))]), hasMore.value ? (_openBlock(), _createElementBlock(\"button\", {\n        key: 0,\n        onClick: loadMore\n      }, \"موارد بیشتر\")) : _createCommentVNode(\"\", true)]))], 512);\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onUnmounted","nextTick","useCartableStore","MediaSlider","perPage","store","scrollContainer","currentPage","paginatedItems","allItems","slice","value","hasMore","length","loadMore","scrollTo","top","scrollHeight","behavior","startPolling","stopPolling"],"sources":["D:/GitHub/ci3-vue3/vue3/src/components/dashboard/pagesContent/AllCartables.vue"],"sourcesContent":["<template>\r\n  <div class=\"cartable-container\" ref=\"scrollContainer\">\r\n    <div v-if=\"store.loading\">در حال بارگذاری...</div>\r\n    <div v-else>\r\n      <ul>\r\n        <li v-for=\"(item, index) in paginatedItems\" :key=\"index\" class=\"cartable-item\">\r\n          <div class=\"user-info\">\r\n            <img\r\n              v-if=\"item.user?.image\"\r\n              :src=\"item.user.image\"\r\n              alt=\"User Image\"\r\n              class=\"user-avatar\"\r\n            />\r\n            <strong>{{ item.user?.name }} {{ item.user?.family }}</strong>\r\n            <small>{{ item.user?.phone }}</small>\r\n          </div>\r\n\r\n          <p class=\"news-description\">{{ item.news?.description }}</p>\r\n\r\n          <div v-if=\"item.news?.address\" class=\"address\">\r\n            موقعیت: {{ item.news.address.city }} - {{ item.news.address.address }}\r\n          </div>\r\n          <MediaSlider v-if=\"item.news?.media?.length\" :medias=\"item.news.media\" />\r\n          <div class=\"report-info\" v-if=\"item.report\">\r\n            زمان اجرا: {{ item.report.run_time }}\r\n            <br />\r\n            توضیحات گزارش: {{ item.report.description || 'ندارد' }}\r\n          </div>\r\n\r\n          <div class=\"rule\">\r\n            دارای دستورالعمل: {{ item.has_rule ? 'بله' : 'خیر' }}\r\n          </div>\r\n        </li>\r\n      </ul>\r\n\r\n      <button v-if=\"hasMore\" @click=\"loadMore\">موارد بیشتر</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { ref, computed, onMounted, onUnmounted, nextTick } from 'vue'\r\n    import { useCartableStore } from '@/stores/cartable'\r\n    import MediaSlider from '@/components/tooles/media/MediaSlider.vue'\r\n    const store = useCartableStore()\r\n    const scrollContainer = ref(null)\r\n    const currentPage = ref(1)\r\n    const perPage = 5\r\n    const paginatedItems = computed(() =>\r\n        store.allItems.slice(0, currentPage.value * perPage)\r\n    )\r\n    const hasMore = computed(() =>\r\n        store.allItems.length > paginatedItems.value.length\r\n    )\r\n    const loadMore = async () => {\r\n        currentPage.value++\r\n        await nextTick()\r\n        scrollContainer.value?.scrollTo({\r\n            top: scrollContainer.value.scrollHeight,\r\n            behavior: 'smooth'\r\n        })\r\n    }\r\n    onMounted(() => {\r\n        store.startPolling()\r\n    })\r\n    onUnmounted(() => {\r\n        store.stopPolling()\r\n    })\r\n</script>\r\n<style scoped>\r\n    .cartable-container {\r\n        max-height: 80vh;\r\n        overflow-y: auto;\r\n        scroll-behavior: smooth;\r\n    }\r\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyCI,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,QAAQ,QAAQ,KAAK;AACrE,SAASC,gBAAgB,QAAQ,mBAAmB;AACpD,OAAOC,WAAW,MAAM,2CAA2C;AAInE,MAAMC,OAAO,GAAG,CAAC;;;;IAHjB,MAAMC,KAAK,GAAGH,gBAAgB,CAAC,CAAC;IAChC,MAAMI,eAAe,GAAGT,GAAG,CAAC,IAAI,CAAC;IACjC,MAAMU,WAAW,GAAGV,GAAG,CAAC,CAAC,CAAC;IAE1B,MAAMW,cAAc,GAAGV,QAAQ,CAAC,MAC5BO,KAAK,CAACI,QAAQ,CAACC,KAAK,CAAC,CAAC,EAAEH,WAAW,CAACI,KAAK,GAAGP,OAAO,CACvD,CAAC;IACD,MAAMQ,OAAO,GAAGd,QAAQ,CAAC,MACrBO,KAAK,CAACI,QAAQ,CAACI,MAAM,GAAGL,cAAc,CAACG,KAAK,CAACE,MACjD,CAAC;IACD,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAY;MACzBP,WAAW,CAACI,KAAK,EAAE;MACnB,MAAMV,QAAQ,CAAC,CAAC;MAChBK,eAAe,CAACK,KAAK,EAAEI,QAAQ,CAAC;QAC5BC,GAAG,EAAEV,eAAe,CAACK,KAAK,CAACM,YAAY;QACvCC,QAAQ,EAAE;MACd,CAAC,CAAC;IACN,CAAC;IACDnB,SAAS,CAAC,MAAM;MACZM,KAAK,CAACc,YAAY,CAAC,CAAC;IACxB,CAAC,CAAC;IACFnB,WAAW,CAAC,MAAM;MACdK,KAAK,CAACe,WAAW,CAAC,CAAC;IACvB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}