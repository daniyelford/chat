{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createBlock as _createBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"card-inner\"\n};\nconst _hoisted_3 = {\n  class: \"user-info\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  key: 1,\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n};\nconst _hoisted_6 = {\n  class: \"media-inner\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"card-category\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"description\"\n};\nconst _hoisted_9 = {\n  key: 2,\n  class: \"location\"\n};\nconst _hoisted_10 = {\n  class: \"time\"\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = {\n  key: 2,\n  class: \"none-cart-error\"\n};\nconst _hoisted_13 = {\n  key: 3,\n  class: \"toast\"\n};\nimport { ref, onMounted, onBeforeUnmount, computed } from 'vue';\nimport moment from 'moment-jalaali';\nimport { useNewsStore } from '@/stores/news';\nimport { sendApi } from '@/utils/api';\nimport MediaSlider from '@/components/tooles/media/MediaSlider.vue';\nimport CalendarModal from '@/components/tooles/news/CalendarModal.vue';\nexport default {\n  __name: 'NewsCards',\n  setup(__props) {\n    const newsStore = useNewsStore();\n    const visibleCount = ref(10);\n    const loadingMore = ref(false);\n    const toastMsg = ref('');\n    const selectedNewsId = ref(null);\n    const showModal = ref(false);\n    function openCalendarModal(id) {\n      selectedNewsId.value = id;\n      showModal.value = true;\n    }\n    async function onCalendarSubmit({\n      date\n    }) {\n      const jsDate = date ? moment(date, 'jYYYY/jMM/jDD').toDate() : null;\n      const response = await sendApi({\n        action: 'add_news_to_list',\n        control: 'news',\n        data: {\n          news_id: selectedNewsId.value,\n          run_time: jsDate ?? null\n        }\n      });\n      if (response.status === 'success') {\n        showModal.value = false;\n        newsStore.fetchNews();\n      } else {\n        alert('خطا در ثبت تاریخ اجرا');\n      }\n    }\n    const visibleNews = computed(() => newsStore.cards.slice(0, visibleCount.value));\n    const canLoadMore = computed(() => {\n      return newsStore.cards.length < newsStore.total;\n    });\n    async function loadMore() {\n      if (!newsStore.isLoaded) return;\n      if (loadingMore.value) return;\n      loadingMore.value = true;\n      const prevLength = newsStore.cards.length;\n      await newsStore.fetchNews({\n        limit: 10,\n        offset: prevLength,\n        append: true\n      });\n      const newLength = newsStore.cards.length;\n      const addedCount = newLength - prevLength;\n      if (addedCount > 0) {\n        visibleCount.value += newsStore.cards.length;\n      } else {\n        showToast('خبر بیشتری وجود ندارد.');\n      }\n      loadingMore.value = false;\n    }\n    const loadMoreTrigger = ref(null);\n    let observer = null;\n    function setupIntersectionObserver() {\n      if (observer) observer.disconnect();\n      observer = new IntersectionObserver(async ([entry]) => {\n        if (entry.isIntersecting && canLoadMore.value && !loadingMore.value) {\n          await loadMore();\n        }\n      }, {\n        root: null,\n        rootMargin: '0px',\n        threshold: 1.0\n      });\n      if (loadMoreTrigger.value) {\n        observer.observe(loadMoreTrigger.value);\n      }\n    }\n    function showToast(msg) {\n      toastMsg.value = msg;\n      setTimeout(() => toastMsg.value = '', 3000);\n    }\n    let intervalId = null;\n    async function pollNews() {\n      const prevTopId = newsStore.cards.length ? newsStore.cards[0].id : 0;\n      const res = await sendApi({\n        action: 'get_news',\n        control: 'news',\n        data: {\n          limit: 5,\n          offset: 0\n        }\n      });\n      if (res.status === 'success') {\n        const newCards = res.data.filter(item => item.id > prevTopId).filter(item => !newsStore.cards.some(card => card.id === item.id)).map(item => ({\n          id: item.id,\n          description: item.description,\n          created_at: item.created_at,\n          location: {\n            city: item.city,\n            lat: item.address_lat,\n            lon: item.address_lon,\n            address: item.address\n          },\n          category: Array.isArray(item.category) ? item.category.map(category => ({\n            id: category.id,\n            title: category.title\n          })) : [],\n          user: {\n            id: item.user_account_id,\n            name: item.user_name,\n            family: item.user_family,\n            phone: item.user_phone,\n            image: item.user_image_url\n          },\n          medias: Array.isArray(item.media) ? item.media.map(media => ({\n            type: media.type,\n            url: media.url\n          })) : []\n        }));\n        if (newCards.length > 0) {\n          newsStore.cards = [...newCards, ...newsStore.cards];\n          newsStore.total += newCards.length;\n          showToast('خبر جدید رسید!');\n        }\n      }\n    }\n    function handleVisibilityChange() {\n      if (document.visibilityState === 'visible') {\n        pollNews();\n        startPolling();\n      } else {\n        stopPolling();\n      }\n    }\n    function startPolling() {\n      stopPolling();\n      intervalId = setInterval(() => {\n        pollNews();\n      }, 6000);\n    }\n    function stopPolling() {\n      if (intervalId) clearInterval(intervalId);\n      intervalId = null;\n    }\n    onMounted(async () => {\n      await newsStore.fetchNews();\n      startPolling();\n      document.addEventListener('visibilitychange', handleVisibilityChange);\n      setupIntersectionObserver();\n      setTimeout(() => {\n        if (document.body.scrollHeight <= window.innerHeight + 100) {\n          loadMore();\n        }\n      }, 500);\n    });\n    onBeforeUnmount(() => {\n      stopPolling();\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n      if (observer) observer.disconnect();\n    });\n    return (_ctx, _cache) => {\n      const _component_RouterLink = _resolveComponent(\"RouterLink\");\n      return _openBlock(), _createElementBlock(\"div\", null, [!_unref(newsStore).isLoaded ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \" در حال بارگذاری... \")) : visibleNews.value.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(visibleNews.value, card => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: card.id,\n          class: \"card\"\n        }, [_createElementVNode(\"div\", _hoisted_3, [card.user.image ? (_openBlock(), _createElementBlock(\"img\", {\n          key: 0,\n          src: card.user.image,\n          alt: \"user\"\n        }, null, 8, _hoisted_4)) : (_openBlock(), _createElementBlock(\"svg\", _hoisted_5, _cache[1] || (_cache[1] = [_createElementVNode(\"path\", {\n          d: \"M12 2C6.48 2 ... 12 20z\"\n        }, null, -1)]))), _createElementVNode(\"p\", null, _toDisplayString(card.user.name + ' ' + card.user.family), 1)]), _createElementVNode(\"div\", _hoisted_6, [card.medias.length > 0 ? (_openBlock(), _createBlock(MediaSlider, {\n          key: 0,\n          medias: card.medias\n        }, null, 8, [\"medias\"])) : _createCommentVNode(\"\", true)]), !_unref(newsStore).hasRule && card.category.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(card.category, category => {\n          return _openBlock(), _createElementBlock(\"span\", {\n            class: \"category\",\n            key: category.id\n          }, _toDisplayString(category.title), 1);\n        }), 128))])) : _createCommentVNode(\"\", true), card.description ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString(card.description), 1)) : _createCommentVNode(\"\", true), card.location?.city ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, \" 📍 \" + _toDisplayString(card.location.city), 1)) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_10, _toDisplayString(_unref(moment)(card.created_at).format('jYYYY/jMM/jDD')), 1), _createVNode(_component_RouterLink, {\n          class: \"c-d\",\n          to: {\n            path: `/show-news/${card.id}`\n          }\n        }, {\n          default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\" مشاهده \")])),\n          _: 2,\n          __: [2]\n        }, 1032, [\"to\"]), _unref(newsStore).hasRule ? (_openBlock(), _createElementBlock(\"a\", {\n          key: 3,\n          class: \"choose\",\n          onClick: $event => openCalendarModal(card.id)\n        }, \" بررسی \", 8, _hoisted_11)) : _createCommentVNode(\"\", true)]);\n      }), 128)), _createElementVNode(\"div\", {\n        ref_key: \"loadMoreTrigger\",\n        ref: loadMoreTrigger,\n        class: \"scroll-trigger\"\n      }, null, 512)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_12, \" خبری در محدوده شما وجود ندارد \")), toastMsg.value ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _toDisplayString(toastMsg.value), 1)) : _createCommentVNode(\"\", true), showModal.value ? (_openBlock(), _createBlock(CalendarModal, {\n        key: 4,\n        onClose: _cache[0] || (_cache[0] = $event => showModal.value = false),\n        onSubmit: onCalendarSubmit\n      })) : _createCommentVNode(\"\", true)]);\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","onBeforeUnmount","computed","moment","useNewsStore","sendApi","MediaSlider","CalendarModal","newsStore","visibleCount","loadingMore","toastMsg","selectedNewsId","showModal","openCalendarModal","id","value","onCalendarSubmit","date","jsDate","toDate","response","action","control","data","news_id","run_time","status","fetchNews","alert","visibleNews","cards","slice","canLoadMore","length","total","loadMore","isLoaded","prevLength","limit","offset","append","newLength","addedCount","showToast","loadMoreTrigger","observer","setupIntersectionObserver","disconnect","IntersectionObserver","entry","isIntersecting","root","rootMargin","threshold","observe","msg","setTimeout","intervalId","pollNews","prevTopId","res","newCards","filter","item","some","card","map","description","created_at","location","city","lat","address_lat","lon","address_lon","address","category","Array","isArray","title","user","user_account_id","name","user_name","family","user_family","phone","user_phone","image","user_image_url","medias","media","type","url","handleVisibilityChange","document","visibilityState","startPolling","stopPolling","setInterval","clearInterval","addEventListener","body","scrollHeight","window","innerHeight","removeEventListener"],"sources":["D:/GitHub/ci3-vue3/vue3/src/components/dashboard/pagesContent/NewsCards.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"loading\" v-if=\"!newsStore.isLoaded\">\r\n      در حال بارگذاری...\r\n    </div>\r\n    <div class=\"card-inner\" v-else-if=\"visibleNews.length > 0\">\r\n      <div v-for=\"card in visibleNews\" :key=\"card.id\" class=\"card\">\r\n        <div class=\"user-info\">\r\n          <img v-if=\"card.user.image\" :src=\"card.user.image\" alt=\"user\" />\r\n          <svg v-else xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n            <path d=\"M12 2C6.48 2 ... 12 20z\" />\r\n          </svg>\r\n          <p>{{ card.user.name + ' ' + card.user.family }}</p>\r\n        </div>\r\n\r\n        <div class=\"media-inner\">\r\n          <MediaSlider v-if=\"card.medias.length > 0\" :medias=\"card.medias\" />\r\n        </div>\r\n\r\n        <div class=\"card-category\" v-if=\"!newsStore.hasRule && card.category.length\">\r\n            <span class=\"category\" v-for=\"category in card.category\" :key=\"category.id\">\r\n                {{ category.title }}\r\n            </span>\r\n        </div>\r\n\r\n        <div class=\"description\" v-if=\"card.description\">\r\n          {{ card.description }}\r\n        </div>\r\n\r\n        <div class=\"location\" v-if=\"card.location?.city\">\r\n          📍 {{ card.location.city }}\r\n        </div>\r\n\r\n        <div class=\"time\">\r\n          {{ moment(card.created_at).format('jYYYY/jMM/jDD') }}\r\n        </div>\r\n        <RouterLink class=\"c-d\" :to=\"{ path:`/show-news/${card.id}`}\">\r\n          مشاهده\r\n        </RouterLink>\r\n        <a class=\"choose\" v-if=\"newsStore.hasRule\" @click=\"openCalendarModal(card.id)\">\r\n            بررسی\r\n        </a>\r\n      </div>\r\n      <div ref=\"loadMoreTrigger\" class=\"scroll-trigger\"></div>\r\n    </div>\r\n    <div v-else class=\"none-cart-error\">\r\n      خبری در محدوده شما وجود ندارد\r\n    </div>\r\n    <div v-if=\"toastMsg\" class=\"toast\">{{ toastMsg }}</div>\r\n        <CalendarModal\r\n        v-if=\"showModal\"\r\n        @close=\"showModal = false\"\r\n        @submit=\"onCalendarSubmit\" />\r\n  </div>\r\n</template>\r\n<script setup>\r\n    import { ref, onMounted, onBeforeUnmount, computed } from 'vue'\r\n    import moment from 'moment-jalaali'\r\n    import { useNewsStore } from '@/stores/news'\r\n    import { sendApi } from '@/utils/api'\r\n    import MediaSlider from '@/components/tooles/media/MediaSlider.vue'\r\n    import CalendarModal from '@/components/tooles/news/CalendarModal.vue'\r\n    const newsStore = useNewsStore()\r\n    const visibleCount = ref(10)\r\n    const loadingMore = ref(false)\r\n    const toastMsg = ref('')\r\n    const selectedNewsId = ref(null)\r\n    const showModal = ref(false)\r\n    function openCalendarModal(id) {\r\n        selectedNewsId.value = id\r\n        showModal.value = true\r\n    }\r\n    async function onCalendarSubmit({ date }) {\r\n        const jsDate = date ? moment(date, 'jYYYY/jMM/jDD').toDate() : null\r\n        const response = await sendApi({\r\n            action: 'add_news_to_list',\r\n            control: 'news',\r\n            data: {\r\n                news_id: selectedNewsId.value,\r\n                run_time: jsDate ?? null,\r\n            }\r\n        })\r\n        if (response.status === 'success') {\r\n            showModal.value = false\r\n            newsStore.fetchNews()\r\n        } else {\r\n            alert('خطا در ثبت تاریخ اجرا')\r\n        }\r\n    }\r\n    const visibleNews = computed(() =>\r\n        newsStore.cards.slice(0, visibleCount.value)\r\n    )\r\n    const canLoadMore = computed(() => {\r\n        return newsStore.cards.length < newsStore.total\r\n    })\r\n    async function loadMore() {\r\n        if (!newsStore.isLoaded) return\r\n        if (loadingMore.value) return\r\n        loadingMore.value = true\r\n        const prevLength = newsStore.cards.length\r\n        await newsStore.fetchNews({\r\n            limit: 10,\r\n            offset: prevLength,\r\n            append: true\r\n        })\r\n        const newLength = newsStore.cards.length\r\n        const addedCount = newLength - prevLength\r\n        if (addedCount > 0) {\r\n            visibleCount.value += newsStore.cards.length\r\n        } else {\r\n            showToast('خبر بیشتری وجود ندارد.')\r\n        }\r\n        loadingMore.value = false\r\n    }\r\n    const loadMoreTrigger = ref(null)\r\n    let observer = null\r\n    function setupIntersectionObserver() {\r\n        if (observer) observer.disconnect()\r\n        observer = new IntersectionObserver(async ([entry]) => {\r\n            if (entry.isIntersecting && canLoadMore.value && !loadingMore.value) {\r\n                await loadMore()\r\n            }\r\n        }, {\r\n            root: null,\r\n            rootMargin: '0px',\r\n            threshold: 1.0\r\n        })\r\n        if (loadMoreTrigger.value) {\r\n            observer.observe(loadMoreTrigger.value)\r\n        }\r\n    }\r\n    function showToast(msg) {\r\n        toastMsg.value = msg\r\n        setTimeout(() => (toastMsg.value = ''), 3000)\r\n    }\r\n    let intervalId = null\r\n    async function pollNews() {\r\n        const prevTopId = newsStore.cards.length ? newsStore.cards[0].id : 0\r\n        const res = await sendApi({\r\n            action: 'get_news',\r\n            control: 'news',\r\n            data: { limit: 5, offset: 0 }\r\n        })\r\n        if (res.status === 'success') {\r\n            const newCards = res.data\r\n                .filter(item => item.id > prevTopId)\r\n                .filter(item => !newsStore.cards.some(card => card.id === item.id))\r\n                .map(item => ({\r\n                    id: item.id,\r\n                    description: item.description,\r\n                    created_at: item.created_at,\r\n                    location: {\r\n                        city: item.city,\r\n                        lat: item.address_lat,\r\n                        lon: item.address_lon,\r\n                        address: item.address,\r\n                    },\r\n                    category: Array.isArray(item.category) ? item.category.map(category => ({\r\n                        id: category.id,\r\n                        title: category.title\r\n                    })) : [],\r\n                    user: {\r\n                        id: item.user_account_id,\r\n                        name: item.user_name,\r\n                        family: item.user_family,\r\n                        phone: item.user_phone,\r\n                        image: item.user_image_url,\r\n                    },\r\n                    medias: Array.isArray(item.media) ? item.media.map(media => ({\r\n                        type: media.type,\r\n                        url: media.url\r\n                    })) : []\r\n                }))\r\n            if (newCards.length > 0) {\r\n                newsStore.cards = [...newCards, ...newsStore.cards]\r\n                newsStore.total += newCards.length\r\n                showToast('خبر جدید رسید!')\r\n            }\r\n        }\r\n    }\r\n    function handleVisibilityChange() {\r\n        if (document.visibilityState === 'visible') {\r\n            pollNews()\r\n            startPolling()\r\n        } else {\r\n            stopPolling()\r\n        }\r\n    }\r\n    function startPolling() {\r\n        stopPolling()\r\n        intervalId = setInterval(() => {\r\n            pollNews()\r\n        }, 6000)\r\n    }\r\n    function stopPolling() {\r\n        if (intervalId) clearInterval(intervalId)\r\n        intervalId = null\r\n    }\r\n    onMounted(async () => {\r\n        await newsStore.fetchNews()\r\n        startPolling()\r\n        document.addEventListener('visibilitychange', handleVisibilityChange)\r\n        setupIntersectionObserver()\r\n        setTimeout(() => {\r\n            if (document.body.scrollHeight <= window.innerHeight + 100) {\r\n                loadMore()\r\n            }\r\n        }, 500)\r\n    })\r\n    onBeforeUnmount(() => {\r\n        stopPolling()\r\n        document.removeEventListener('visibilitychange', handleVisibilityChange)\r\n        if (observer) observer.disconnect()\r\n    })\r\n</script>\r\n<style scoped>\r\n    .scroll-trigger {\r\n        height: 1px;\r\n    }\r\n    .toast {\r\n        position: fixed;\r\n        bottom: 20px;\r\n        left: 20px;\r\n        background: #2ecc71;\r\n        color: white;\r\n        padding: 10px 20px;\r\n        border-radius: 8px;\r\n        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);\r\n    }\r\n    .loading,.none-cart-error{\r\n        text-align: center;\r\n        padding: 20px;\r\n        color: white;\r\n        font-size: 20px;\r\n        border-radius: 10px;\r\n        box-shadow: 0 0 10px grey;\r\n        font-weight: bold;\r\n    }\r\n    .loading{\r\n        background: rgb(16, 16, 143);\r\n    }\r\n    .none-cart-error {\r\n        background: rgb(128, 12, 12);\r\n    }\r\n    .media-inner {\r\n        background: white;\r\n        padding: 5px;\r\n    }\r\n    .location {\r\n        margin: 5px;\r\n        gap: 5px;\r\n        display: flex;\r\n        font-size: 11px;\r\n        align-items: center;\r\n    }\r\n    .location svg{\r\n        height: 20px;\r\n        width: 20px;\r\n    }\r\n    .user-info svg,.user-info img{\r\n        width: 50px;\r\n        height: 50px;\r\n        border-radius: 50px;\r\n        display: inline-block;\r\n    }\r\n    .user-info p{\r\n        display: inline-block;\r\n    }\r\n    .user-info{\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 10px;\r\n        padding: 10px;\r\n    }\r\n    .card-category {\r\n        text-align: center;\r\n        padding: 10px;\r\n        background: floralwhite;\r\n    }\r\n    .card-inner {\r\n        width: 100%;\r\n        direction: rtl;\r\n        height: 100%;\r\n        display: flex;\r\n        flex-direction: row-reverse;\r\n        flex-wrap: wrap;\r\n        align-content: flex-start;\r\n        justify-content: center;\r\n        align-items: stretch;\r\n    }\r\n    .card {\r\n        background: #f5f5f5;\r\n        width: 49%;\r\n        min-height: 300px;\r\n        margin: 0 0.5% 10px 0.5%;\r\n        border-radius: 10px;\r\n        box-shadow: 0 0 5px grey;\r\n    }\r\n    .media {\r\n        height: 150px;\r\n        width: auto;\r\n        margin: auto;\r\n    }\r\n    .media img,\r\n    .media video {\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n    .card-header {\r\n        display: flex;\r\n        flex-direction: row-reverse;\r\n        flex-wrap: nowrap;\r\n        justify-content: space-between;\r\n        align-items: stretch;\r\n        padding: 6px;\r\n    }\r\n    .description {\r\n        min-height: 50px;\r\n        padding: 10px;\r\n        width: 95%;\r\n        text-align: center;\r\n        word-wrap: break-word;\r\n    }\r\n    .time {\r\n        font-size: 10px;\r\n        padding-left: 10px;\r\n        text-align: end;\r\n        margin: 5px;\r\n    }\r\n    .choose ,.c-d {\r\n        width: 95%;\r\n        /* height: 30px; */\r\n        background: rgb(7, 71, 11);\r\n        margin: 5px auto;\r\n        text-align: center;\r\n        border-radius: 10px;\r\n        color: white;\r\n        display: block;\r\n        padding: 10px;\r\n        box-sizing: border-box;\r\n    }\r\n    .c-d {\r\n        background: #071847;\r\n        text-decoration: none;\r\n    }\r\n    @media screen and (max-width: 600px) {\r\n        .card {\r\n            width: 99%;\r\n        }\r\n    }\r\n</style>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDI,SAASA,GAAG,EAAEC,SAAS,EAAEC,eAAe,EAAEC,QAAQ,QAAQ,KAAK;AAC/D,OAAOC,MAAM,MAAM,gBAAgB;AACnC,SAASC,YAAY,QAAQ,eAAe;AAC5C,SAASC,OAAO,QAAQ,aAAa;AACrC,OAAOC,WAAW,MAAM,2CAA2C;AACnE,OAAOC,aAAa,MAAM,4CAA4C;;;;IACtE,MAAMC,SAAS,GAAGJ,YAAY,CAAC,CAAC;IAChC,MAAMK,YAAY,GAAGV,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMW,WAAW,GAAGX,GAAG,CAAC,KAAK,CAAC;IAC9B,MAAMY,QAAQ,GAAGZ,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMa,cAAc,GAAGb,GAAG,CAAC,IAAI,CAAC;IAChC,MAAMc,SAAS,GAAGd,GAAG,CAAC,KAAK,CAAC;IAC5B,SAASe,iBAAiBA,CAACC,EAAE,EAAE;MAC3BH,cAAc,CAACI,KAAK,GAAGD,EAAE;MACzBF,SAAS,CAACG,KAAK,GAAG,IAAI;IAC1B;IACA,eAAeC,gBAAgBA,CAAC;MAAEC;IAAK,CAAC,EAAE;MACtC,MAAMC,MAAM,GAAGD,IAAI,GAAGf,MAAM,CAACe,IAAI,EAAE,eAAe,CAAC,CAACE,MAAM,CAAC,CAAC,GAAG,IAAI;MACnE,MAAMC,QAAQ,GAAG,MAAMhB,OAAO,CAAC;QAC3BiB,MAAM,EAAE,kBAAkB;QAC1BC,OAAO,EAAE,MAAM;QACfC,IAAI,EAAE;UACFC,OAAO,EAAEb,cAAc,CAACI,KAAK;UAC7BU,QAAQ,EAAEP,MAAM,IAAI;QACxB;MACJ,CAAC,CAAC;MACF,IAAIE,QAAQ,CAACM,MAAM,KAAK,SAAS,EAAE;QAC/Bd,SAAS,CAACG,KAAK,GAAG,KAAK;QACvBR,SAAS,CAACoB,SAAS,CAAC,CAAC;MACzB,CAAC,MAAM;QACHC,KAAK,CAAC,uBAAuB,CAAC;MAClC;IACJ;IACA,MAAMC,WAAW,GAAG5B,QAAQ,CAAC,MACzBM,SAAS,CAACuB,KAAK,CAACC,KAAK,CAAC,CAAC,EAAEvB,YAAY,CAACO,KAAK,CAC/C,CAAC;IACD,MAAMiB,WAAW,GAAG/B,QAAQ,CAAC,MAAM;MAC/B,OAAOM,SAAS,CAACuB,KAAK,CAACG,MAAM,GAAG1B,SAAS,CAAC2B,KAAK;IACnD,CAAC,CAAC;IACF,eAAeC,QAAQA,CAAA,EAAG;MACtB,IAAI,CAAC5B,SAAS,CAAC6B,QAAQ,EAAE;MACzB,IAAI3B,WAAW,CAACM,KAAK,EAAE;MACvBN,WAAW,CAACM,KAAK,GAAG,IAAI;MACxB,MAAMsB,UAAU,GAAG9B,SAAS,CAACuB,KAAK,CAACG,MAAM;MACzC,MAAM1B,SAAS,CAACoB,SAAS,CAAC;QACtBW,KAAK,EAAE,EAAE;QACTC,MAAM,EAAEF,UAAU;QAClBG,MAAM,EAAE;MACZ,CAAC,CAAC;MACF,MAAMC,SAAS,GAAGlC,SAAS,CAACuB,KAAK,CAACG,MAAM;MACxC,MAAMS,UAAU,GAAGD,SAAS,GAAGJ,UAAU;MACzC,IAAIK,UAAU,GAAG,CAAC,EAAE;QAChBlC,YAAY,CAACO,KAAK,IAAIR,SAAS,CAACuB,KAAK,CAACG,MAAM;MAChD,CAAC,MAAM;QACHU,SAAS,CAAC,wBAAwB,CAAC;MACvC;MACAlC,WAAW,CAACM,KAAK,GAAG,KAAK;IAC7B;IACA,MAAM6B,eAAe,GAAG9C,GAAG,CAAC,IAAI,CAAC;IACjC,IAAI+C,QAAQ,GAAG,IAAI;IACnB,SAASC,yBAAyBA,CAAA,EAAG;MACjC,IAAID,QAAQ,EAAEA,QAAQ,CAACE,UAAU,CAAC,CAAC;MACnCF,QAAQ,GAAG,IAAIG,oBAAoB,CAAC,OAAO,CAACC,KAAK,CAAC,KAAK;QACnD,IAAIA,KAAK,CAACC,cAAc,IAAIlB,WAAW,CAACjB,KAAK,IAAI,CAACN,WAAW,CAACM,KAAK,EAAE;UACjE,MAAMoB,QAAQ,CAAC,CAAC;QACpB;MACJ,CAAC,EAAE;QACCgB,IAAI,EAAE,IAAI;QACVC,UAAU,EAAE,KAAK;QACjBC,SAAS,EAAE;MACf,CAAC,CAAC;MACF,IAAIT,eAAe,CAAC7B,KAAK,EAAE;QACvB8B,QAAQ,CAACS,OAAO,CAACV,eAAe,CAAC7B,KAAK,CAAC;MAC3C;IACJ;IACA,SAAS4B,SAASA,CAACY,GAAG,EAAE;MACpB7C,QAAQ,CAACK,KAAK,GAAGwC,GAAG;MACpBC,UAAU,CAAC,MAAO9C,QAAQ,CAACK,KAAK,GAAG,EAAG,EAAE,IAAI,CAAC;IACjD;IACA,IAAI0C,UAAU,GAAG,IAAI;IACrB,eAAeC,QAAQA,CAAA,EAAG;MACtB,MAAMC,SAAS,GAAGpD,SAAS,CAACuB,KAAK,CAACG,MAAM,GAAG1B,SAAS,CAACuB,KAAK,CAAC,CAAC,CAAC,CAAChB,EAAE,GAAG,CAAC;MACpE,MAAM8C,GAAG,GAAG,MAAMxD,OAAO,CAAC;QACtBiB,MAAM,EAAE,UAAU;QAClBC,OAAO,EAAE,MAAM;QACfC,IAAI,EAAE;UAAEe,KAAK,EAAE,CAAC;UAAEC,MAAM,EAAE;QAAE;MAChC,CAAC,CAAC;MACF,IAAIqB,GAAG,CAAClC,MAAM,KAAK,SAAS,EAAE;QAC1B,MAAMmC,QAAQ,GAAGD,GAAG,CAACrC,IAAI,CACpBuC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACjD,EAAE,GAAG6C,SAAS,CAAC,CACnCG,MAAM,CAACC,IAAI,IAAI,CAACxD,SAAS,CAACuB,KAAK,CAACkC,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACnD,EAAE,KAAKiD,IAAI,CAACjD,EAAE,CAAC,CAAC,CAClEoD,GAAG,CAACH,IAAI,KAAK;UACVjD,EAAE,EAAEiD,IAAI,CAACjD,EAAE;UACXqD,WAAW,EAAEJ,IAAI,CAACI,WAAW;UAC7BC,UAAU,EAAEL,IAAI,CAACK,UAAU;UAC3BC,QAAQ,EAAE;YACNC,IAAI,EAAEP,IAAI,CAACO,IAAI;YACfC,GAAG,EAAER,IAAI,CAACS,WAAW;YACrBC,GAAG,EAAEV,IAAI,CAACW,WAAW;YACrBC,OAAO,EAAEZ,IAAI,CAACY;UAClB,CAAC;UACDC,QAAQ,EAAEC,KAAK,CAACC,OAAO,CAACf,IAAI,CAACa,QAAQ,CAAC,GAAGb,IAAI,CAACa,QAAQ,CAACV,GAAG,CAACU,QAAQ,KAAK;YACpE9D,EAAE,EAAE8D,QAAQ,CAAC9D,EAAE;YACfiE,KAAK,EAAEH,QAAQ,CAACG;UACpB,CAAC,CAAC,CAAC,GAAG,EAAE;UACRC,IAAI,EAAE;YACFlE,EAAE,EAAEiD,IAAI,CAACkB,eAAe;YACxBC,IAAI,EAAEnB,IAAI,CAACoB,SAAS;YACpBC,MAAM,EAAErB,IAAI,CAACsB,WAAW;YACxBC,KAAK,EAAEvB,IAAI,CAACwB,UAAU;YACtBC,KAAK,EAAEzB,IAAI,CAAC0B;UAChB,CAAC;UACDC,MAAM,EAAEb,KAAK,CAACC,OAAO,CAACf,IAAI,CAAC4B,KAAK,CAAC,GAAG5B,IAAI,CAAC4B,KAAK,CAACzB,GAAG,CAACyB,KAAK,KAAK;YACzDC,IAAI,EAAED,KAAK,CAACC,IAAI;YAChBC,GAAG,EAAEF,KAAK,CAACE;UACf,CAAC,CAAC,CAAC,GAAG;QACV,CAAC,CAAC,CAAC;QACP,IAAIhC,QAAQ,CAAC5B,MAAM,GAAG,CAAC,EAAE;UACrB1B,SAAS,CAACuB,KAAK,GAAG,CAAC,GAAG+B,QAAQ,EAAE,GAAGtD,SAAS,CAACuB,KAAK,CAAC;UACnDvB,SAAS,CAAC2B,KAAK,IAAI2B,QAAQ,CAAC5B,MAAM;UAClCU,SAAS,CAAC,gBAAgB,CAAC;QAC/B;MACJ;IACJ;IACA,SAASmD,sBAAsBA,CAAA,EAAG;MAC9B,IAAIC,QAAQ,CAACC,eAAe,KAAK,SAAS,EAAE;QACxCtC,QAAQ,CAAC,CAAC;QACVuC,YAAY,CAAC,CAAC;MAClB,CAAC,MAAM;QACHC,WAAW,CAAC,CAAC;MACjB;IACJ;IACA,SAASD,YAAYA,CAAA,EAAG;MACpBC,WAAW,CAAC,CAAC;MACbzC,UAAU,GAAG0C,WAAW,CAAC,MAAM;QAC3BzC,QAAQ,CAAC,CAAC;MACd,CAAC,EAAE,IAAI,CAAC;IACZ;IACA,SAASwC,WAAWA,CAAA,EAAG;MACnB,IAAIzC,UAAU,EAAE2C,aAAa,CAAC3C,UAAU,CAAC;MACzCA,UAAU,GAAG,IAAI;IACrB;IACA1D,SAAS,CAAC,YAAY;MAClB,MAAMQ,SAAS,CAACoB,SAAS,CAAC,CAAC;MAC3BsE,YAAY,CAAC,CAAC;MACdF,QAAQ,CAACM,gBAAgB,CAAC,kBAAkB,EAAEP,sBAAsB,CAAC;MACrEhD,yBAAyB,CAAC,CAAC;MAC3BU,UAAU,CAAC,MAAM;QACb,IAAIuC,QAAQ,CAACO,IAAI,CAACC,YAAY,IAAIC,MAAM,CAACC,WAAW,GAAG,GAAG,EAAE;UACxDtE,QAAQ,CAAC,CAAC;QACd;MACJ,CAAC,EAAE,GAAG,CAAC;IACX,CAAC,CAAC;IACFnC,eAAe,CAAC,MAAM;MAClBkG,WAAW,CAAC,CAAC;MACbH,QAAQ,CAACW,mBAAmB,CAAC,kBAAkB,EAAEZ,sBAAsB,CAAC;MACxE,IAAIjD,QAAQ,EAAEA,QAAQ,CAACE,UAAU,CAAC,CAAC;IACvC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}