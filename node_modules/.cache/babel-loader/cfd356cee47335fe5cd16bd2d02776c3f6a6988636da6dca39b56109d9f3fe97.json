{"ast":null,"code":"import { defineStore } from 'pinia';\nimport { ref } from 'vue';\nimport { sendApi } from '@/utils/api';\nexport const usePlaceStore = defineStore('place', () => {\n  const allPlaces = ref([]);\n  const categories = ref([]);\n  const userCoordinate = ref([]);\n  const userAccountId = ref(null);\n  const categoryLoading = ref(false);\n  const fetchAllPlaces = async () => {\n    try {\n      const res = await sendApi({\n        control: 'place',\n        action: 'get_places'\n      });\n      if (res.status === 'success' && Array.isArray(res.data)) {\n        allPlaces.value = res.data;\n        userCoordinate.value = res.cord;\n        userAccountId.value = res.user_account_id;\n      } else {\n        console.error('خطا در دریافت داده‌ها:', res.message);\n      }\n    } catch (e) {\n      console.error('خطا در ارتباط:', e);\n    }\n  };\n  const fetchCategories = async query => {\n    categoryLoading.value = true;\n    try {\n      const res = await sendApi({\n        control: 'place',\n        action: 'get_places_category',\n        data: {\n          search: query\n        }\n      });\n      if (res.status === 'success' && Array.isArray(res.data)) {\n        categories.value = res.data;\n      } else {\n        console.error('خطا در دریافت داده‌ها:', res.message);\n      }\n    } catch (e) {\n      console.error('خطا در ارتباط:', e);\n    } finally {\n      categoryLoading.value = false;\n    }\n  };\n  const submitPlace = async placeData => {\n    try {\n      const res = await sendApi({\n        control: 'place',\n        action: 'add_place',\n        data: placeData\n      });\n      if (res.status === 'success') {\n        await fetchAllPlaces();\n      }\n      return res;\n    } catch (error) {\n      return {\n        status: 'error',\n        message: 'خطا در ارسال درخواست'\n      };\n    }\n  };\n  return {\n    allPlaces,\n    userCoordinate,\n    userAccountId,\n    categories,\n    categoryLoading,\n    fetchAllPlaces,\n    fetchCategories,\n    submitPlace\n  };\n});","map":{"version":3,"names":["defineStore","ref","sendApi","usePlaceStore","allPlaces","categories","userCoordinate","userAccountId","categoryLoading","fetchAllPlaces","res","control","action","status","Array","isArray","data","value","cord","user_account_id","console","error","message","e","fetchCategories","query","search","submitPlace","placeData"],"sources":["D:/GitHub/chat/vue3/src/stores/place.js"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { ref } from 'vue'\r\nimport { sendApi } from '@/utils/api'\r\nexport const usePlaceStore = defineStore('place', () => {\r\n  const allPlaces = ref([])\r\n  const categories = ref([])\r\n  const userCoordinate = ref([])\r\n  const userAccountId = ref(null)\r\n  const categoryLoading = ref(false)\r\n  const fetchAllPlaces = async () => {\r\n    try {\r\n      const res = await sendApi({ control: 'place', action: 'get_places' })\r\n      if (res.status === 'success' && Array.isArray(res.data)) {\r\n        allPlaces.value = res.data\r\n        userCoordinate.value = res.cord\r\n        userAccountId.value= res.user_account_id\r\n    } else {\r\n        console.error('خطا در دریافت داده‌ها:', res.message)\r\n      }\r\n    } catch (e) {\r\n      console.error('خطا در ارتباط:', e)\r\n    }\r\n  }\r\n  const fetchCategories = async (query) => {\r\n    categoryLoading.value = true\r\n    try {\r\n      const res = await sendApi({ control: 'place', action: 'get_places_category' , data: { search: query } })\r\n      if (res.status === 'success' && Array.isArray(res.data)) {\r\n        categories.value=res.data\r\n      } else {\r\n        console.error('خطا در دریافت داده‌ها:', res.message)\r\n      }\r\n    } catch (e) {\r\n      console.error('خطا در ارتباط:', e)\r\n    }finally {\r\n      categoryLoading.value = false\r\n    }\r\n  }\r\n  const submitPlace = async (placeData) => {\r\n    try {\r\n      const res = await sendApi({\r\n        control: 'place',\r\n        action: 'add_place',\r\n        data: placeData\r\n      })\r\n      if (res.status === 'success') {\r\n        await fetchAllPlaces()\r\n      }\r\n      return res\r\n    } catch (error) {\r\n      return { status: 'error', message: 'خطا در ارسال درخواست' }\r\n    }\r\n  }\r\n  return {\r\n    allPlaces,\r\n    userCoordinate,\r\n    userAccountId,\r\n    categories,\r\n    categoryLoading,\r\n    fetchAllPlaces,\r\n    fetchCategories,\r\n    submitPlace\r\n  }\r\n})"],"mappings":"AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,GAAG,QAAQ,KAAK;AACzB,SAASC,OAAO,QAAQ,aAAa;AACrC,OAAO,MAAMC,aAAa,GAAGH,WAAW,CAAC,OAAO,EAAE,MAAM;EACtD,MAAMI,SAAS,GAAGH,GAAG,CAAC,EAAE,CAAC;EACzB,MAAMI,UAAU,GAAGJ,GAAG,CAAC,EAAE,CAAC;EAC1B,MAAMK,cAAc,GAAGL,GAAG,CAAC,EAAE,CAAC;EAC9B,MAAMM,aAAa,GAAGN,GAAG,CAAC,IAAI,CAAC;EAC/B,MAAMO,eAAe,GAAGP,GAAG,CAAC,KAAK,CAAC;EAClC,MAAMQ,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMR,OAAO,CAAC;QAAES,OAAO,EAAE,OAAO;QAAEC,MAAM,EAAE;MAAa,CAAC,CAAC;MACrE,IAAIF,GAAG,CAACG,MAAM,KAAK,SAAS,IAAIC,KAAK,CAACC,OAAO,CAACL,GAAG,CAACM,IAAI,CAAC,EAAE;QACvDZ,SAAS,CAACa,KAAK,GAAGP,GAAG,CAACM,IAAI;QAC1BV,cAAc,CAACW,KAAK,GAAGP,GAAG,CAACQ,IAAI;QAC/BX,aAAa,CAACU,KAAK,GAAEP,GAAG,CAACS,eAAe;MAC5C,CAAC,MAAM;QACHC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEX,GAAG,CAACY,OAAO,CAAC;MACtD;IACF,CAAC,CAAC,OAAOC,CAAC,EAAE;MACVH,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEE,CAAC,CAAC;IACpC;EACF,CAAC;EACD,MAAMC,eAAe,GAAG,MAAOC,KAAK,IAAK;IACvCjB,eAAe,CAACS,KAAK,GAAG,IAAI;IAC5B,IAAI;MACF,MAAMP,GAAG,GAAG,MAAMR,OAAO,CAAC;QAAES,OAAO,EAAE,OAAO;QAAEC,MAAM,EAAE,qBAAqB;QAAGI,IAAI,EAAE;UAAEU,MAAM,EAAED;QAAM;MAAE,CAAC,CAAC;MACxG,IAAIf,GAAG,CAACG,MAAM,KAAK,SAAS,IAAIC,KAAK,CAACC,OAAO,CAACL,GAAG,CAACM,IAAI,CAAC,EAAE;QACvDX,UAAU,CAACY,KAAK,GAACP,GAAG,CAACM,IAAI;MAC3B,CAAC,MAAM;QACLI,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEX,GAAG,CAACY,OAAO,CAAC;MACtD;IACF,CAAC,CAAC,OAAOC,CAAC,EAAE;MACVH,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEE,CAAC,CAAC;IACpC,CAAC,SAAQ;MACPf,eAAe,CAACS,KAAK,GAAG,KAAK;IAC/B;EACF,CAAC;EACD,MAAMU,WAAW,GAAG,MAAOC,SAAS,IAAK;IACvC,IAAI;MACF,MAAMlB,GAAG,GAAG,MAAMR,OAAO,CAAC;QACxBS,OAAO,EAAE,OAAO;QAChBC,MAAM,EAAE,WAAW;QACnBI,IAAI,EAAEY;MACR,CAAC,CAAC;MACF,IAAIlB,GAAG,CAACG,MAAM,KAAK,SAAS,EAAE;QAC5B,MAAMJ,cAAc,CAAC,CAAC;MACxB;MACA,OAAOC,GAAG;IACZ,CAAC,CAAC,OAAOW,KAAK,EAAE;MACd,OAAO;QAAER,MAAM,EAAE,OAAO;QAAES,OAAO,EAAE;MAAuB,CAAC;IAC7D;EACF,CAAC;EACD,OAAO;IACLlB,SAAS;IACTE,cAAc;IACdC,aAAa;IACbF,UAAU;IACVG,eAAe;IACfC,cAAc;IACde,eAAe;IACfG;EACF,CAAC;AACH,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}