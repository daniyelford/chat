{"ast":null,"code":"import { renderSlot as _renderSlot, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  style: {\n    \"margin-top\": \"8px\"\n  }\n};\nconst _hoisted_2 = [\"value\"];\nconst _hoisted_3 = {\n  key: 1,\n  style: {\n    \"margin-top\": \"8px\"\n  }\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = [\"src\"];\nimport { ref } from 'vue';\nexport default {\n  __name: 'UploaderManyMedia',\n  emits: ['update:modelValue'],\n  setup(__props, {\n    emit: __emit\n  }) {\n    const preview = ref(null);\n    const isImage = ref(true);\n    const progress = ref(0);\n    const emit = __emit;\n    const handleMediaBase64 = event => {\n      const file = event.target.files[0];\n      if (!file) return;\n      const reader = new FileReader();\n      reader.onloadstart = () => {\n        progress.value = 0;\n      };\n      reader.onprogress = e => {\n        if (e.lengthComputable) {\n          progress.value = e.loaded / e.total * 100;\n        }\n      };\n      reader.onloadend = () => {\n        progress.value = 100;\n      };\n      reader.onload = () => {\n        const base64 = reader.result;\n        emit('update:modelValue', base64);\n        preview.value = base64;\n        isImage.value = file.type.startsWith('image/');\n      };\n      reader.readAsDataURL(file);\n    };\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"label\", null, [_renderSlot(_ctx.$slots, \"label\", {}, () => [_cache[0] || (_cache[0] = _createTextVNode(\" انتخاب مدیا (دوربین یا گالری): \"))])]), _createElementVNode(\"input\", {\n        type: \"file\",\n        accept: \"image/*,video/*\",\n        capture: \"\",\n        onChange: handleMediaBase64\n      }, null, 32), progress.value > 0 && progress.value < 100 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"progress\", {\n        value: progress.value,\n        max: \"100\",\n        style: {\n          \"width\": \"100%\"\n        }\n      }, null, 8, _hoisted_2), _createElementVNode(\"p\", null, _toDisplayString(progress.value.toFixed(0)) + \"%\", 1)])) : _createCommentVNode(\"\", true), preview.value && progress.value === 100 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_cache[1] || (_cache[1] = _createElementVNode(\"p\", null, \"پیش‌نمایش:\", -1)), isImage.value ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        src: preview.value,\n        style: {\n          \"max-width\": \"100px\"\n        }\n      }, null, 8, _hoisted_4)) : (_openBlock(), _createElementBlock(\"video\", {\n        key: 1,\n        src: preview.value,\n        controls: \"\",\n        style: {\n          \"max-width\": \"150px\"\n        }\n      }, null, 8, _hoisted_5))])) : _createCommentVNode(\"\", true)]);\n    };\n  }\n};","map":{"version":3,"names":["ref","preview","isImage","progress","emit","__emit","handleMediaBase64","event","file","target","files","reader","FileReader","onloadstart","value","onprogress","e","lengthComputable","loaded","total","onloadend","onload","base64","result","type","startsWith","readAsDataURL"],"sources":["D:/GitHub/ci3-vue3/vue3/src/components/tooles/upload/UploaderManyMedia.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <label>\r\n      <slot name=\"label\">\r\n        انتخاب مدیا (دوربین یا گالری):\r\n      </slot>\r\n    </label>\r\n    <input type=\"file\" accept=\"image/*,video/*\" capture @change=\"handleMediaBase64\" />\r\n    <div v-if=\"progress > 0 && progress < 100\" style=\"margin-top: 8px;\">\r\n      <progress :value=\"progress\" max=\"100\" style=\"width: 100%;\"></progress>\r\n      <p>{{ progress.toFixed(0) }}%</p>\r\n    </div>\r\n\r\n    <div v-if=\"preview && progress === 100\" style=\"margin-top: 8px;\">\r\n      <p>پیش‌نمایش:</p>\r\n      <img v-if=\"isImage\" :src=\"preview\" style=\"max-width: 100px;\" />\r\n      <video v-else :src=\"preview\" controls style=\"max-width: 150px;\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineEmits } from 'vue'\r\n    const preview = ref(null)\r\n    const isImage = ref(true)\r\n    const progress = ref(0)\r\n    const emit = defineEmits(['update:modelValue'])\r\n    const handleMediaBase64 = (event) => {\r\n        const file = event.target.files[0]\r\n        if (!file) return\r\n        const reader = new FileReader()\r\n        reader.onloadstart = () => {\r\n            progress.value = 0\r\n        }\r\n        reader.onprogress = (e) => {\r\n            if (e.lengthComputable) {\r\n                progress.value = (e.loaded / e.total) * 100\r\n            }\r\n        }\r\n        reader.onloadend = () => {\r\n            progress.value = 100\r\n        }\r\n        reader.onload = () => {\r\n            const base64 = reader.result\r\n            emit('update:modelValue', base64)\r\n            preview.value = base64\r\n            isImage.value = file.type.startsWith('image/')\r\n        }\r\n        reader.readAsDataURL(file)\r\n    }\r\n</script>\r\n"],"mappings":";;;;;;;;;;;;;;;;AAsBA,SAASA,GAAgB,QAAQ,KAAK;;;;;;;IAClC,MAAMC,OAAO,GAAGD,GAAG,CAAC,IAAI,CAAC;IACzB,MAAME,OAAO,GAAGF,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMG,QAAQ,GAAGH,GAAG,CAAC,CAAC,CAAC;IACvB,MAAMI,IAAI,GAAGC,MAAkC;IAC/C,MAAMC,iBAAiB,GAAIC,KAAK,IAAK;MACjC,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAI,CAACF,IAAI,EAAE;MACX,MAAMG,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,WAAW,GAAG,MAAM;QACvBV,QAAQ,CAACW,KAAK,GAAG,CAAC;MACtB,CAAC;MACDH,MAAM,CAACI,UAAU,GAAIC,CAAC,IAAK;QACvB,IAAIA,CAAC,CAACC,gBAAgB,EAAE;UACpBd,QAAQ,CAACW,KAAK,GAAIE,CAAC,CAACE,MAAM,GAAGF,CAAC,CAACG,KAAK,GAAI,GAAG;QAC/C;MACJ,CAAC;MACDR,MAAM,CAACS,SAAS,GAAG,MAAM;QACrBjB,QAAQ,CAACW,KAAK,GAAG,GAAG;MACxB,CAAC;MACDH,MAAM,CAACU,MAAM,GAAG,MAAM;QAClB,MAAMC,MAAM,GAAGX,MAAM,CAACY,MAAM;QAC5BnB,IAAI,CAAC,mBAAmB,EAAEkB,MAAM,CAAC;QACjCrB,OAAO,CAACa,KAAK,GAAGQ,MAAM;QACtBpB,OAAO,CAACY,KAAK,GAAGN,IAAI,CAACgB,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC;MAClD,CAAC;MACDd,MAAM,CAACe,aAAa,CAAClB,IAAI,CAAC;IAC9B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}